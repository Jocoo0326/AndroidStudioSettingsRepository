<application>
  <component name="VimSettings">
    <state version="4" enabled="true" />
    <globalmarks>
      <mark key="A" line="40" column="11" filename="D:/AndroidStudioProjects/hlixin_android/好利信/src/com/haolixin/activity/ShowPhotoActivity.java" protocol="file" />
      <mark key="V" line="63" column="49" filename="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/mine/commment/adapter/CommentListAdapter.java" protocol="file" />
    </globalmarks>
    <filemarks>
      <file name="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/generic/GenericDraweeHierarchy.java" timestamp="1516863951167">
        <mark key="'" line="189" column="32" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/util/RxUtil.java" timestamp="1514260697273">
        <mark key="'" line="167" column="49" />
      </file>
      <file name="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/view/GenericDraweeView.java" timestamp="1516863607261">
        <mark key="'" line="26" column="47" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/core/ProducerFactory.java" timestamp="1518327928872">
        <mark key="'" line="312" column="29" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2_HeFei_6.0.8/app/src/main/java/com/gdmm/znj/main/ui/fragment/UserInfoFragment.java" timestamp="1517514174197">
        <mark key="'" line="483" column="48" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2_HeFei_6.0.8/app/src/main/java/com/gdmm/znj/util/ShareUtil.java" timestamp="1517514177190">
        <mark key="'" line="188" column="16" />
      </file>
      <file name="D:/Android/sdk/sources/android-26/android/graphics/drawable/ColorDrawable.java" timestamp="1516774331753">
        <mark key="'" line="376" column="0" />
      </file>
      <file name="D:/gradle/bin/caches/modules-2/files-2.1/com.facebook.soloader/soloader/0.3.0/954e6637505f6cf9c492df7aecc3bb75233c4953/soloader-0.3.0-sources.jar!/com/facebook/soloader/SoLoader.java" timestamp="1517209115075">
        <mark key="'" line="119" column="10" />
      </file>
      <file name="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/drawable/ScalingUtils.java" timestamp="1516782055679">
        <mark key="'" line="183" column="24" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/main/model/LocalLifeModel.java" timestamp="1517220221483">
        <mark key="'" line="368" column="8" />
      </file>
      <file name="D:/Freedom/fresco/fbcore/src/main/java/com/facebook/common/references/SharedReference.java" timestamp="1516950369737">
        <mark key="'" line="202" column="21" />
      </file>
      <file name="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/drawable/AutoRotateDrawable.java" timestamp="1514856284201">
        <mark key="'" line="124" column="6" />
      </file>
      <file name="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/drawable/ForwardingDrawable.java" timestamp="1516777001176">
        <mark key="'" line="184" column="11" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/locallife/shoppingcart/widget/NumberPickView.java" timestamp="1515638355320">
        <mark key="'" line="243" column="13" />
      </file>
      <file name="D:/Freedom/shimmer-android-master/shimmer-android/src/main/java/com/facebook/shimmer/ShimmerFrameLayout.java" timestamp="1518429537891">
        <mark key="'" line="696" column="19" />
      </file>
      <file name="D:/Freedom/fresco/fbcore/src/main/java/com/facebook/common/internal/Closeables.java" timestamp="1516937382119">
        <mark key="'" line="34" column="13" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/mine/topic/ui/FMMyTopicFragment.java" timestamp="1519264060220">
        <mark key="'" line="127" column="36" />
      </file>
      <file name="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/generic/RootDrawable.java" timestamp="1516863492451">
        <mark key="'" line="37" column="67" />
      </file>
      <file name="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/view/DraweeView.java" timestamp="1518320249000">
        <mark key="'" line="121" column="21" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/locallife/shoppingcart/presenter/ShoppingCartPresenter.java" timestamp="1515638127283">
        <mark key="'" line="94" column="73" />
      </file>
      <file name="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/view/DraweeHolder.java" timestamp="1518320271669">
        <mark key="'" line="263" column="22" />
      </file>
      <file name="D:/Freedom/fresco/fbcore/src/main/java/com/facebook/widget/text/span/BetterImageSpan.java" timestamp="1517190580253">
        <mark key="'" line="150" column="13" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline-base/src/main/java/com/facebook/imagepipeline/image/ImageInfo.java" timestamp="1516951189387">
        <mark key="'" line="29" column="12" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/producers/NetworkFetcher.java" timestamp="1517491815197">
        <mark key="'" line="65" column="11" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/main/model/NewsArticle.java" timestamp="1517210805108">
        <mark key="'" line="168" column="13" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/main/ui/fragment/NewsChildFragment.java" timestamp="1517906783692">
        <mark key="'" line="37" column="12" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/producers/JobScheduler.java" timestamp="1517497764279">
        <mark key="'" line="46" column="25" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/locallife/shoppingcart/ShoppingCartActivity.java" timestamp="1515984949914">
        <mark key="'" line="46" column="68" />
      </file>
      <file name="D:/Android/sdk/sources/android-26/java/lang/System.java" timestamp="1516933846905">
        <mark key="'" line="893" column="35" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/main/adapter/HorizontalRecommendAdapter.java" timestamp="1515133551777">
        <mark key="'" line="77" column="26" />
      </file>
      <file name="D:/Freedom/fresco/fbcore/src/main/java/com/facebook/common/util/UriUtil.java" timestamp="1517368897328">
        <mark key="'" line="90" column="27" />
      </file>
      <file name="D:/Android/sdk/sources/android-26/android/os/StrictMode.java" timestamp="1517198000677">
        <mark key="'" line="375" column="30" />
      </file>
      <file name="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/view/SimpleDraweeView.java" timestamp="1518320227555">
        <mark key="'" line="144" column="13" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/main/ui/fragment/BroadcastFragment.java" timestamp="1517907637746">
        <mark key="'" line="103" column="0" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/request/ImageRequest.java" timestamp="1517474196631">
        <mark key="'" line="317" column="0" />
      </file>
      <file name="D:/Freedom/fresco/fbcore/src/main/java/com/facebook/common/references/CloseableReference.java" timestamp="1516952892839">
        <mark key="'" line="124" column="30" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/main/model/NewsArticlesResponse.java" timestamp="1517210790641">
        <mark key="'" line="7" column="13" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2_HeFei_6.0.8/app/src/main/java/com/gdmm/znj/main/ui/fragment/BroadcastFragment.java" timestamp="1517511658686">
        <mark key="'" line="77" column="19" />
      </file>
      <file name="D:/Freedom/fresco/drawee-backends/drawee-pipeline/src/main/java/com/facebook/drawee/backends/pipeline/PipelineDraweeControllerBuilder.java" timestamp="1518320427311">
        <mark key="'" line="101" column="26" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline-base/src/main/java/com/facebook/imagepipeline/image/CloseableBitmap.java" timestamp="1516937097679">
        <mark key="'" line="15" column="53" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline-base/src/main/java/com/facebook/imagepipeline/image/EncodedImage.java" timestamp="1517498521907">
        <mark key="'" line="277" column="54" />
      </file>
      <file name="D:/Freedom/fresco/samples/zoomableapp/build.gradle" timestamp="1516865290073">
        <mark key="'" line="19" column="15" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/main/ui/fragment/CommunityFragment.java" timestamp="1517906182982">
        <mark key="'" line="142" column="32" />
      </file>
      <file name="D:/Freedom/shimmer-android-master/build.gradle" timestamp="1518426316671">
        <mark key="[" line="7" column="50" />
        <mark key="]" line="7" column="54" />
        <mark key="^" line="7" column="54" />
        <mark key="." line="7" column="54" />
      </file>
      <file name="/Clipboard.txt" timestamp="1519269780970">
        <mark key="[" line="0" column="0" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/locallife/shoppingcart/adapter/CartAdapter.java" timestamp="1515999062905">
        <mark key="'" line="776" column="46" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/main/ui/fragment/UserInfoFragment.java" timestamp="1517514390676">
        <mark key="'" line="492" column="48" />
      </file>
      <file name="D:/Freedom/fresco/fbcore/src/main/java/com/facebook/common/logging/FLogDefaultLoggingDelegate.java" timestamp="1517197005151">
        <mark key="'" line="136" column="12" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/mine/order/list/OrderListPresenter.java" timestamp="1517502377922">
        <mark key="'" line="45" column="39" />
      </file>
      <file name="D:/Freedom/fresco/samples/showcase/src/main/java/com/facebook/fresco/samples/showcase/imageformat/color/ColorImageExample.java" timestamp="1516951357397">
        <mark key="'" line="96" column="22" />
      </file>
      <file name="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/drawable/ScaleTypeDrawable.java" timestamp="1516783741139">
        <mark key="'" line="98" column="48" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/locallife/shoppingcart/widget/PullToRefreshSwipeLayoutInRecyclerView.java" timestamp="1515984965356">
        <mark key="'" line="19" column="86" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/main/model/LocalLifeService.java" timestamp="1517217210317">
        <mark key="'" line="256" column="33" />
      </file>
      <file name="D:/Freedom/fresco/drawee-backends/drawee-pipeline/src/main/java/com/facebook/drawee/backends/pipeline/PipelineDraweeControllerBuilderSupplier.java" timestamp="1517366705830">
        <mark key="'" line="25" column="26" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline/src/main/jni/imagepipeline/init.cpp" timestamp="1518330822760">
        <mark key="'" line="89" column="21" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline-base/src/main/java/com/facebook/imagepipeline/image/CloseableStaticBitmap.java" timestamp="1516950667861">
        <mark key="'" line="35" column="20" />
      </file>
      <file name="D:/Freedom/fresco/samples/kotlin/src/main/kotlin/com/facebook/samples/kotlin/MainActivity.kt" timestamp="1516865806774">
        <mark key="'" line="44" column="27" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/decoder/DefaultImageDecoder.java" timestamp="1517498367062">
        <mark key="'" line="86" column="4" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/radio/FmNavTopBar.java" timestamp="1517906651430">
        <mark key="'" line="84" column="80" />
      </file>
      <file name="D:/AndroidStudioProjects/hlixin_android/好利信/src/com/haolixin/activity/ShowPhotoActivity.java" timestamp="1518399145655" />
      <file name="D:/Freedom/fresco/imagepipeline-backends/imagepipeline-okhttp3/build.gradle" timestamp="1516951557438">
        <mark key="'" line="6" column="51" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/producers/ThreadHandoffProducer.java" timestamp="1517489351908">
        <mark key="'" line="34" column="65" />
      </file>
      <file name="D:/Android/sdk/sources/android-26/java/util/HashMap.java" timestamp="1517801898263">
        <mark key="'" line="137" column="15" />
      </file>
      <file name="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/controller/BaseControllerListener.java" timestamp="1517293361876">
        <mark key="'" line="17" column="62" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/community/forum/adapter/ForumHomeItemAdapter.java" timestamp="1517559525723">
        <mark key="'" line="187" column="17" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/util/FrescoLoadUtil.java" timestamp="1514366779583">
        <mark key="'" line="136" column="15" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/main/ui/fragment/NewsFragment.java" timestamp="1517905943245">
        <mark key="'" line="145" column="32" />
      </file>
      <file name="D:/Freedom/fresco/samples/kotlin/src/main/kotlin/com/facebook/samples/kotlin/MediaStoreData.kt" timestamp="1516865507601">
        <mark key="'" line="29" column="15" />
      </file>
      <file name="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/interfaces/SimpleDraweeControllerBuilder.java" timestamp="1515491464574">
        <mark key="'" line="32" column="13" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/mine/order/OrderInfo.java" timestamp="1517502455499">
        <mark key="'" line="75" column="21" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/splash/SplashActivity.java" timestamp="1516155172268">
        <mark key="'" line="56" column="57" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/mine/order/list/UserOrderListFragment.java" timestamp="1517502361499">
        <mark key="'" line="39" column="38" />
      </file>
      <file name="D:/Freedom/JuniorDemo/app/src/main/java/com/jocoo/juniordemo/MainActivity.kt" timestamp="1516866181379">
        <mark key="'" line="77" column="10" />
      </file>
      <file name="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/generic/GenericDraweeHierarchyBuilder.java" timestamp="1516697942365">
        <mark key="'" line="662" column="23" />
      </file>
      <file name="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/interfaces/DraweeController.java" timestamp="1515491885704">
        <mark key="'" line="59" column="6" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/mine/medal/ui/MedalDetailsActivity.java" timestamp="1516678696323">
        <mark key="'" line="64" column="52" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/nanjing/java/com/gdmm/znj/common/html5/Html5Activity.java" timestamp="1516068295553">
        <mark key="'" line="1121" column="50" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/datasource/CloseableProducerToDataSourceAdapter.java" timestamp="1518328682758">
        <mark key="'" line="40" column="5" />
      </file>
      <file name="D:/Freedom/fresco/samples/zoomableapp/src/main/java/com/facebook/samples/zoomableapp/ZoomableApplication.java" timestamp="1517365659118">
        <mark key="'" line="35" column="22" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/photo/choose/UploadPhotoPresenter.java" timestamp="1514267079838">
        <mark key="'" line="195" column="67" />
      </file>
      <file name="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/drawable/DrawableProperties.java" timestamp="1516776172584">
        <mark key="'" line="63" column="2" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/auction/SlideViewPager.java" timestamp="1514269385229">
        <mark key="'" line="66" column="26" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline-base/src/main/java/com/facebook/imageformat/DefaultImageFormatChecker.java" timestamp="1516952105505">
        <mark key="'" line="24" column="76" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/res/layout/fragment_broadcast.xml" timestamp="1517906645654">
        <mark key="'" line="11" column="32" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline/src/main/jni/bitmaps/Bitmaps.c" timestamp="1518417734703">
        <mark key="'" line="165" column="14" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/util/Constants.java" timestamp="1517193128585">
        <mark key="'" line="22" column="7" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline-base/src/main/java/com/facebook/imagepipeline/cache/MemoryCache.java" timestamp="1516870624431">
        <mark key="'" line="60" column="4" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/mine/mainpage/ui/MyPageCommunityFragment.java" timestamp="1517280767643">
        <mark key="'" line="70" column="21" />
      </file>
      <file name="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/controller/AbstractDraweeControllerBuilder.java" timestamp="1518327669756">
        <mark key="'" line="385" column="15" />
      </file>
      <file name="D:/Freedom/fresco/fbcore/src/main/java/com/facebook/common/logging/LoggingDelegate.java" timestamp="1517191710828">
        <mark key="'" line="136" column="59" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/producers/DecodeProducer.java" timestamp="1517498028773">
        <mark key="'" line="225" column="66" />
      </file>
      <file name="D:/Freedom/fresco/drawee-backends/drawee-pipeline/src/main/java/com/facebook/drawee/backends/pipeline/PipelineDraweeController.java" timestamp="1518320386748">
        <mark key="'" line="64" column="67" />
      </file>
      <file name="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/controller/AbstractDraweeController.java" timestamp="1518320358466">
        <mark key="'" line="479" column="11" />
      </file>
      <file name="D:/Android/sdk/sources/android-26/android/view/View.java" timestamp="1515480474907">
        <mark key="'" line="22137" column="15" />
      </file>
      <file name="D:/Android/sdk/sources/android-21/android/view/ViewRootImpl.java" timestamp="1518428928428">
        <mark key="'" line="1291" column="28" />
      </file>
      <file name="D:/Freedom/fresco/fbcore/src/main/java/com/facebook/datasource/SimpleDataSource.java" timestamp="1517478950887">
        <mark key="'" line="45" column="23" />
      </file>
      <file name="D:/Android/sdk/sources/android-26/java/io/Closeable.java" timestamp="1514451228507">
        <mark key="'" line="36" column="35" />
      </file>
      <file name="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/components/DraweeEventTracker.java" timestamp="1516931859630">
        <mark key="'" line="74" column="20" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/main/presenter/UserInfoPresenter.java" timestamp="1516784770489">
        <mark key="'" line="133" column="47" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/mine/mainpage/ui/MyPageActivity.java" timestamp="1517885533713">
        <mark key="'" line="165" column="45" />
      </file>
      <file name="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/drawable/TransformAwareDrawable.java" timestamp="1516775522763">
        <mark key="'" line="21" column="37" />
      </file>
      <file name="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/generic/GenericDraweeHierarchyInflater.java" timestamp="1516695225752">
        <mark key="'" line="26" column="27" />
      </file>
      <file name="D:/Freedom/fresco/drawee-backends/drawee-pipeline/src/main/java/com/facebook/drawee/backends/pipeline/PipelineDraweeControllerFactory.java" timestamp="1517295075628">
        <mark key="'" line="100" column="63" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/gradle.properties" timestamp="1519265860973">
        <mark key="[" line="19" column="27" />
        <mark key="]" line="19" column="26" />
        <mark key="." line="19" column="26" />
        <mark key="^" line="19" column="26" />
      </file>
      <file name="D:/Freedom/fresco/drawee/src/main/res/values/attrs.xml" timestamp="1514537750809">
        <mark key="'" line="75" column="37" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/listener/RequestLoggingListener.java" timestamp="1517364685627">
        <mark key="'" line="115" column="4" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/main/widget/CategoryPager.java" timestamp="1517220226794">
        <mark key="'" line="36" column="13" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/mine/topic/presenter/TopicPresenter.java" timestamp="1518115965370">
        <mark key="'" line="61" column="65" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/producers/StatefulProducerRunnable.java" timestamp="1517489366887">
        <mark key="'" line="21" column="22" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/main/ui/BaseWithDialogActivity.java" timestamp="1517219422271">
        <mark key="'" line="59" column="33" />
      </file>
      <file name="D:/Freedom/fresco/samples/zoomable/src/main/java/com/facebook/samples/zoomable/ZoomableDraweeView.java" timestamp="1517294360126">
        <mark key="'" line="259" column="33" />
      </file>
      <file name="D:/Freedom/fresco/fbcore/src/main/java/com/facebook/datasource/AbstractDataSource.java" timestamp="1517487947258">
        <mark key="'" line="209" column="32" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2_HeFei_6.0.8/app/src/main/res/layout/fragment_broadcast.xml" timestamp="1517511587696">
        <mark key="'" line="14" column="43" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/producers/ThreadHandoffProducerQueue.java" timestamp="1517489282016">
        <mark key="'" line="30" column="13" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/producers/HttpUrlConnectionNetworkFetcher.java" timestamp="1517495636541">
        <mark key="'" line="55" column="14" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/main/ui/MainActivity.java" timestamp="1516155135291">
        <mark key="'" line="28" column="28" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/radio/formdetail/RadioFormDetailActivity.java" timestamp="1518115646419">
        <mark key="'" line="18" column="32" />
      </file>
      <file name="D:/Freedom/fresco/fbcore/src/main/java/com/facebook/common/logging/FLog.java" timestamp="1517191207348">
        <mark key="'" line="443" column="45" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/upgrade/UpgradeInfo.java" timestamp="1515551455431">
        <mark key="'" line="138" column="0" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/mine/topic/adapter/FMMyTopicAdapter.java" timestamp="1518115637785">
        <mark key="'" line="180" column="46" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/core/ProducerSequenceFactory.java" timestamp="1518327920245">
        <mark key="'" line="327" column="44" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/producers/NetworkFetchProducer.java" timestamp="1518328392433">
        <mark key="'" line="153" column="14" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/util/NavigationUtil.java" timestamp="1518115641136">
        <mark key="'" line="1617" column="31" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/community/forum/ui/ForumModuleDetailFragment.java" timestamp="1515376707467">
        <mark key="'" line="95" column="87" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/nanping/java/com/gdmm/znj/common/html5/Html5Activity.java" timestamp="1519269891109">
        <mark key="'" line="1241" column="0" />
        <mark key="[" line="74" column="0" />
        <mark key="]" line="1241" column="1" />
        <mark key="." line="74" column="0" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/mine/medal/ui/MyMedalActivity.java" timestamp="1517888074815">
        <mark key="'" line="40" column="27" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline-base/src/main/java/com/facebook/imageformat/ImageFormatChecker.java" timestamp="1516952506365">
        <mark key="'" line="31" column="37" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/producers/DiskCacheReadProducer.java" timestamp="1517490779300">
        <mark key="'" line="78" column="20" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/splash/service/LoadIntentService.java" timestamp="1516266544248">
        <mark key="'" line="167" column="50" />
      </file>
      <file name="D:/Android/sdk/sources/android-26/java/util/concurrent/ExecutorService.java" timestamp="1517493112134">
        <mark key="'" line="278" column="0" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline-base/src/main/java/com/facebook/imagepipeline/image/ImmutableQualityInfo.java" timestamp="1514451558903">
        <mark key="'" line="69" column="15" />
      </file>
      <file name="D:/gradle/bin/caches/modules-2/files-2.1/io.realm/realm-android-library/4.3.1/7c1a2f7dccec1d2ca551f12b3d172251f8d7441f/realm-android-library-4.3.1-sources.jar!/io/realm/RealmResults.java" timestamp="1515466568070">
        <mark key="'" line="61" column="37" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline-base/src/main/java/com/facebook/imagepipeline/drawable/DrawableFactory.java" timestamp="1516951178245">
        <mark key="'" line="36" column="37" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/main/userinfo/UserService.java" timestamp="1517502404686">
        <mark key="'" line="445" column="37" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/mine/commment/adapter/CommentListAdapter.java" timestamp="1518399145655" />
      <file name="D:/Freedom/fresco/drawee-backends/drawee-pipeline/src/main/java/com/facebook/drawee/backends/pipeline/Fresco.java" timestamp="1517365672932">
        <mark key="'" line="71" column="33" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline-base/src/main/java/com/facebook/imagepipeline/image/QualityInfo.java" timestamp="1514451124310">
        <mark key="'" line="35" column="17" />
      </file>
      <file name="D:/Android/sdk/sources/android-21/android/widget/Scroller.java" timestamp="1518428409892">
        <mark key="'" line="369" column="8" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/util/ShareUtil.java" timestamp="1517514396695">
        <mark key="'" line="204" column="15" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/build.gradle" timestamp="1519269210254">
        <mark key="'" line="24" column="8" />
        <mark key="[" line="134" column="27" />
        <mark key="]" line="134" column="31" />
        <mark key="^" line="134" column="31" />
        <mark key="." line="134" column="31" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2_HeFei_6.0.8/app/build.gradle" timestamp="1517506610256">
        <mark key="'" line="235" column="0" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/zhengzhou/java/com/gdmm/znj/common/html5/Html5Activity.java" timestamp="1519269889013">
        <mark key="'" line="45" column="25" />
        <mark key="[" line="75" column="0" />
        <mark key="]" line="1242" column="0" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/datasource/AbstractProducerToDataSourceAdapter.java" timestamp="1518328702233">
        <mark key="'" line="43" column="38" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/ZNJApplication.java" timestamp="1516155637662">
        <mark key="'" line="145" column="44" />
      </file>
      <file name="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/drawable/FadeDrawable.java" timestamp="1517294099785">
        <mark key="'" line="31" column="42" />
      </file>
      <file name="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/drawable/ArrayDrawable.java" timestamp="1516851916446">
        <mark key="'" line="16" column="13" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/core/ImagePipeline.java" timestamp="1518328662580">
        <mark key="'" line="564" column="54" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2_HeFei_6.0.8/app/src/main/java/com/gdmm/znj/radio/bcastlive/BroadCastLiveFragment.java" timestamp="1517510130556">
        <mark key="'" line="168" column="12" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/AndroidManifest.xml" timestamp="1517219041165">
        <mark key="'" line="0" column="0" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2_HeFei_6.0.8/app/src/main/java/com/gdmm/znj/radio/bcastlive/BroadCastLiveActivity.java" timestamp="1517510079077">
        <mark key="'" line="48" column="25" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/mine/medal/ui/MedalGotFragment.java" timestamp="1517888040778">
        <mark key="'" line="63" column="8" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/res/layout/fragment_community.xml" timestamp="1517906685688">
        <mark key="'" line="10" column="43" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline-backends/imagepipeline-okhttp3/src/main/java/com/facebook/imagepipeline/backends/okhttp3/OkHttpNetworkFetcher.java" timestamp="1518328055557">
        <mark key="'" line="104" column="16" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline-base/src/main/java/com/facebook/imagepipeline/image/CloseableImage.java" timestamp="1516951182048">
        <mark key="'" line="17" column="61" />
      </file>
      <file name="D:/Android/sdk/sources/android-26/android/graphics/drawable/BitmapDrawable.java" timestamp="1516782841919">
        <mark key="'" line="534" column="25" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/mine/medal/presenter/MedalPresenter.java" timestamp="1516674343049">
        <mark key="'" line="51" column="38" />
      </file>
      <file name="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/drawable/DrawableUtils.java" timestamp="1516775493924">
        <mark key="'" line="75" column="49" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/core/ImagePipelineFactory.java" timestamp="1517365882703">
        <mark key="'" line="96" column="6" />
      </file>
      <file name="D:/Android/sdk/sources/android-26/java/util/logging/Logger.java" timestamp="1516938221225">
        <mark key="'" line="112" column="45" />
      </file>
      <file name="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/producers/DiskCacheWriteProducer.java" timestamp="1518312173364">
        <mark key="'" line="65" column="35" />
      </file>
      <file name="D:/Android/sdk/sources/android-21/android/view/View.java" timestamp="1518428962422">
        <mark key="'" line="13262" column="13" />
      </file>
      <file name="D:/WorkSpace/ZaiNanJing2/app/src/hefei/java/com/gdmm/znj/util/Config.java" timestamp="1516068345688">
        <mark key="'" line="6" column="17" />
      </file>
      <file name="D:/Freedom/fresco/fbcore/src/main/java/com/facebook/common/executors/StatefulRunnable.java" timestamp="1517489713843">
        <mark key="'" line="39" column="19" />
      </file>
      <file name="D:/Android/sdk/sources/android-26/android/graphics/drawable/Drawable.java" timestamp="1516782633078">
        <mark key="'" line="231" column="20" />
      </file>
    </filemarks>
    <jumps>
      <jump line="359" column="17" filename="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/controller/AbstractDraweeController.java" />
      <jump line="427" column="36" filename="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/controller/AbstractDraweeController.java" />
      <jump line="658" column="14" filename="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/controller/AbstractDraweeController.java" />
      <jump line="479" column="11" filename="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/controller/AbstractDraweeController.java" />
      <jump line="209" column="22" filename="D:/Freedom/fresco/drawee-backends/drawee-pipeline/src/main/java/com/facebook/drawee/backends/pipeline/PipelineDraweeController.java" />
      <jump line="64" column="67" filename="D:/Freedom/fresco/drawee-backends/drawee-pipeline/src/main/java/com/facebook/drawee/backends/pipeline/PipelineDraweeController.java" />
      <jump line="101" column="26" filename="D:/Freedom/fresco/drawee-backends/drawee-pipeline/src/main/java/com/facebook/drawee/backends/pipeline/PipelineDraweeControllerBuilder.java" />
      <jump line="197" column="11" filename="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/controller/AbstractDraweeControllerBuilder.java" />
      <jump line="303" column="9" filename="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/controller/AbstractDraweeControllerBuilder.java" />
      <jump line="326" column="8" filename="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/controller/AbstractDraweeControllerBuilder.java" />
      <jump line="327" column="13" filename="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/controller/AbstractDraweeControllerBuilder.java" />
      <jump line="185" column="4" filename="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/controller/AbstractDraweeControllerBuilder.java" />
      <jump line="63" column="48" filename="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/controller/AbstractDraweeControllerBuilder.java" />
      <jump line="334" column="43" filename="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/controller/AbstractDraweeControllerBuilder.java" />
      <jump line="374" column="39" filename="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/controller/AbstractDraweeControllerBuilder.java" />
      <jump line="385" column="15" filename="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/controller/AbstractDraweeControllerBuilder.java" />
      <jump line="448" column="39" filename="D:/Freedom/fresco/drawee/src/main/java/com/facebook/drawee/controller/AbstractDraweeControllerBuilder.java" />
      <jump line="114" column="24" filename="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/core/ImagePipeline.java" />
      <jump line="199" column="38" filename="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/core/ImagePipeline.java" />
      <jump line="215" column="28" filename="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/core/ProducerSequenceFactory.java" />
      <jump line="255" column="25" filename="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/core/ProducerSequenceFactory.java" />
      <jump line="287" column="63" filename="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/core/ProducerSequenceFactory.java" />
      <jump line="327" column="44" filename="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/core/ProducerSequenceFactory.java" />
      <jump line="312" column="29" filename="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/core/ProducerFactory.java" />
      <jump line="104" column="16" filename="D:/Freedom/fresco/imagepipeline-backends/imagepipeline-okhttp3/src/main/java/com/facebook/imagepipeline/backends/okhttp3/OkHttpNetworkFetcher.java" />
      <jump line="69" column="47" filename="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/producers/NetworkFetchProducer.java" />
      <jump line="105" column="18" filename="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/producers/NetworkFetchProducer.java" />
      <jump line="153" column="14" filename="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/producers/NetworkFetchProducer.java" />
      <jump line="200" column="26" filename="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/core/ImagePipeline.java" />
      <jump line="564" column="54" filename="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/core/ImagePipeline.java" />
      <jump line="32" column="38" filename="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/datasource/CloseableProducerToDataSourceAdapter.java" />
      <jump line="40" column="5" filename="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/datasource/CloseableProducerToDataSourceAdapter.java" />
      <jump line="43" column="38" filename="D:/Freedom/fresco/imagepipeline/src/main/java/com/facebook/imagepipeline/datasource/AbstractProducerToDataSourceAdapter.java" />
      <jump line="43" column="0" filename="D:/Freedom/fresco/imagepipeline/src/main/jni/bitmaps/Bitmaps.c" />
      <jump line="188" column="5" filename="D:/Freedom/fresco/imagepipeline/src/main/jni/bitmaps/Bitmaps.c" />
      <jump line="46" column="30" filename="D:/Freedom/fresco/imagepipeline/src/main/jni/imagepipeline/init.cpp" />
      <jump line="91" column="21" filename="D:/Freedom/fresco/imagepipeline/src/main/jni/imagepipeline/init.cpp" />
      <jump line="167" column="14" filename="D:/Freedom/fresco/imagepipeline/src/main/jni/bitmaps/Bitmaps.c" />
      <jump line="152" column="16" filename="D:/Freedom/shimmer-android-master/shimmer-android/src/main/java/com/facebook/shimmer/ShimmerFrameLayout.java" />
      <jump line="6973" column="14" filename="D:/Android/sdk/sources/android-21/android/view/View.java" />
      <jump line="6975" column="39" filename="D:/Android/sdk/sources/android-21/android/view/View.java" />
      <jump line="6976" column="17" filename="D:/Android/sdk/sources/android-21/android/view/View.java" />
      <jump line="6985" column="19" filename="D:/Android/sdk/sources/android-21/android/view/View.java" />
      <jump line="0" column="0" filename="D:/Android/sdk/sources/android-21/android/view/ViewRootImpl.java" />
      <jump line="2462" column="34" filename="D:/Android/sdk/sources/android-21/android/view/ViewRootImpl.java" />
      <jump line="2514" column="34" filename="D:/Android/sdk/sources/android-21/android/view/ViewRootImpl.java" />
      <jump line="1292" column="24" filename="D:/Android/sdk/sources/android-21/android/view/ViewRootImpl.java" />
      <jump line="1451" column="28" filename="D:/Android/sdk/sources/android-21/android/view/ViewRootImpl.java" />
      <jump line="1866" column="24" filename="D:/Android/sdk/sources/android-21/android/view/ViewRootImpl.java" />
      <jump line="1875" column="24" filename="D:/Android/sdk/sources/android-21/android/view/ViewRootImpl.java" />
      <jump line="1955" column="41" filename="D:/Android/sdk/sources/android-21/android/view/ViewRootImpl.java" />
      <jump line="2400" column="15" filename="D:/Android/sdk/sources/android-21/android/view/ViewRootImpl.java" />
      <jump line="2756" column="39" filename="D:/Android/sdk/sources/android-21/android/view/ViewRootImpl.java" />
      <jump line="151" column="10" filename="D:/Android/sdk/sources/android-21/android/widget/Scroller.java" />
      <jump line="160" column="10" filename="D:/Android/sdk/sources/android-21/android/widget/Scroller.java" />
      <jump line="369" column="8" filename="D:/Android/sdk/sources/android-21/android/widget/Scroller.java" />
      <jump line="1972" column="26" filename="D:/Android/sdk/sources/android-21/android/view/ViewRootImpl.java" />
      <jump line="1025" column="57" filename="D:/Android/sdk/sources/android-21/android/view/ViewRootImpl.java" />
      <jump line="5781" column="57" filename="D:/Android/sdk/sources/android-21/android/view/ViewRootImpl.java" />
      <jump line="5778" column="21" filename="D:/Android/sdk/sources/android-21/android/view/ViewRootImpl.java" />
      <jump line="1053" column="27" filename="D:/Android/sdk/sources/android-21/android/view/ViewRootImpl.java" />
      <jump line="1310" column="32" filename="D:/Android/sdk/sources/android-21/android/view/ViewRootImpl.java" />
      <jump line="8695" column="16" filename="D:/Android/sdk/sources/android-21/android/view/View.java" />
      <jump line="1291" column="28" filename="D:/Android/sdk/sources/android-21/android/view/ViewRootImpl.java" />
      <jump line="12942" column="19" filename="D:/Android/sdk/sources/android-21/android/view/View.java" />
      <jump line="13262" column="13" filename="D:/Android/sdk/sources/android-21/android/view/View.java" />
      <jump line="605" column="36" filename="D:/Freedom/shimmer-android-master/shimmer-android/src/main/java/com/facebook/shimmer/ShimmerFrameLayout.java" />
      <jump line="770" column="15" filename="D:/Freedom/shimmer-android-master/shimmer-android/src/main/java/com/facebook/shimmer/ShimmerFrameLayout.java" />
      <jump line="708" column="18" filename="D:/Freedom/shimmer-android-master/shimmer-android/src/main/java/com/facebook/shimmer/ShimmerFrameLayout.java" />
      <jump line="696" column="19" filename="D:/Freedom/shimmer-android-master/shimmer-android/src/main/java/com/facebook/shimmer/ShimmerFrameLayout.java" />
      <jump line="127" column="36" filename="D:/WorkSpace/ZaiNanJing2/app/src/main/java/com/gdmm/znj/mine/topic/ui/FMMyTopicFragment.java" />
      <jump line="24" column="8" filename="D:/WorkSpace/ZaiNanJing2/app/build.gradle" />
      <jump line="509" column="45" filename="D:/WorkSpace/ZaiNanJing2/app/src/zhengzhou/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="150" column="43" filename="D:/WorkSpace/ZaiNanJing2/app/src/nanping/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="1157" column="44" filename="D:/WorkSpace/ZaiNanJing2/app/src/zhengzhou/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="0" column="0" filename="D:/WorkSpace/ZaiNanJing2/app/src/nanping/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="1216" column="22" filename="D:/WorkSpace/ZaiNanJing2/app/src/nanping/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="1171" column="4" filename="D:/WorkSpace/ZaiNanJing2/app/src/zhengzhou/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="1224" column="0" filename="D:/WorkSpace/ZaiNanJing2/app/src/nanping/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="191" column="33" filename="D:/WorkSpace/ZaiNanJing2/app/src/zhengzhou/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="199" column="18" filename="D:/WorkSpace/ZaiNanJing2/app/src/nanping/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="1232" column="44" filename="D:/WorkSpace/ZaiNanJing2/app/src/zhengzhou/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="53" column="34" filename="D:/WorkSpace/ZaiNanJing2/app/src/zhengzhou/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="68" column="24" filename="D:/WorkSpace/ZaiNanJing2/app/src/zhengzhou/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="321" column="57" filename="D:/WorkSpace/ZaiNanJing2/app/src/zhengzhou/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="333" column="53" filename="D:/WorkSpace/ZaiNanJing2/app/src/zhengzhou/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="0" column="0" filename="D:/WorkSpace/ZaiNanJing2/app/src/zhengzhou/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="474" column="22" filename="D:/WorkSpace/ZaiNanJing2/app/src/nanping/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="80" column="41" filename="D:/WorkSpace/ZaiNanJing2/app/src/nanping/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="21" column="29" filename="D:/WorkSpace/ZaiNanJing2/app/src/zhengzhou/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="74" column="2" filename="D:/WorkSpace/ZaiNanJing2/app/src/nanping/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="73" column="0" filename="D:/WorkSpace/ZaiNanJing2/app/src/nanping/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="3" column="0" filename="D:/WorkSpace/ZaiNanJing2/app/src/nanping/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="75" column="0" filename="D:/WorkSpace/ZaiNanJing2/app/src/zhengzhou/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="1242" column="0" filename="D:/WorkSpace/ZaiNanJing2/app/src/zhengzhou/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="46" column="25" filename="D:/WorkSpace/ZaiNanJing2/app/src/zhengzhou/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="674" column="66" filename="D:/WorkSpace/ZaiNanJing2/app/src/zhengzhou/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="57" column="0" filename="D:/WorkSpace/ZaiNanJing2/app/src/nanping/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="45" column="25" filename="D:/WorkSpace/ZaiNanJing2/app/src/zhengzhou/java/com/gdmm/znj/common/html5/Html5Activity.java" />
      <jump line="1241" column="0" filename="D:/WorkSpace/ZaiNanJing2/app/src/nanping/java/com/gdmm/znj/common/html5/Html5Activity.java" />
    </jumps>
    <registers>
      <register name="a" type="4">
        <keys>
          <key char="97" code="0" mods="0" />
          <key char="64" code="0" mods="0" />
          <key char="66" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="86" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="119" code="0" mods="0" />
          <key char="40" code="0" mods="0" />
          <key char="82" code="0" mods="0" />
          <key char="46" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="46" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="65" code="0" mods="0" />
          <key char="32" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name="&quot;" type="2">
        <text encoding="base64">LyoqCiAqIGh0bWw1CiAqLwpAU3VwcHJlc3NMaW50KHsiSGFuZGxlckxlYWsiLCAiU2V0SmF2YVNjcmlwdEVuYWJsZWQifSkKcHVibGljIGNsYXNzIEh0bWw1QWN0aXZpdHkgZXh0ZW5kcyBXWEVudHJ5QWN0aXZpdHk8SHRtbDVDb250cmFjdC5QcmVzZW50ZXI+IGltcGxlbWVudHMgSHRtbDVDb250cmFjdC5WaWV3IHsKCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBMT0dJTl9SRVNVTFRDT0RFID0gMTAyMDA7CgogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgUElOR0FOX1BBWV9FUlJPUiA9ICIwIjsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IFBJTkdBTl9QQVlfU1VDQ0VTUyA9IDE7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBBQkNfUEFZX1NVQ0NFU1MgPSAyOwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgQUJDX1BBWV9FUlJPUiA9IDM7CgogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgQk9DX1BBWV9TVUNDRVNTID0gNDsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IEJPQ19QQVlfRVJST1IgPSA1OwogICAgLy8gxcTJ4828xqwgt7W72MLrCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBDQU1FUkEgPSAxMDAwOwogICAgLy8g0aHU8c28xqwgt7W72MLrCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBTRUxFQ1RfUEhPVE8gPSAzMDAwOwogICAgLy8gzbzGrCDA4NDNCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBUWVBFX1BIT1RPID0gImltYWdlLyoiOwogICAgcHVibGljIFZhbHVlQ2FsbGJhY2s8VXJpPiBtRmlsZVBhdGhDYWxsYmFjazsKICAgIHB1YmxpYyBWYWx1ZUNhbGxiYWNrPFVyaVtdPiBtRmlsZVBhdGhDYWxsYmFja3M7CiAgICBAQmluZFZpZXcoUi5pZC50b29sYmFyKQogICAgVG9vbGJhckFjdGlvbmJhciB0b29sQmFyOwogICAgQEJpbmRWaWV3KFIuaWQudG9vbGJhcl9jbG9zZSkKICAgIEltYWdlVmlldyBjbG9zZVR2OwogICAgQEJpbmRWaWV3KFIuaWQudG9vbGJhcl9sZWZ0KQogICAgSW1hZ2VWaWV3IGJhY2tJdjsKICAgIEBCaW5kVmlldyhSLmlkLnN3aXBlX2NvbnRhaW5lcikKICAgIFNjcm9sbFN3aXBlUmVmcmVzaExheW91dCBzd2lwZUxheW91dDsKICAgIEBCaW5kVmlldyhSLmlkLldlYlZpZXdQcm9ncmVzcykKICAgIFByb2dyZXNzQmFyIG1Qcm9ncmVzc0JhcjsKICAgIEBCaW5kVmlldyhSLmlkLndlYnZpZXcpCiAgICBYNVdlYlZpZXcgbUN1cnJlbnRXZWJWaWV3OwogICAgSW50ZW50IGludGVudDsKICAgIEh0bWw1UHJlc2VudGVyIG1QcmVzZW50ZXI7CiAgICBIYW5kbGVyIG1IYW5kbGVyID0gbmV3IEhhbmRsZXIoKSB7CiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIHZvaWQgaGFuZGxlTWVzc2FnZShNZXNzYWdlIG1zZykgewogICAgICAgICAgICBzdXBlci5oYW5kbGVNZXNzYWdlKG1zZyk7CiAgICAgICAgICAgIHN3aXRjaCAobXNnLndoYXQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICB0b29sQmFyLnNldFJpZ2h0SW1nVmlzaWJpbGl0eShmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgdG9vbEJhci5zZXRSaWdodEltZ1Zpc2liaWxpdHkodHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgQEJpbmRWaWV3KFIuaWQudG9vbGJhcl9yaWdodCkKICAgIEltYWdlVmlldyBzZXRpbmdfaWNvbjsKICAgIE15V2ViVmlld0NsaWVudC5PdmVycmlkZVVybExvYWRMaXN0ZW5lciBsb2FkTGlzdGVuZXIgPSBuZXcgTXlXZWJWaWV3Q2xpZW50Lk92ZXJyaWRlVXJsTG9hZExpc3RlbmVyKCkgewoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9pZCBPdmVycmlkZVVybExvYWQoYm9vbGVhbiBmbGFnKSB7CiAgICAgICAgICAgIGlmIChmbGFnKSB7CiAgICAgICAgICAgICAgICBjbG9zZVR2LnNldFZpc2liaWxpdHkoVmlldy5WSVNJQkxFKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNsb3NlVHYuc2V0VmlzaWJpbGl0eShWaWV3LkdPTkUpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9pZCBzZXRUaXRsZShTdHJpbmcgdGl0bGUpIHsKICAgICAgICB9CiAgICB9OwogICAgLyoqCiAgICAgKiBpc1NlbGVjdGVkOsrHt/HT0M28xqx1cmkgc2VsZWN0X2ZsYWc6yse38bXju/fBy7Wvv/K1xNGh1PHNvMassLTFpQogICAgICovCiAgICBib29sZWFuIGlzU2VsZWN0ZWQgPSBmYWxzZSwgc2VsZWN0X2ZsYWcgPSBmYWxzZTsKICAgIFVyaSB1cmk7CiAgICBjb20uZ2RtbS5saWIuZGlhbG9nLk9uRGlzbWlzc0xpc3RlbmVyIGRpc21pc3NMaXN0ZW5lciA9IG5ldyBjb20uZ2RtbS5saWIuZGlhbG9nLk9uRGlzbWlzc0xpc3RlbmVyKCkgewogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyB2b2lkIG9uRGlzbWlzcyhEaWFsb2dQbHVzIGRpYWxvZykgewogICAgICAgICAgICBpc1NlbGVjdGVkID0gZmFsc2U7CiAgICAgICAgICAgIGhhbmRsZVBvcFdpbmRvdygpOwogICAgICAgIH0KICAgIH07CiAgICBCcm9hZGNhc3RSZWNlaXZlciBkb1VpZFJlY2VpdmVyID0gbmV3IEJyb2FkY2FzdFJlY2VpdmVyKCkgewoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9pZCBvblJlY2VpdmUoQ29udGV4dCBjb250ZXh0LCBJbnRlbnQgaW50ZW50KSB7CiAgICAgICAgICAgIFN0cmluZyBhY3Rpb24gPSBpbnRlbnQuZ2V0QWN0aW9uKCk7CiAgICAgICAgICAgIGlmIChhY3Rpb24uZXF1YWxzKENvbnN0YW50cy5BY3Rpb24uTE9HSU5fQUNUSU9OKSAmJiBtQ3VycmVudFdlYlZpZXcgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgbUN1cnJlbnRXZWJWaWV3LnBvc3QobmV3IFJ1bm5hYmxlKCkgewogICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbUN1cnJlbnRXZWJWaWV3LmxvYWRVcmwoImphdmFzY3JpcHQ6Z2V0VWlkKCciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBMb2dpbk1hbmFnZXIuZ2V0VWlkKCkgKyAiJykiKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICB9OwogICAgcHJpdmF0ZSBTdHJpbmcgZmxhZywgcHVzaEZsYWcgPSAiIjsKICAgIHByaXZhdGUgYm9vbGVhbiBiYWNrRmxhZyA9IGZhbHNlOwogICAgLyoqCiAgICAgKiDKx7fxz9TKvrfWz+1wb3B3aW5kb3cKICAgICAqLwogICAgcHJpdmF0ZSBib29sZWFuIGlzTm9TaG93U2hhcmUgPSBmYWxzZTsKICAgIC8vcG9wd2luZG93yse38c/Uyr631s/tCiAgICBwcml2YXRlIGJvb2xlYW4gaXNTaGFyZVZpc2libGUgPSBmYWxzZTsKICAgIC8qKgogICAgICogaHRtbDW31s/ttcTKtcD9CiAgICAgKi8KICAgIHByaXZhdGUgSHRtbDVTaGFyZUl0ZW0gaHRtbDVJdGVtID0gbnVsbDsKICAgIC8vyse38crHt9bH+KOoyse31sf4yrGjrM/Uyr65us7vs7XNvLHqo6kKICAgIHByaXZhdGUgYm9vbGVhbiBpc0FyZWEgPSBmYWxzZTsKICAgIHByaXZhdGUgU3RyaW5nIG9yZGVySWQgPSBudWxsOwogICAgcHJpdmF0ZSBib29sZWFuIGlzUmVmcmVzaCA9IGZhbHNlOwogICAgLyoqCiAgICAgKiC0+sDtx+vH87XEaWQKICAgICAqLwogICAgcHJpdmF0ZSBTdHJpbmcgYWdlbnRSZXFJZCA9IG51bGw7CiAgICAvLyC0+sDtx+vH87XEss7K/aOoanNvbqOpCiAgICBwcml2YXRlIFN0cmluZyBhZ2VudFBhcmFtZXJzOwogICAgLy8gtPrA7cfrx/O1xLzTw9zA4NDNo6hqc29uo6kKICAgIHByaXZhdGUgU3RyaW5nIGFnZW50RW5jb2RldHlwZTsKICAgIC8vILT6wO3H68fztcR1cmy12Na3o6hqc29uo6kKICAgIHByaXZhdGUgU3RyaW5nIGFnZW50UmVxVXJsOwogICAgLy8gtPrA7cfrx/PQ6NKqvNPD3LXEss7K/c671sMgzqq/1bT6se2yu7zTw9wKICAgIHByaXZhdGUgU3RyaW5nIGFnZW50UG9zUGFyYW07CiAgICAvLyC0+sDtx+vH87zTw9y1xLe9yr0gzqq/1bT6se3ErMjPM2Rlc7zTw9wKICAgIHByaXZhdGUgU3RyaW5nIGFnZW50RW5jcnlwdFR5cGU7CiAgICBwcml2YXRlIFN0cmluZyB0eXBlOwogICAgcHJpdmF0ZSBSZXNwb25zZUJhbmtQYXlQYXJhbUl0ZW0gYm9jSXRlbTsKICAgIHByaXZhdGUgYm9vbGVhbiBpc0NyZWF0ZSA9IGZhbHNlOy8vxdC2z8rHt/HKx7Xa0ru0zrS0vagKICAgIHByaXZhdGUgYm9vbGVhbiBpc0hvbWUgPSBmYWxzZTsvL8XQts/Kx7fxvq25/cHLaG9tZbz8CiAgICAvKioKICAgICAqILSryOtodG1sNWpzt9bP7bLZ1/fB98uuusUKICAgICAqLwogICAgcHJpdmF0ZSBTdHJpbmcgYWN0aW9uTnVtYmVyOwogICAgLy+1x8K8uvO1xLvYtfcKICAgIHByaXZhdGUgTG9naW5DYWxsYmFjayBjYWxsYmFjazsKICAgIC8vyse38dPQzrS2wc/7z6IgMcrH09AgMMrHt/EKICAgIHByaXZhdGUgaW50IGlzSGFzTm90UmVhZE1zZyA9IDA7CiAgICAvL860tsHP+8+iyv3BvwogICAgcHJpdmF0ZSBpbnQgbm90UmVhZE1zZ051bSA9IDA7CiAgICAvLyC199PDz7XNs8/gu/og1ri2qMrks/bOxLz+CiAgICBwcml2YXRlIEZpbGUgcGljRmlsZTsKICAgIC8vILX308PPtc2zz+C7+iDWuLaoyuSz9s7EvP61xCBVcmkKICAgIHByaXZhdGUgVXJpIHBpY0ZpbGVVcmk7CiAgICBjb20uZ2RtbS5saWIuZGlhbG9nLk9uQ2xpY2tMaXN0ZW5lciBsaXN0ZW5lciA9IG5ldyBjb20uZ2RtbS5saWIuZGlhbG9nLk9uQ2xpY2tMaXN0ZW5lcigpIHsKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9pZCBvbkNsaWNrKERpYWxvZ1BsdXMgZGlhbG9nLCBWaWV3IHZpZXcpIHsKICAgICAgICAgICAgc3dpdGNoICh2aWV3LmdldElkKCkpIHsKICAgICAgICAgICAgICAgIGNhc2UgUi5pZC5kaWFsb2dfdGFrZV9waWN0dXJlOgogICAgICAgICAgICAgICAgICAgIGRpYWxvZy5kaXNtaXNzKCk7CiAgICAgICAgICAgICAgICAgICAgQWNwLmdldEluc3RhbmNlKG1Db250ZXh0KS5yZXF1ZXN0KG5ldyBBY3BPcHRpb25zLkJ1aWxkZXIoKS5zZXRQZXJtaXNzaW9ucyhNYW5pZmVzdC5wZXJtaXNzaW9uLkNBTUVSQSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hbmlmZXN0LnBlcm1pc3Npb24uVklCUkFURSkuYnVpbGQoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBBY3BMaXN0ZW5lcigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvbkdyYW50ZWQoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdF9mbGFnID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlblN5c3RlbUNhbWVyYSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgb25EZW5pZWQoTGlzdDxTdHJpbmc+IHBlcm1pc3Npb25zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRvYXN0VXRpbC5zaG93U2hvcnRUb2FzdChwZXJtaXNzaW9ucy50b1N0cmluZygpICsgIsioz96+3L74Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIFIuaWQuZGlhbG9nX2dhbGxlcnk6CiAgICAgICAgICAgICAgICAgICAgZGlhbG9nLmRpc21pc3MoKTsKICAgICAgICAgICAgICAgICAgICBzZWxlY3RfZmxhZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgbVByZXNlbnRlci5zZWxlY3RQaWN0dXJlKCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIFIuaWQuc2hvcF90ZWxsX2NhbmNlbF90djoKICAgICAgICAgICAgICAgICAgICBkaWFsb2cuZGlzbWlzcygpOwogICAgICAgICAgICAgICAgICAgIHNlbGVjdF9mbGFnID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgLyoqCiAgICAgKiDOqsHLxdC2z2pztffTw8qxvOS85Lj0o6y85Lj0zKu2zLK7yMOy2df3o6i3wNa5tffTw8G9tM6z9s/WtPK/qsG9tM7Ss8Pmo6kKICAgICAqLwogICAgcHJpdmF0ZSBsb25nIHN0YXJ0VGltZSA9IDA7CiAgICBwcml2YXRlIGxvbmcgc3RvcFRpbWU7CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBvbkNyZWF0ZShCdW5kbGUgc2F2ZWRJbnN0YW5jZVN0YXRlKSB7CiAgICAgICAgc3VwZXIub25DcmVhdGUoc2F2ZWRJbnN0YW5jZVN0YXRlKTsKICAgICAgICAvL7zmyN08dmlkZW8+ytPGtbKlt8UgzfjSs9bQtcTK08a1o6zJz8bBxLu1xMqxuvKjrL/JxNyz9s/WycHLuLXEx+m/9qOs0OjSqsjnz8LJ6NbDCiAgICAgICAgZ2V0V2luZG93KCkuc2V0Rm9ybWF0KFBpeGVsRm9ybWF0LlRSQU5TTFVDRU5UKTsKCiAgICAgICAgaXNDcmVhdGUgPSB0cnVlOwoKICAgICAgICBtUHJlc2VudGVyID0gbmV3IEh0bWw1UHJlc2VudGVyKHRoaXMsIHRoaXMpOwoKICAgICAgICByZWdpc3RlckJyb2FkY2FzdCgpOwogICAgICAgIGluaXRWaWV3KCk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQgdm9pZCBwYXJzZXJJbnRlbnQoKSB7CiAgICAgICAgc3VwZXIucGFyc2VySW50ZW50KCk7CiAgICAgICAgaW50ZW50ID0gZ2V0SW50ZW50KCk7CiAgICAgICAgb3JkZXJJZCA9IGludGVudC5nZXRTdHJpbmdFeHRyYSgib3JkZXJfaWQiKTsKICAgICAgICB0eXBlID0gaW50ZW50LmdldFN0cmluZ0V4dHJhKCJ0eXBlIik7CiAgICAgICAgZmxhZyA9IGludGVudC5nZXRTdHJpbmdFeHRyYSgiZmxhZyIpOwogICAgICAgIHB1c2hGbGFnID0gaW50ZW50LmdldFN0cmluZ0V4dHJhKCJwdXNoRmxhZyIpOwogICAgICAgIEJ1bmRsZSBleHRyYXMgPSBpbnRlbnQuZ2V0RXh0cmFzKCk7CiAgICAgICAgaHRtbDVJdGVtID0gKEh0bWw1U2hhcmVJdGVtKSBpbnRlbnQuZ2V0UGFyY2VsYWJsZUV4dHJhKCJodG1sNUl0ZW0iKTsKICAgICAgICBpZiAoaHRtbDVJdGVtICE9IG51bGwgJiYgaHRtbDVJdGVtLmdldElzUmVmcmVzaCgpID09IDEpIHsKICAgICAgICAgICAgaXNSZWZyZXNoID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgaWYgKGh0bWw1SXRlbSAhPSBudWxsICYmIGh0bWw1SXRlbS5nZXRJc0FyZWEoKSA9PSAxKSB7CiAgICAgICAgICAgIGlzQXJlYSA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICBpc05vU2hvd1NoYXJlID0gaW50ZW50LmdldEJvb2xlYW5FeHRyYSgiaXNOb1Nob3dTaGFyZSIsIGZhbHNlKTsKCiAgICB9CgogICAgcHVibGljIHZvaWQgaW5pdFZpZXcoKSB7CiAgICAgICAgaW5pdFdlYlZpZXcoKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuc2V0T25TY3JvbGxDaGFuZ2VkQ2FsbGJhY2sobmV3IFg1V2ViVmlldy5PblNjcm9sbENoYW5nZWRDYWxsYmFjaygpIHsKICAgICAgICAgICAgcHVibGljIHZvaWQgb25TY3JvbGwoaW50IGwsIGludCB0KSB7CiAgICAgICAgICAgICAgICBpZiAoc3dpcGVMYXlvdXQgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIGlmICh0ID09IDApIHsvL3dlYlZpZXfU2ralsr8KICAgICAgICAgICAgICAgICAgICAgICAgc3dpcGVMYXlvdXQuc2V0RW5hYmxlZCh0cnVlKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugey8vd2ViVmlld7K7yse2pbK/CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXBlTGF5b3V0LnNldEVuYWJsZWQoZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0pOwovLyAgICAgICAgc3dpcGVMYXlvdXQuc2V0Vmlld0dyb3VwKG1DdXJyZW50V2ViVmlldyk7Ly/J6NbDvODM/bn2tq+1xNfTdmlldwogICAgICAgIHN3aXBlTGF5b3V0LnNldE15UmVmcmVzaChpc1JlZnJlc2gpOwogICAgICAgIHN3aXBlTGF5b3V0LnNldE9uUmVmcmVzaExpc3RlbmVyKG5ldyBTd2lwZVJlZnJlc2hMYXlvdXQuT25SZWZyZXNoTGlzdGVuZXIoKSB7CgogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgb25SZWZyZXNoKCkgewogICAgICAgICAgICAgICAgaWYgKGlzUmVmcmVzaCkgewogICAgICAgICAgICAgICAgICAgIC8v1tjQwsui0MLSs8PmCiAgICAgICAgICAgICAgICAgICAgaWYgKG1DdXJyZW50V2ViVmlldyAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldy5sb2FkVXJsKG1DdXJyZW50V2ViVmlldy5nZXRVcmwoKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzd2lwZUxheW91dC5zZXRSZWZyZXNoaW5nKGZhbHNlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICB0b29sQmFyLnNldFVwUmlndGhJY29uKFIuZHJhd2FibGUuc2hvcF9zZXRpbmdfaWNvbiwgbmV3IE9uQ2xpY2tMaXN0ZW5lcigpIHsKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uQ2xpY2soVmlldyB2KSB7CiAgICAgICAgICAgICAgICAvL8/Uyr5wb3B3aW5kb3cKICAgICAgICAgICAgICAgIG1QcmVzZW50ZXIuc2hvd1JpZ2h0UG9wd2luZG93KGZpbmRWaWV3QnlJZChSLmlkLnRvb2xiYXJfcmlnaHQpLCBpc0hhc05vdFJlYWRNc2csIG5vdFJlYWRNc2dOdW0sIGlzU2hhcmVWaXNpYmxlKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBpZiAoIWlzTm9TaG93U2hhcmUgJiYgaHRtbDVJdGVtICE9IG51bGwpIHsKICAgICAgICAgICAgaXNTaGFyZVZpc2libGUgPSB0cnVlOwogICAgICAgIH0KCiAgICAgICAgaWYgKGlzQXJlYSkgewogICAgICAgICAgICB0b29sQmFyLnNldFVwUmlnaHRJY29uMihSLmRyYXdhYmxlLmljX3VzZXJfaW5mb19zaG9wcGluZ19jYXJ0X2JsYWNrLCBuZXcgT25DbGlja0xpc3RlbmVyKCkgewogICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvbkNsaWNrKFZpZXcgdikgewogICAgICAgICAgICAgICAgICAgIE5hdmlnYXRpb25VdGlsLnRvU2hvcHBpbmdDYXJ0KChBY3Rpdml0eSkgbUNvbnRleHQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKLy8gICAgICAgICAgICBtUHJlc2VudGVyLmdldFNob3BwaW5nQ2FydE51bSgpOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFUZXh0VXRpbHMuaXNFbXB0eSh0eXBlKSAmJiB0eXBlLmVxdWFscygiYm9jX3BheSIpKSB7CiAgICAgICAgICAgIGJvY0l0ZW0gPSBpbnRlbnQuZ2V0UGFyY2VsYWJsZUV4dHJhKCJib2NQYXlJdGVtIik7CiAgICAgICAgICAgIFN0cmluZyB1cmwgPSBib2NJdGVtLmdldEJhbmtVcmwoKTsKICAgICAgICAgICAgYm9jVXJsSnVtcCh1cmwpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5hdmlnYXRlVG9VcmwoaW50ZW50LmdldERhdGFTdHJpbmcoKSk7CiAgICAgICAgfQogICAgfQoKICAgIEBPbkNsaWNrKFIuaWQudG9vbGJhcl9jbG9zZSkKICAgIHB1YmxpYyB2b2lkIGNsb3NlQ2xpY2soKSB7CiAgICAgICAgaWYgKCFUZXh0VXRpbHMuaXNFbXB0eSh0eXBlKQogICAgICAgICAgICAgICAgJiYgKHR5cGUuZXF1YWxzKCJjY2JfcGF5IikgfHwgdHlwZS5lcXVhbHMoImFiY19wYXkiKSkpIHsKICAgICAgICAgICAgSW50ZW50IGludGVudCA9IG5ldyBJbnRlbnQoKTsKICAgICAgICAgICAgaW50ZW50LnB1dEV4dHJhKCJvcmRlcl9pZCIsIG9yZGVySWQpOwogICAgICAgICAgICBzZXRSZXN1bHQoUkVTVUxUX09LLCBpbnRlbnQpOwogICAgICAgIH0KICAgICAgICBmaW5pc2goKTsKICAgIH0KCiAgICBAT25DbGljayhSLmlkLnRvb2xiYXJfbGVmdCkKICAgIHB1YmxpYyB2b2lkIGJhY2tDbGljaygpIHsKICAgICAgICBoYW5kbGVyQmFjaygpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGluaXRXZWJWaWV3KCkgewoKICAgICAgICBtUHJvZ3Jlc3NCYXIuc2V0TWF4KDEwMCk7CgogICAgICAgIG1DdXJyZW50V2ViVmlldy5jbGVhckNhY2hlKHRydWUpOwogICAgICAgIG1DdXJyZW50V2ViVmlldy5nZXRTZXR0aW5ncygpLnNldEphdmFTY3JpcHRFbmFibGVkKHRydWUpOwogICAgICAgIGlmIChCdWlsZC5WRVJTSU9OLlNES19JTlQgPj0gMjEpIHsvLzUuMNLUyc+/qsb0aHR0cHPWp7PWCiAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldy5nZXRTZXR0aW5ncygpLnNldE1peGVkQ29udGVudE1vZGUoMCk7CiAgICAgICAgfQogICAgICAgIG1DdXJyZW50V2ViVmlldy5hZGRKYXZhc2NyaXB0SW50ZXJmYWNlKG5ldyBXZWJ2aWV3VXRpbCgpLCAiSlMiKTsKICAgICAgICAvLyBVc2VyQWdlbnS688Pm1Pa80y9CeUFuZHJvaWQKICAgICAgICBTdHJpbmcgdWEgPSBtQ3VycmVudFdlYlZpZXcuZ2V0U2V0dGluZ3MoKS5nZXRVc2VyQWdlbnRTdHJpbmcoKTsKICAgICAgICBTdHJpbmcgYWRkU3RyID0gIiBBcHBWZXJzaW9uLyIgKyBWZXJzaW9uVXRpbHMuZ2V0VmVyc2lvbk5hbWUobUNvbnRleHQpICsgIi9CeUFuZHJvaWQiOwogICAgICAgIG1DdXJyZW50V2ViVmlldy5nZXRTZXR0aW5ncygpLnNldFVzZXJBZ2VudFN0cmluZyh1YSArIGFkZFN0cik7CiAgICAgICAgbUN1cnJlbnRXZWJWaWV3LmdldFNldHRpbmdzKCkuc2V0TG9hZFdpdGhPdmVydmlld01vZGUodHJ1ZSk7CiAgICAgICAgbUN1cnJlbnRXZWJWaWV3LmdldFNldHRpbmdzKCkuc2V0VXNlV2lkZVZpZXdQb3J0KHRydWUpOwogICAgICAgIG1DdXJyZW50V2ViVmlldy5nZXRTZXR0aW5ncygpLnNldEFsbG93RmlsZUFjY2Vzcyh0cnVlKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuZ2V0U2V0dGluZ3MoKS5zZXRMYXlvdXRBbGdvcml0aG0oV2ViU2V0dGluZ3MuTGF5b3V0QWxnb3JpdGhtLk5BUlJPV19DT0xVTU5TKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuZ2V0U2V0dGluZ3MoKS5zZXRTdXBwb3J0Wm9vbSh0cnVlKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuZ2V0U2V0dGluZ3MoKS5zZXRCdWlsdEluWm9vbUNvbnRyb2xzKHRydWUpOwogICAgICAgIG1DdXJyZW50V2ViVmlldy5nZXRTZXR0aW5ncygpLnNldFN1cHBvcnRNdWx0aXBsZVdpbmRvd3MoZmFsc2UpOwogICAgICAgIG1DdXJyZW50V2ViVmlldy5nZXRTZXR0aW5ncygpLnNldEFwcENhY2hlRW5hYmxlZCh0cnVlKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuZ2V0U2V0dGluZ3MoKS5zZXREb21TdG9yYWdlRW5hYmxlZCh0cnVlKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuZ2V0U2V0dGluZ3MoKS5zZXRHZW9sb2NhdGlvbkVuYWJsZWQodHJ1ZSk7CiAgICAgICAgbUN1cnJlbnRXZWJWaWV3LmdldFNldHRpbmdzKCkuc2V0QXBwQ2FjaGVNYXhTaXplKExvbmcuTUFYX1ZBTFVFKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuZ2V0U2V0dGluZ3MoKS5zZXRBcHBDYWNoZVBhdGgodGhpcy5nZXREaXIoImFwcGNhY2hlIiwgMCkuZ2V0UGF0aCgpKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuZ2V0U2V0dGluZ3MoKS5zZXREYXRhYmFzZVBhdGgodGhpcy5nZXREaXIoImRhdGFiYXNlcyIsIDApLmdldFBhdGgoKSk7CiAgICAgICAgbUN1cnJlbnRXZWJWaWV3LmdldFNldHRpbmdzKCkuc2V0R2VvbG9jYXRpb25EYXRhYmFzZVBhdGgodGhpcy5nZXREaXIoImdlb2xvY2F0aW9uIiwgMCkKICAgICAgICAgICAgICAgIC5nZXRQYXRoKCkpOwogICAgICAgIG1DdXJyZW50V2ViVmlldy5nZXRTZXR0aW5ncygpLnNldFBsdWdpblN0YXRlKFdlYlNldHRpbmdzLlBsdWdpblN0YXRlLk9OX0RFTUFORCk7CgogICAgICAgIGluaXRpYWxpemVDdXJyZW50V2ViVmlldygpOwogICAgICAgIG1DdXJyZW50V2ViVmlldy5zZXREb3dubG9hZExpc3RlbmVyKG5ldyBNeVdlYlZpZXdEb3duTG9hZExpc3RlbmVyKCkpOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBuYXZpZ2F0ZVRvVXJsKFN0cmluZyB1cmwpIHsKICAgICAgICBpZiAoIVRleHRVdGlscy5pc0VtcHR5KHVybCkpIHsKICAgICAgICAgICAgbUN1cnJlbnRXZWJWaWV3LmxvYWRVcmwodXJsKTsKICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIGJvY1VybEp1bXAoU3RyaW5nIHVybCkgewogICAgICAgIGlmIChUZXh0VXRpbHMuaXNFbXB0eSh1cmwpKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgTWFwPFN0cmluZywgU3RyaW5nPiBtYXBQYXJhbXMgPSBuZXcgSGFzaE1hcDxTdHJpbmcsIFN0cmluZz4oKTsKICAgICAgICBtYXBQYXJhbXMucHV0KCJtZXJjaGFudE5vIiwgYm9jSXRlbS5nZXRNZXJjaGFudE5vKCkpOwogICAgICAgIG1hcFBhcmFtcy5wdXQoIm9yZGVyTm8iLCBib2NJdGVtLmdldE9yZGVyTm8oKSk7CiAgICAgICAgbWFwUGFyYW1zLnB1dCgicGF5VHlwZSIsIGJvY0l0ZW0uZ2V0UGF5VHlwZSgpKTsKICAgICAgICBtYXBQYXJhbXMucHV0KCJjdXJDb2RlIiwgYm9jSXRlbS5nZXRDdXJDb2RlKCkpOwogICAgICAgIG1hcFBhcmFtcy5wdXQoIm9yZGVyQW1vdW50IiwgU3RyaW5nLnZhbHVlT2YoYm9jSXRlbS5nZXRPcmRlckFtb3VudCgpKSk7CiAgICAgICAgbWFwUGFyYW1zLnB1dCgib3JkZXJUaW1lIiwgYm9jSXRlbS5nZXRPcmRlclRpbWUoKSk7CiAgICAgICAgbWFwUGFyYW1zLnB1dCgib3JkZXJOb3RlIiwgYm9jSXRlbS5nZXRPcmRlck5vdGUoKSk7CiAgICAgICAgbWFwUGFyYW1zLnB1dCgib3JkZXJVcmwiLCBib2NJdGVtLmdldE9yZGVyVXJsKCkpOwogICAgICAgIG1hcFBhcmFtcy5wdXQoIm9yZGVyVGltZW91dERhdGUiLCBib2NJdGVtLmdldE9yZGVyVGltZW91dERhdGUoKSk7CiAgICAgICAgbWFwUGFyYW1zLnB1dCgic2lnbkRhdGEiLCBib2NJdGVtLmdldFNpZ25EYXRhKCkpOwoKICAgICAgICBDb2xsZWN0aW9uPE1hcC5FbnRyeTxTdHJpbmcsIFN0cmluZz4+IHBvc3REYXRhID0gbWFwUGFyYW1zLmVudHJ5U2V0KCk7CiAgICAgICAgY3JlYXRlQm9jRm9ydW0obUN1cnJlbnRXZWJWaWV3LCB1cmwsIHBvc3REYXRhKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgY3JlYXRlQm9jRm9ydW0oV2ViVmlldyB3ZWJWaWV3LCBTdHJpbmcgdXJsLCBDb2xsZWN0aW9uPE1hcC5FbnRyeTxTdHJpbmcsIFN0cmluZz4+IHBvc3REYXRhKSB7CiAgICAgICAgU3RyaW5nQnVpbGRlciBzYiA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7CiAgICAgICAgc2IuYXBwZW5kKCI8aHRtbD48aGVhZD48L2hlYWQ+Iik7CiAgICAgICAgc2IuYXBwZW5kKCI8Ym9keSBvbmxvYWQ9J2Zvcm0xLnN1Ym1pdCgpJz4iKTsKICAgICAgICBzYi5hcHBlbmQoU3RyaW5nLmZvcm1hdCgiPGZvcm0gaWQ9J2Zvcm0xJyBhY3Rpb249JyVzJyBtZXRob2Q9JyVzJz4iLCB1cmwsICJwb3N0IikpOwogICAgICAgIGZvciAoTWFwLkVudHJ5PFN0cmluZywgU3RyaW5nPiBpdGVtIDogcG9zdERhdGEpIHsKICAgICAgICAgICAgc2IuYXBwZW5kKFN0cmluZy5mb3JtYXQoIjxpbnB1dCBuYW1lPSclcycgdHlwZT0naGlkZGVuJyB2YWx1ZT0nJXMnIC8+IiwgaXRlbS5nZXRLZXkoKSwgaXRlbS5nZXRWYWx1ZSgpKSk7CiAgICAgICAgfQogICAgICAgIHNiLmFwcGVuZCgiPC9mb3JtPjwvYm9keT48L2h0bWw+Iik7CiAgICAgICAgd2ViVmlldy5sb2FkRGF0YShzYi50b1N0cmluZygpLCAidGV4dC9odG1sIiwgIlVURi04Iik7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIGhhbmRsZXJCYWNrKCkgewogICAgICAgIGlmIChtQ3VycmVudFdlYlZpZXcuY2FuR29CYWNrKCkpIHsKICAgICAgICAgICAgbUN1cnJlbnRXZWJWaWV3LmdvQmFjaygpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmICghVGV4dFV0aWxzLmlzRW1wdHkodHlwZSkKICAgICAgICAgICAgICAgICAgICAmJiAodHlwZS5lcXVhbHMoImNjYl9wYXkiKSB8fCB0eXBlLmVxdWFscygiYWJjX3BheSIpIHx8IHR5cGUuZXF1YWxzKCJib2NfcGF5IikpKSB7CiAgICAgICAgICAgICAgICBJbnRlbnQgaW50ZW50ID0gbmV3IEludGVudCgpOwogICAgICAgICAgICAgICAgaW50ZW50LnB1dEV4dHJhKCJvcmRlcl9pZCIsIG9yZGVySWQpOwogICAgICAgICAgICAgICAgc2V0UmVzdWx0KFJFU1VMVF9PSywgaW50ZW50KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmaW5pc2goKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiC78cihzcbLzbHqyrajrMrHt/HKx9e0zKzAuLTyv6rSs8PmCiAgICAgKi8KICAgIHByaXZhdGUgYm9vbGVhbiBpc1B1c2hNc2dPcGVuUGFnZSgpIHsKICAgICAgICBpZiAoVGV4dFV0aWxzLmlzRW1wdHkocHVzaEZsYWcpKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQgdm9pZCBvbkRlc3Ryb3koKSB7CiAgICAgICAgbVByZXNlbnRlci51blN1YnNjcmliZSgpOwogICAgICAgIG1DdXJyZW50V2ViVmlldy5jbGVhckNhY2hlKHRydWUpOwogICAgICAgIHVucmVnaXN0ZXJSZWNlaXZlcihkb1VpZFJlY2VpdmVyKTsKCiAgICAgICAgLy8gveK+9snBzcujumphdmEubGFuZy5JbGxlZ2FsQXJndW1lbnRFeGNlcHRpb246UmVjZWl2ZXIgbm90IHJlZ2lzdGVyZWQ6CiAgICAgICAgLy8gYW5kcm9pZC53aWRnZXQuWm9vbUJ1dHRvbnNDb250cm9sbGVyJDFANjkzZTJiZQogICAgICAgIG1DdXJyZW50V2ViVmlldy5nZXRTZXR0aW5ncygpLnNldEJ1aWx0SW5ab29tQ29udHJvbHModHJ1ZSk7CiAgICAgICAgbUN1cnJlbnRXZWJWaWV3LnNldFZpc2liaWxpdHkoVmlldy5HT05FKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcucmVtb3ZlQWxsVmlld3MoKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuZGVzdHJveSgpOwogICAgICAgIHN1cGVyLm9uRGVzdHJveSgpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIHZvaWQgc2V0Q29udGVudFZpZXcoKSB7CiAgICAgICAgc2V0Q29udGVudFZpZXcoUi5sYXlvdXQuYWN0aXZpdHlfaHRtbDUpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIHZvaWQgb25OZXdJbnRlbnQoSW50ZW50IGludGVudCkgewogICAgICAgIGlmIChpbnRlbnQuZ2V0RGF0YSgpICE9IG51bGwpIHsKICAgICAgICAgICAgbmF2aWdhdGVUb1VybChpbnRlbnQuZ2V0RGF0YVN0cmluZygpKTsKICAgICAgICB9CiAgICAgICAgc3VwZXIub25OZXdJbnRlbnQoaW50ZW50KTsKICAgIH0KCiAgICAvKioKICAgICAqIMe/1sa52LHVyO28/MXMCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBjaGFnZUlucHV0U3RhdGUoQ29udGV4dCBjb250ZXh0KSB7CiAgICAgICAgSW5wdXRNZXRob2RNYW5hZ2VyIGltbSA9IChJbnB1dE1ldGhvZE1hbmFnZXIpIGNvbnRleHQKICAgICAgICAgICAgICAgIC5nZXRTeXN0ZW1TZXJ2aWNlKENvbnRleHQuSU5QVVRfTUVUSE9EX1NFUlZJQ0UpOwogICAgICAgIGltbS50b2dnbGVTb2Z0SW5wdXQoMCwgSW5wdXRNZXRob2RNYW5hZ2VyLkhJREVfTk9UX0FMV0FZUyk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIGluaXRpYWxpemVDdXJyZW50V2ViVmlldygpIHsKCiAgICAgICAgTXlXZWJWaWV3Q2xpZW50IHdlYlZpZXdDbGllbnQgPSBuZXcgTXlXZWJWaWV3Q2xpZW50KG1Db250ZXh0LAogICAgICAgICAgICAgICAgbG9hZExpc3RlbmVyKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuc2V0V2ViVmlld0NsaWVudCh3ZWJWaWV3Q2xpZW50KTsKCiAgICAgICAgbUN1cnJlbnRXZWJWaWV3LnNldFdlYkNocm9tZUNsaWVudChuZXcgY29tLnRlbmNlbnQuc210dC5zZGsuV2ViQ2hyb21lQ2xpZW50KCkgewogICAgICAgICAgICBWaWV3IG15VmlkZW9WaWV3OwogICAgICAgICAgICBWaWV3IG15Tm9ybWFsVmlldzsKICAgICAgICAgICAgSVg1V2ViQ2hyb21lQ2xpZW50LkN1c3RvbVZpZXdDYWxsYmFjayBjYWxsYmFjazsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiDJz7SrzbzGrAogICAgICAgICAgICAgKgogICAgICAgICAgICAgKiBAcGFyYW0gZmlsZVBhdGhDYWxsYmFjawogICAgICAgICAgICAgKi8KICAgICAgICAgICAgLy8gMy4wLS2w5rG+CiAgICAgICAgICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bnVzZWQiKQogICAgICAgICAgICBwdWJsaWMgdm9pZCBvcGVuRmlsZUNob29zZXIoVmFsdWVDYWxsYmFjazxVcmk+IGZpbGVQYXRoQ2FsbGJhY2spIHsKICAgICAgICAgICAgICAgIG1GaWxlUGF0aENhbGxiYWNrID0gZmlsZVBhdGhDYWxsYmFjazsKICAgICAgICAgICAgICAgIGNoYWdlSW5wdXRTdGF0ZShIdG1sNUFjdGl2aXR5LnRoaXMpOwogICAgICAgICAgICAgICAgc2hvd1NlbGVjdFBob25lKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIMCp1bnkr8DAxvfJz7SrzsS8/gogICAgICAgICAgICAvLyAzLjArK7Dmsb4KICAgICAgICAgICAgQFN1cHByZXNzV2FybmluZ3MoInVudXNlZCIpCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9wZW5GaWxlQ2hvb3NlcigKICAgICAgICAgICAgICAgICAgICBAU3VwcHJlc3NXYXJuaW5ncygicmF3dHlwZXMiKSBWYWx1ZUNhbGxiYWNrIGZpbGVQYXRoQ2FsbGJhY2ssCiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGFjY2VwdFR5cGUpIHsKICAgICAgICAgICAgICAgIG1GaWxlUGF0aENhbGxiYWNrID0gZmlsZVBhdGhDYWxsYmFjazsKICAgICAgICAgICAgICAgIGNoYWdlSW5wdXRTdGF0ZShIdG1sNUFjdGl2aXR5LnRoaXMpOwogICAgICAgICAgICAgICAgc2hvd1NlbGVjdFBob25lKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bnVzZWQiKQogICAgICAgICAgICBwdWJsaWMgdm9pZCBvcGVuRmlsZUNob29zZXIoVmFsdWVDYWxsYmFjazxVcmk+IGZpbGVQYXRoQ2FsbGJhY2ssCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgYWNjZXB0VHlwZSwgU3RyaW5nIGNhcHR1cmUpIHsKICAgICAgICAgICAgICAgIG1GaWxlUGF0aENhbGxiYWNrID0gZmlsZVBhdGhDYWxsYmFjazsKICAgICAgICAgICAgICAgIGNoYWdlSW5wdXRTdGF0ZShIdG1sNUFjdGl2aXR5LnRoaXMpOwogICAgICAgICAgICAgICAgc2hvd1NlbGVjdFBob25lKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vICs1LjAKICAgICAgICAgICAgcHVibGljIGJvb2xlYW4gb25TaG93RmlsZUNob29zZXIoV2ViVmlldyB3ZWJWaWV3LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWYWx1ZUNhbGxiYWNrPFVyaVtdPiBmaWxlUGF0aENhbGxiYWNrLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGaWxlQ2hvb3NlclBhcmFtcyBmaWxlQ2hvb3NlclBhcmFtcykgewogICAgICAgICAgICAgICAgbUZpbGVQYXRoQ2FsbGJhY2tzID0gZmlsZVBhdGhDYWxsYmFjazsKICAgICAgICAgICAgICAgIGNoYWdlSW5wdXRTdGF0ZShIdG1sNUFjdGl2aXR5LnRoaXMpOwogICAgICAgICAgICAgICAgc2hvd1NlbGVjdFBob25lKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uUHJvZ3Jlc3NDaGFuZ2VkKFdlYlZpZXcgdmlldywgaW50IG5ld1Byb2dyZXNzKSB7CiAgICAgICAgICAgICAgICBpbnQgcHJvZ3Jlc3MgPSBtQ3VycmVudFdlYlZpZXcuZ2V0UHJvZ3Jlc3MoKTsKICAgICAgICAgICAgICAgIG1Qcm9ncmVzc0Jhci5zZXRQcm9ncmVzcyhwcm9ncmVzcyk7CiAgICAgICAgICAgICAgICAvL9L+sti9+LbIzPUKICAgICAgICAgICAgICAgIG1Qcm9ncmVzc0Jhci5zZXRWaXNpYmlsaXR5KHByb2dyZXNzID49IDk1ID8gVmlldy5HT05FIDogVmlldy5WSVNJQkxFKTsKICAgICAgICAgICAgICAgIGlmIChuZXdQcm9ncmVzcyA+PSAxMCkgewogICAgICAgICAgICAgICAgICAgIHN3aXBlTGF5b3V0LnNldFJlZnJlc2hpbmcoZmFsc2UpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXN3aXBlTGF5b3V0LmlzUmVmcmVzaGluZygpKQogICAgICAgICAgICAgICAgICAgICAgICBzd2lwZUxheW91dC5zZXRSZWZyZXNoaW5nKHRydWUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgb25SZWNlaXZlZEljb24oV2ViVmlldyB2aWV3LCBCaXRtYXAgaWNvbikgewogICAgICAgICAgICAgICAgc3VwZXIub25SZWNlaXZlZEljb24odmlldywgaWNvbik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMgYm9vbGVhbiBvbkNyZWF0ZVdpbmRvdyhXZWJWaWV3IHZpZXcsIGZpbmFsIGJvb2xlYW4gZGlhbG9nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbCBib29sZWFuIHVzZXJHZXN0dXJlLCBmaW5hbCBNZXNzYWdlIHJlc3VsdE1zZykgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgb25SZWNlaXZlZFRpdGxlKFdlYlZpZXcgdmlldywgU3RyaW5nIHRpdGxlKSB7CiAgICAgICAgICAgICAgICBzdXBlci5vblJlY2VpdmVkVGl0bGUodmlldywgdGl0bGUpOwogICAgICAgICAgICAgICAgdG9vbEJhci5zZXRUaXRsZSh0aXRsZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMgYm9vbGVhbiBvbkpzQWxlcnQoV2ViVmlldyB2aWV3LCBTdHJpbmcgdXJsLCBTdHJpbmcgbWVzc2FnZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsIEpzUmVzdWx0IHJlc3VsdCkgewogICAgICAgICAgICAgICAgbmV3IEFsZXJ0RGlhbG9nLkJ1aWxkZXIoSHRtbDVBY3Rpdml0eS50aGlzKQogICAgICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUobUNvbnRleHQuZ2V0U3RyaW5nKFIuc3RyaW5nLnByb21wdCkpCiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRNZXNzYWdlKG1lc3NhZ2UpCiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQb3NpdGl2ZUJ1dHRvbihhbmRyb2lkLlIuc3RyaW5nLm9rLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBBbGVydERpYWxvZy5PbkNsaWNrTGlzdGVuZXIoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uQ2xpY2soRGlhbG9nSW50ZXJmYWNlIGRpYWxvZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgd2hpY2gpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5jb25maXJtKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5zZXRDYW5jZWxhYmxlKGZhbHNlKS5jcmVhdGUoKS5zaG93KCk7CgogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMgYm9vbGVhbiBvbkpzQ29uZmlybShXZWJWaWV3IHZpZXcsIFN0cmluZyB1cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBtZXNzYWdlLCBmaW5hbCBKc1Jlc3VsdCByZXN1bHQpIHsKICAgICAgICAgICAgICAgIG5ldyBBbGVydERpYWxvZy5CdWlsZGVyKEh0bWw1QWN0aXZpdHkudGhpcykKICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKG1Db250ZXh0LmdldFN0cmluZyhSLnN0cmluZy5wcm9tcHQpKQogICAgICAgICAgICAgICAgICAgICAgICAuc2V0TWVzc2FnZShtZXNzYWdlKQogICAgICAgICAgICAgICAgICAgICAgICAuc2V0UG9zaXRpdmVCdXR0b24oYW5kcm9pZC5SLnN0cmluZy5vaywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgRGlhbG9nSW50ZXJmYWNlLk9uQ2xpY2tMaXN0ZW5lcigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgb25DbGljayhEaWFsb2dJbnRlcmZhY2UgZGlhbG9nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCB3aGljaCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmNvbmZpcm0oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXROZWdhdGl2ZUJ1dHRvbihhbmRyb2lkLlIuc3RyaW5nLmNhbmNlbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgRGlhbG9nSW50ZXJmYWNlLk9uQ2xpY2tMaXN0ZW5lcigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgb25DbGljayhEaWFsb2dJbnRlcmZhY2UgZGlhbG9nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCB3aGljaCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmNhbmNlbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuY3JlYXRlKCkuc2hvdygpOwoKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIGJvb2xlYW4gb25Kc1Byb21wdChXZWJWaWV3IHZpZXcsIFN0cmluZyB1cmwsIFN0cmluZyBtZXNzYWdlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBkZWZhdWx0VmFsdWUsIGZpbmFsIEpzUHJvbXB0UmVzdWx0IHJlc3VsdCkgewoKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogyKvGwbKlt8XF5NbDCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgb25TaG93Q3VzdG9tVmlldyhWaWV3IHZpZXcsIElYNVdlYkNocm9tZUNsaWVudC5DdXN0b21WaWV3Q2FsbGJhY2sgY2FsbGJhY2spIHsKICAgICAgICAgICAgICAgIHN1cGVyLm9uU2hvd0N1c3RvbVZpZXcodmlldywgY2FsbGJhY2spOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHNob3dTZWxlY3RQaG9uZSgpIHsKICAgICAgICBtUHJlc2VudGVyLnNob3dTZWxlY3RQaG90byhsaXN0ZW5lciwgZGlzbWlzc0xpc3RlbmVyKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgb3BlblN5c3RlbUNhbWVyYSgpIHsKICAgICAgICBJbnRlbnQgdGFrZVBpY3R1cmVJbnRlbnQgPSBuZXcgSW50ZW50KE1lZGlhU3RvcmUuQUNUSU9OX0lNQUdFX0NBUFRVUkUpOwogICAgICAgIGlmICh0YWtlUGljdHVyZUludGVudC5yZXNvbHZlQWN0aXZpdHkobUNvbnRleHQuZ2V0UGFja2FnZU1hbmFnZXIoKSkgIT0gbnVsbCkgewogICAgICAgICAgICBwaWNGaWxlID0gbnVsbDsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHBpY0ZpbGUgPSBtUHJlc2VudGVyLmNyZWF0ZUltYWdlRmlsZSgpOwogICAgICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBleCkgewogICAgICAgICAgICAgICAgZXgucHJpbnRTdGFja1RyYWNlKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChwaWNGaWxlICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHBpY0ZpbGVVcmkgPSBGaWxlUHJvdmlkZXIuZ2V0VXJpRm9yRmlsZShtQ29udGV4dCwgQ29uc3RhbnRzLkFVVEhPUklUSUVTLCBwaWNGaWxlKTsKICAgICAgICAgICAgICAgIHRha2VQaWN0dXJlSW50ZW50LnB1dEV4dHJhKE1lZGlhU3RvcmUuRVhUUkFfT1VUUFVULCBwaWNGaWxlVXJpKTsKICAgICAgICAgICAgICAgIHN0YXJ0QWN0aXZpdHlGb3JSZXN1bHQodGFrZVBpY3R1cmVJbnRlbnQsIENvbnN0YW50cy5SRVFVRVNUX1RBS0VfUEhPVE8pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIHByaXZhdGUgdm9pZCBoYW5kbGVQb3BXaW5kb3coKSB7CgogICAgICAgIGlmIChpc1NlbGVjdGVkKSB7CiAgICAgICAgICAgIGlmIChtRmlsZVBhdGhDYWxsYmFjayAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBtRmlsZVBhdGhDYWxsYmFjay5vblJlY2VpdmVWYWx1ZSh1cmkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChtRmlsZVBhdGhDYWxsYmFja3MgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgbUZpbGVQYXRoQ2FsbGJhY2tzLm9uUmVjZWl2ZVZhbHVlKG5ldyBVcmlbXXt1cml9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpc1NlbGVjdGVkID0gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKHNlbGVjdF9mbGFnKSB7CiAgICAgICAgICAgICAgICBzZWxlY3RfZmxhZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChtRmlsZVBhdGhDYWxsYmFjayAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBtRmlsZVBhdGhDYWxsYmFjay5vblJlY2VpdmVWYWx1ZShudWxsKTsKICAgICAgICAgICAgICAgIG1GaWxlUGF0aENhbGxiYWNrID0gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobUZpbGVQYXRoQ2FsbGJhY2tzICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIG1GaWxlUGF0aENhbGxiYWNrcy5vblJlY2VpdmVWYWx1ZShudWxsKTsKICAgICAgICAgICAgICAgIG1GaWxlUGF0aENhbGxiYWNrcyA9IG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQgdm9pZCBvbkFjdGl2aXR5UmVzdWx0KGludCByZXF1ZXN0Q29kZSwgaW50IHJlc3VsdENvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEludGVudCBpbnRlbnQpIHsKICAgICAgICBpZiAocmVxdWVzdENvZGUgPT0gTE9HSU5fUkVTVUxUQ09ERSkgewogICAgICAgICAgICBpZiAocmVzdWx0Q29kZSA9PSBBY3Rpdml0eS5SRVNVTFRfT0sgJiYgY2FsbGJhY2sgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgY2FsbGJhY2sub25Mb2dpbigpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGNhbGxiYWNrICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrLm9uQ2FuY2VsKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAocmVzdWx0Q29kZSA9PSBBY3Rpdml0eS5SRVNVTFRfT0spIHsKICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0Q29kZSA9PSBDb25zdGFudHMuUkVRVUVTVF9UQUtFX1BIT1RPKSB7CiAgICAgICAgICAgICAgICAgICAgdXJpID0gcGljRmlsZVVyaTsKICAgICAgICAgICAgICAgICAgICBpc1NlbGVjdGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVxdWVzdENvZGUgPT0gU0VMRUNUX1BIT1RPKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gu/HIoc+1zbPP4LLhzbzGrLXEdXJpCiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gaW50ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVyaSA9IGludGVudC5nZXREYXRhKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlzU2VsZWN0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHRDb2RlID09IFJFU1VMVF9DQU5DRUxFRCkgewogICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gbUZpbGVQYXRoQ2FsbGJhY2spIHsKICAgICAgICAgICAgICAgICAgICBtRmlsZVBhdGhDYWxsYmFjay5vblJlY2VpdmVWYWx1ZShudWxsKTsKICAgICAgICAgICAgICAgICAgICBtRmlsZVBhdGhDYWxsYmFjayA9IG51bGw7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gbUZpbGVQYXRoQ2FsbGJhY2tzKSB7CiAgICAgICAgICAgICAgICAgICAgbUZpbGVQYXRoQ2FsbGJhY2tzLm9uUmVjZWl2ZVZhbHVlKG51bGwpOwogICAgICAgICAgICAgICAgICAgIG1GaWxlUGF0aENhbGxiYWNrcyA9IG51bGw7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9CiAgICAgICAgICAgIGhhbmRsZVBvcFdpbmRvdygpOwogICAgICAgIH0KCiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgYm9vbGVhbiBvbktleUxvbmdQcmVzcyhpbnQga2V5Q29kZSwgS2V5RXZlbnQgZXZlbnQpIHsKCiAgICAgICAgc3dpdGNoIChrZXlDb2RlKSB7CiAgICAgICAgICAgIGNhc2UgS2V5RXZlbnQuS0VZQ09ERV9CQUNLOgogICAgICAgICAgICAgICAgdGhpcy5tb3ZlVGFza1RvQmFjayh0cnVlKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLm9uS2V5TG9uZ1ByZXNzKGtleUNvZGUsIGV2ZW50KTsKICAgICAgICB9CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgYm9vbGVhbiBvbktleVVwKGludCBrZXlDb2RlLCBLZXlFdmVudCBldmVudCkgewoKICAgICAgICBzd2l0Y2ggKGtleUNvZGUpIHsKICAgICAgICAgICAgY2FzZSBLZXlFdmVudC5LRVlDT0RFX0JBQ0s6CiAgICAgICAgICAgICAgICBoYW5kbGVyQmFjaygpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLm9uS2V5VXAoa2V5Q29kZSwgZXZlbnQpOwogICAgICAgIH0KICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCB2b2lkIG9uUGF1c2UoKSB7CiAgICAgICAgaWYgKG1DdXJyZW50V2ViVmlldyAhPSBudWxsKSB7CiAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldy5wb3N0KG5ldyBSdW5uYWJsZSgpIHsKICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgewogICAgICAgICAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmxvYWRVcmwoImphdmFzY3JpcHQ6ZGlkQXBwZWFyKCcwJykiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHN1cGVyLm9uUGF1c2UoKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCB2b2lkIG9uUmVzdW1lKCkgewogICAgICAgIGlmIChpc0NyZWF0ZSAmJiBtQ3VycmVudFdlYlZpZXcgIT0gbnVsbCkgewogICAgICAgICAgICBtQ3VycmVudFdlYlZpZXcucG9zdChuZXcgUnVubmFibGUoKSB7CiAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsKICAgICAgICAgICAgICAgICAgICBtQ3VycmVudFdlYlZpZXcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5sb2FkVXJsKCJqYXZhc2NyaXB0OmRpZEFwcGVhcignMScpIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBzdXBlci5vblJlc3VtZSgpOwogICAgICAgIG1QcmVzZW50ZXIuZ2V0SGFzTWVzc2FnZSgpOwogICAgICAgIGlmIChpc0FyZWEpIHsKICAgICAgICAgICAgbVByZXNlbnRlci5nZXRTaG9wcGluZ0NhcnROdW0oKTsKICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHJlZ2lzdGVyQnJvYWRjYXN0KCkgewogICAgICAgIEludGVudEZpbHRlciBpbnRlbnRGaWx0ZXIgPSBuZXcgSW50ZW50RmlsdGVyKCk7CiAgICAgICAgaW50ZW50RmlsdGVyLmFkZEFjdGlvbihDb25zdGFudHMuQWN0aW9uLkxPR0lOX0FDVElPTik7CiAgICAgICAgcmVnaXN0ZXJSZWNlaXZlcihkb1VpZFJlY2VpdmVyLCBpbnRlbnRGaWx0ZXIpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgc2hhcmVXeEZyaWVuZCgpIHsKICAgICAgICBpZiAoaHRtbDVJdGVtID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBTdHJpbmcgdXJsID0gaHRtbDVJdGVtLmdldFNoYXJlVXJsKCk7CiAgICAgICAgaWYgKHVybC5jb250YWlucygiPyIpKSB7CiAgICAgICAgICAgIHVybCA9IHVybC5jb25jYXQoIiYiKS5jb25jYXQoQ29uc3RhbnRzLkFQUF9TQ0hFTUUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHVybCA9IHVybC5jb25jYXQoIj8iKS5jb25jYXQoQ29uc3RhbnRzLkFQUF9TQ0hFTUUpOwogICAgICAgIH0KICAgICAgICBTaGFyZVV0aWwuZ2V0SW5zdGFuY2UoKS5zaGFyZVRvV2VDaGF0U2Vzc2lvbih1cmwsIGh0bWw1SXRlbS5nZXRUaXRsZSgpLCBodG1sNUl0ZW0uZ2V0Q29udGVudCgpLCBodG1sNUl0ZW0uZ2V0SW1nVXJsKCkpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgc2hhcmVXeEZyaWVuZENpcmNsZSgpIHsKICAgICAgICBpZiAoaHRtbDVJdGVtID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBTdHJpbmcgdXJsID0gaHRtbDVJdGVtLmdldFNoYXJlVXJsKCk7CiAgICAgICAgaWYgKHVybC5jb250YWlucygiPyIpKSB7CiAgICAgICAgICAgIHVybCA9IHVybC5jb25jYXQoIiYiKS5jb25jYXQoQ29uc3RhbnRzLkFQUF9TQ0hFTUUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHVybCA9IHVybC5jb25jYXQoIj8iKS5jb25jYXQoQ29uc3RhbnRzLkFQUF9TQ0hFTUUpOwogICAgICAgIH0KICAgICAgICBTaGFyZVV0aWwuZ2V0SW5zdGFuY2UoKS5zaGFyZVRvV2VDaGF0VGltZWxpbmUodXJsLCBodG1sNUl0ZW0uZ2V0VGl0bGUoKSwgaHRtbDVJdGVtLmdldENvbnRlbnQoKSwgaHRtbDVJdGVtLmdldEltZ1VybCgpKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIGhpZGVMb2FkaW5nKCkgewogICAgICAgIHN1cGVyLmhpZGVMb2FkaW5nKCk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBhZ2VudFJlcXVlc3RTdWNjZXNzKFN0cmluZyBqc29uU3RyKSB7CiAgICAgICAgaWYgKG1DdXJyZW50V2ViVmlldyAhPSBudWxsKSB7CiAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldwogICAgICAgICAgICAgICAgICAgIC5sb2FkVXJsKCJqYXZhc2NyaXB0OmFnZW50cmVzcG9uc2Vmcm9tYXBwKCciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGFnZW50UmVxSWQgKyAiJywnIiArIGpzb25TdHIgKyAiJykiKTsKICAgICAgICB9CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBhZ2VudFJlcXVlc3RGYWlsKCkgewogICAgICAgIGlmIChtQ3VycmVudFdlYlZpZXcgIT0gbnVsbCkgewogICAgICAgICAgICBtQ3VycmVudFdlYlZpZXcubG9hZFVybCgiamF2YXNjcmlwdDphZ2VudHJlc3BvbnNlZnJvbWFwcCgnIgogICAgICAgICAgICAgICAgICAgICsgYWdlbnRSZXFJZCArICInLCdyZXF1ZXN0ZmFpbCcpIik7CiAgICAgICAgfQogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgc2hvd1Nob3BwaW5nQ2FydE51bShpbnQgbnVtKSB7CiAgICAgICAgdG9vbEJhci5zZXRDYXJ0TnVtKG51bSk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBpc1Nob3dNZXNzYWdlUG9pbnQoaW50IGlzSGFzTXNnLCBpbnQgX25vdFJlYWRNc2dOdW0pIHsKICAgICAgICBpc0hhc05vdFJlYWRNc2cgPSBpc0hhc01zZzsKICAgICAgICBub3RSZWFkTXNnTnVtID0gX25vdFJlYWRNc2dOdW07CiAgICAgICAgdG9vbEJhci5zaG93TWVzc2FnZVBvaW50KGlzSGFzTXNnLCBfbm90UmVhZE1zZ051bSk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBzaGFyZVN1Y2Nlc3MoKSB7CiAgICAgICAgaWYgKG1DdXJyZW50V2ViVmlldyAhPSBudWxsKSB7CiAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldy5wb3N0KG5ldyBSdW5uYWJsZSgpIHsKICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgewogICAgICAgICAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmxvYWRVcmwoImphdmFzY3JpcHQ6c2hhcmVBY3Rpb25SZXNwb25zZUZyb21BcHAoJyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBhY3Rpb25OdW1iZXIgKyAiJywnc3VjY2VzcycpIik7CiAgICAgICAgICAgICAgICAgICAgV1hFbnRyeUFjdGl2aXR5LmlzSHRtbDVKc1NoYXJlID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIHNoYXJlRmFpbHVyZSgpIHsKICAgICAgICBpZiAobUN1cnJlbnRXZWJWaWV3ICE9IG51bGwpIHsKICAgICAgICAgICAgbUN1cnJlbnRXZWJWaWV3LnBvc3QobmV3IFJ1bm5hYmxlKCkgewogICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7CiAgICAgICAgICAgICAgICAgICAgbUN1cnJlbnRXZWJWaWV3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubG9hZFVybCgiamF2YXNjcmlwdDpzaGFyZUFjdGlvblJlc3BvbnNlRnJvbUFwcCgnIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGFjdGlvbk51bWJlciArICInLCdmYWlsdXJlJykiKTsKICAgICAgICAgICAgICAgICAgICBXWEVudHJ5QWN0aXZpdHkuaXNIdG1sNUpzU2hhcmUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgc2hhcmVDYW5jZWwoKSB7CiAgICAgICAgaWYgKG1DdXJyZW50V2ViVmlldyAhPSBudWxsKSB7CiAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldy5wb3N0KG5ldyBSdW5uYWJsZSgpIHsKICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgewogICAgICAgICAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmxvYWRVcmwoImphdmFzY3JpcHQ6c2hhcmVBY3Rpb25SZXNwb25zZUZyb21BcHAoJyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBhY3Rpb25OdW1iZXIgKyAiJywnY2FuY2VsZWQnKSIpOwogICAgICAgICAgICAgICAgICAgIFdYRW50cnlBY3Rpdml0eS5pc0h0bWw1SnNTaGFyZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIFN0cmluZyBnZXRQYXJhbXMoU3RyaW5nIHBhcmFtZXJzLCBTdHJpbmcgZW5jb2RldHlwZSkgewogICAgICAgIGlmIChUZXh0VXRpbHMuaXNFbXB0eShwYXJhbWVycykpIHsKICAgICAgICAgICAgcmV0dXJuICIiOwogICAgICAgIH0KICAgICAgICBwYXJhbWVycyA9IHBhcmFtZXJzLnJlcGxhY2UoIisiLCAiJTJCIik7Ly+w0bLOyv3X1rf7tK7W0LXEobArobHXqrPJJTJCLLfA1rlVUkxEZWNvZGVyu/JCYXNlNjSw0SIrIteqs8m/1bjxCiAgICAgICAgcGFyYW1lcnMgPSBwYXJhbWVycy5yZXBsYWNlKCIgIiwgIiUyMCIpOwogICAgICAgIFN0cmluZyBfcGFyYW1lcnMgPSAiIjsKICAgICAgICBpZiAoInVybGVuY29kZSIuZXF1YWxzKGVuY29kZXR5cGUpKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBfcGFyYW1lcnMgPSBVUkxEZWNvZGVyLmRlY29kZShwYXJhbWVycywgInV0Zi04Iik7CiAgICAgICAgICAgIH0gY2F0Y2ggKFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGJ5dGVbXSBkZWNvZGVCeXRlID0gQmFzZTY0LmRlY29kZShwYXJhbWVycy5nZXRCeXRlcygpLAogICAgICAgICAgICAgICAgICAgIEJhc2U2NC5ERUZBVUxUKTsKICAgICAgICAgICAgX3BhcmFtZXJzID0gbmV3IFN0cmluZyhkZWNvZGVCeXRlKTsKICAgICAgICB9CiAgICAgICAgX3BhcmFtZXJzID0gX3BhcmFtZXJzLnJlcGxhY2UoIisiLCAiJTJCIik7Ly+w0bLOyv3X1rf7tK7W0LXEobArobHXqrPJJTJCLLfA1rlVUkxEZWNvZGVyu/JCYXNlNjSw0SIrIteqs8m/1bjxCiAgICAgICAgX3BhcmFtZXJzID0gX3BhcmFtZXJzLnJlcGxhY2UoIiAiLCAiJTIwIik7CgogICAgICAgIHJldHVybiBfcGFyYW1lcnM7CiAgICB9CgogICAgcHJpdmF0ZSBjbGFzcyBNeVdlYlZpZXdEb3duTG9hZExpc3RlbmVyIGltcGxlbWVudHMgRG93bmxvYWRMaXN0ZW5lciB7CiAgICAgICAgLy8gzO2807zgzP3Kwrz+vLS/yQogICAgICAgIHB1YmxpYyB2b2lkIG9uRG93bmxvYWRTdGFydChTdHJpbmcgdXJsLCBTdHJpbmcgdXNlckFnZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgY29udGVudERpc3Bvc2l0aW9uLCBTdHJpbmcgbWltZXR5cGUsIGxvbmcgY29udGVudExlbmd0aCkgewogICAgICAgICAgICBVcmkgdXJpID0gVXJpLnBhcnNlKHVybCk7CiAgICAgICAgICAgIEludGVudCBpbnRlbnQgPSBuZXcgSW50ZW50KEludGVudC5BQ1RJT05fVklFVywgdXJpKTsKICAgICAgICAgICAgc3RhcnRBY3Rpdml0eShpbnRlbnQpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgY2xhc3MgV2Vidmlld1V0aWwgewogICAgICAgIC8qKgogICAgICAgICAqIGxpbmt0eXBlIMG0vdPA4NDNo6wxxNrBtCAwzeLBtCBsaW5rdXJsIMjnufvKx83iwbTTw7TLtKZ1cmzBtL3TIGxpbmttb2R1bGUKICAgICAgICAgKiDI57n7ysfE2sG0o6zBtL3TzPjXqrXExKO/6bHgusUxOtfK0bYgMjrKtbvdIDM6vqvRoSA0Osnnx/ggNTqx48PxIDY6ueOypSA3OsXEwvQgcmVzb3VyY2VpZAogICAgICAgICAqIMjnufvKx8TawbSjrMG0vdPM+NeqtcTEo7/ptcTXytS0aWQgKLHjw/G6zbnjsqXDu9PQ18rUtGlkKSBsaW5rdG8gyOe5+8rHxNrBtLKix9LT0NfK1LRpZKOs1eLA7772tqjBtL3TwODQzaOsMaO618rUtMHQse3SswogICAgICAgICAqIDI618rUtM/qx+nSsyAo1rvT0Mq1u926zb6r0aHT0NfK1LTB0LHt0rMpCiAgICAgICAgICovCiAgICAgICAgQEphdmFzY3JpcHRJbnRlcmZhY2UKICAgICAgICBwdWJsaWMgdm9pZCBsaW5rVG9BbmRyb2lkKFN0cmluZyBsaW5rdHlwZSwgU3RyaW5nIGxpbmt1cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgbGlua21vZHVsZSwgU3RyaW5nIHJlc291cmNlaWQsIFN0cmluZyBsaW5rdG8pIHsKICAgICAgICAgICAgQWRJbmZvIGFkSXRlbSA9IG5ldyBBZEluZm8oKTsKICAgICAgICAgICAgYWRJdGVtLnNldExpbmtUeXBlKGxpbmt0eXBlKTsKICAgICAgICAgICAgYWRJdGVtLnNldExpbmtVcmwobGlua3VybCk7CiAgICAgICAgICAgIGlmICghVGV4dFV0aWxzLmlzRW1wdHkobGlua21vZHVsZSkgJiYgISJ1bmRlZmluZWQiLmVxdWFscyhsaW5rbW9kdWxlKSkgewogICAgICAgICAgICAgICAgYWRJdGVtLnNldExpbmtNb2RpZChJbnRlZ2VyLnBhcnNlSW50KGxpbmttb2R1bGUpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBhZEl0ZW0uc2V0UmVzb3VyY2VJZChyZXNvdXJjZWlkKTsKICAgICAgICAgICAgYWRJdGVtLnNldExpbmtUbyhsaW5rdG8pOwogICAgICAgICAgICBOYXZpZ2F0aW9uVXRpbC50b0NvbW1vbkFkKG1Db250ZXh0LCBhZEl0ZW0pOwogICAgICAgIH0KCiAgICAgICAgQEphdmFzY3JpcHRJbnRlcmZhY2UKICAgICAgICBwdWJsaWMgdm9pZCBsaW5rVG9CdXlBbmRyb2lkKFN0cmluZyBsaW5rdHlwZSwgU3RyaW5nIGxpbmt1cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgbGlua21vZHVsZSwgU3RyaW5nIHJlc291cmNlaWQsIFN0cmluZyBsaW5rdG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgaXRlbWNvdW50KSB7CiAgICAgICAgICAgIEFkSW5mbyBhZEl0ZW0gPSBuZXcgQWRJbmZvKCk7CiAgICAgICAgICAgIGFkSXRlbS5zZXRMaW5rVHlwZShsaW5rdHlwZSk7CiAgICAgICAgICAgIGFkSXRlbS5zZXRMaW5rVXJsKGxpbmt1cmwpOwogICAgICAgICAgICBpZiAoIVRleHRVdGlscy5pc0VtcHR5KGxpbmttb2R1bGUpICYmICEidW5kZWZpbmVkIi5lcXVhbHMobGlua21vZHVsZSkpIHsKICAgICAgICAgICAgICAgIGFkSXRlbS5zZXRMaW5rTW9kaWQoSW50ZWdlci5wYXJzZUludChsaW5rbW9kdWxlKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYWRJdGVtLnNldFJlc291cmNlSWQocmVzb3VyY2VpZCk7CiAgICAgICAgICAgIGFkSXRlbS5zZXRMaW5rVG8obGlua3RvKTsKICAgICAgICAgICAgYWRJdGVtLnNldEl0ZW1jb3VudChpdGVtY291bnQpOwogICAgICAgICAgICBOYXZpZ2F0aW9uVXRpbC50b0NvbW1vbkFkKG1Db250ZXh0LCBhZEl0ZW0pOwogICAgICAgIH0KCiAgICAgICAgQEphdmFzY3JpcHRJbnRlcmZhY2UKICAgICAgICBwdWJsaWMgdm9pZCBuZWVkVWlkZnJvbUFuZHJvaWQoKSB7CiAgICAgICAgICAgIGlmIChMb2dpbk1hbmFnZXIuY2hlY2tMb2dpblN0YXRlKCkgJiYgbUN1cnJlbnRXZWJWaWV3ICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldy5wb3N0KG5ldyBSdW5uYWJsZSgpIHsKICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldy5sb2FkVXJsKCJqYXZhc2NyaXB0OmdldFVpZCgnIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgTG9naW5NYW5hZ2VyLmdldFVpZCgpICsgIicpIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYmFja0ZsYWcgPSB0cnVlOwogICAgICAgICAgICAgICAgTmF2aWdhdGlvblV0aWwudG9Mb2dpbigoQWN0aXZpdHkpIG1Db250ZXh0LCAxNDQ0NCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiDGvbCy0vjQ0LvYtfcKICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSByZXNDb2RlCiAgICAgICAgICovCiAgICAgICAgQEphdmFzY3JpcHRJbnRlcmZhY2UKICAgICAgICBwdWJsaWMgdm9pZCB0b1BpbmdBblBheVJlc3BvbnNlKFN0cmluZyByZXNDb2RlKSB7CiAgICAgICAgICAgIGlmIChyZXNDb2RlLmVxdWFscygiMCIpKSB7CiAgICAgICAgICAgICAgICAvLyDKp7DcCiAgICAgICAgICAgICAgICBmaW5pc2goKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNDb2RlLmVxdWFscygiMSIpKSB7CiAgICAgICAgICAgICAgICAvLyCzybmmCiAgICAgICAgICAgICAgICBzZXRSZXN1bHQoUElOR0FOX1BBWV9TVUNDRVNTKTsKICAgICAgICAgICAgICAgIGZpbmlzaCgpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiDFqdK10vjQ0LvYtfcKICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSByZXNDb2RlCiAgICAgICAgICovCiAgICAgICAgQEphdmFzY3JpcHRJbnRlcmZhY2UKICAgICAgICBwdWJsaWMgdm9pZCB0b0FCQ1BheVJlc3BvbnNlKFN0cmluZyByZXNDb2RlKSB7CiAgICAgICAgICAgIEludGVudCBpbnRlbnQgPSBuZXcgSW50ZW50KCk7CiAgICAgICAgICAgIGlmIChyZXNDb2RlLmVxdWFscygiMCIpKSB7CiAgICAgICAgICAgICAgICBpbnRlbnQucHV0RXh0cmEoIm9yZGVyX2lkIiwgb3JkZXJJZCk7CiAgICAgICAgICAgICAgICBzZXRSZXN1bHQoQUJDX1BBWV9FUlJPUiwgaW50ZW50KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNDb2RlLmVxdWFscygiMSIpKSB7CiAgICAgICAgICAgICAgICAvLyCzybmmCiAgICAgICAgICAgICAgICBpbnRlbnQucHV0RXh0cmEoIm9yZGVyX2lkIiwgb3JkZXJJZCk7CiAgICAgICAgICAgICAgICBzZXRSZXN1bHQoQUJDX1BBWV9TVUNDRVNTLCBpbnRlbnQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZpbmlzaCgpOwogICAgICAgIH0KCiAgICAgICAgQEphdmFzY3JpcHRJbnRlcmZhY2UKICAgICAgICBwdWJsaWMgdm9pZCB0b0JPQ1BheVJlc3BvbnNlKFN0cmluZyByZXNDb2RlKSB7CiAgICAgICAgICAgIExvZ2dlci5kKCJyZXNDb2RlIDoiICsgcmVzQ29kZSArICIsb3JkZXJJZCA9IiArIG9yZGVySWQpOwogICAgICAgICAgICBJbnRlbnQgaW50ZW50ID0gbmV3IEludGVudCgpOwogICAgICAgICAgICBpZiAocmVzQ29kZS5lcXVhbHMoIjAiKSkgewogICAgICAgICAgICAgICAgaW50ZW50LnB1dEV4dHJhKCJvcmRlcl9pZCIsIG9yZGVySWQpOwogICAgICAgICAgICAgICAgc2V0UmVzdWx0KEJPQ19QQVlfRVJST1IsIGludGVudCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzQ29kZS5lcXVhbHMoIjEiKSkgewogICAgICAgICAgICAgICAgLy8gs8m5pgogICAgICAgICAgICAgICAgaW50ZW50LnB1dEV4dHJhKCJvcmRlcl9pZCIsIG9yZGVySWQpOwogICAgICAgICAgICAgICAgc2V0UmVzdWx0KEJPQ19QQVlfU1VDQ0VTUywgaW50ZW50KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmaW5pc2goKTsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIEhUTUw10rPD5rT6wO3H68fztcRqcwogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHJlcUlkICAgICAgIMfrx/O1xLHqyrZJRAogICAgICAgICAqIEBwYXJhbSByZXFVcmwgICAgICDH68fztcRVUkwKICAgICAgICAgKiBAcGFyYW0gaXNOZWVkTG9naW4gse3KvsrHt/HSqsfzYXBwILbLtcfCvNPDu6e689TZ1rTQ0LT6wO3H68fzo6wxse3KvtDo0qq1x8K8o6wwse3KvrK70OjSqrXHwrwKICAgICAgICAgKiBAcGFyYW0gcGFyYW1lcnMgICAgc7Htyr7H68fztcSyzsr9tcRqc29uc3RyaW5n0M7KvQogICAgICAgICAqIEBwYXJhbSBlbmNvZGV0eXBlICBlbmNvZGV0eXBlse3KvrLOyv20rrXE19a3+9equ6+3vcq9o6zWtdPQwb3W1iBiYXNlNjQsdXJsZW5jb2Rlo7u0q7/V1rXErMjPYmFzZTY0veLC6wogICAgICAgICAqIEBwYXJhbSBwb3NQYXJhbSAgICDQ6NKqvNPD3LXEss7K/c671sMgzqq/1bT6se2yu7zTw9wKICAgICAgICAgKiBAcGFyYW0gZW5jcnlwdFR5cGUgvNPD3LXEt73KvSDOqr/VtPqx7cSsyM8zZGVzvNPD3AogICAgICAgICAqLwogICAgICAgIEBKYXZhc2NyaXB0SW50ZXJmYWNlCiAgICAgICAgcHVibGljIHZvaWQgdG9IdG1sNUFnZW50UmVxdWVzdEpzKFN0cmluZyByZXFJZCwgU3RyaW5nIHJlcVVybCwgU3RyaW5nIGlzTmVlZExvZ2luLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgcGFyYW1lcnMsIFN0cmluZyBlbmNvZGV0eXBlLCBTdHJpbmcgcG9zUGFyYW0sIFN0cmluZyBlbmNyeXB0VHlwZSkgewogICAgICAgICAgICAvLyDNqLn9cmVxVXJsyKW199PDvdO/2gogICAgICAgICAgICBhZ2VudFJlcUlkID0gcmVxSWQ7CiAgICAgICAgICAgIGFnZW50UGFyYW1lcnMgPSBwYXJhbWVyczsKICAgICAgICAgICAgYWdlbnRFbmNvZGV0eXBlID0gZW5jb2RldHlwZTsKICAgICAgICAgICAgYWdlbnRSZXFVcmwgPSByZXFVcmw7CiAgICAgICAgICAgIGFnZW50UG9zUGFyYW0gPSBwb3NQYXJhbTsKICAgICAgICAgICAgYWdlbnRFbmNyeXB0VHlwZSA9IGVuY3J5cHRUeXBlOwogICAgICAgICAgICBpZiAoY2FsbGJhY2sgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBuZXcgTG9naW5DYWxsYmFjaygpIHsKICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvbkxvZ2luKCkgewogICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgX3BhcmFtZXJzID0gZ2V0UGFyYW1zKGFnZW50UGFyYW1lcnMsIGFnZW50RW5jb2RldHlwZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG1QcmVzZW50ZXIuc2VuZEFnZW50UmVxdWVzdChhZ2VudFJlcVVybCwgX3BhcmFtZXJzLCBhZ2VudFBvc1BhcmFtLCBhZ2VudEVuY3J5cHRUeXBlKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uQ2FuY2VsKCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobUN1cnJlbnRXZWJWaWV3ICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldy5sb2FkVXJsKCJqYXZhc2NyaXB0OmFnZW50cmVzcG9uc2Vmcm9tYXBwKCciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgYWdlbnRSZXFJZCArICInLCdub3Rsb2dpbicpIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoIjEiLmVxdWFscyhpc05lZWRMb2dpbikgJiYgIUxvZ2luTWFuYWdlci5jaGVja0xvZ2luU3RhdGUoKSkgewogICAgICAgICAgICAgICAgTmF2aWdhdGlvblV0aWwudG9Mb2dpbigoQWN0aXZpdHkpIG1Db250ZXh0LCBMT0dJTl9SRVNVTFRDT0RFKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrLm9uTG9naW4oKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgQEphdmFzY3JpcHRJbnRlcmZhY2UKICAgICAgICBwdWJsaWMgdm9pZCB0b0h0bWw1QWdlbnRSZXF1ZXN0SnMoU3RyaW5nIHJlcUlkLCBmaW5hbCBTdHJpbmcgcmVxVXJsLCBTdHJpbmcgaXNOZWVkTG9naW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsIFN0cmluZyBwYXJhbWVycywgZmluYWwgU3RyaW5nIGVuY29kZXR5cGUpIHsKICAgICAgICAgICAgdG9IdG1sNUFnZW50UmVxdWVzdEpzKHJlcUlkLCByZXFVcmwsIGlzTmVlZExvZ2luLCBwYXJhbWVycywgZW5jb2RldHlwZSwgbnVsbCwgbnVsbCk7CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBIVE1MNdKzw+a31s/tanO3vbeoCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gdGl0bGUgICAgILfWz+2x6sziCiAgICAgICAgICogQHBhcmFtIGNvbnRlbnQgICC31s/txNrI3QogICAgICAgICAqIEBwYXJhbSBfdXJsICAgICAgt9bP7cG0vdMKICAgICAgICAgKiBAcGFyYW0gaW1ndXJsICAgILfWz+3NvMasdXJsCiAgICAgICAgICogQHBhcmFtIHNoYXJldHlwZSC31s/twODQzSDF89PRyKYvusPT0QogICAgICAgICAqLwogICAgICAgIEBKYXZhc2NyaXB0SW50ZXJmYWNlCiAgICAgICAgcHVibGljIHZvaWQgdG9IdG1sNVNoYXJlSnMoU3RyaW5nIF9hY3Rpb25OdW1iZXIsIFN0cmluZyB0aXRsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgY29udGVudCwgU3RyaW5nIF91cmwsIFN0cmluZyBpbWd1cmwsIFN0cmluZyBzaGFyZXR5cGUpIHsKICAgICAgICAgICAgaWYgKCFMb2dpbk1hbmFnZXIuY2hlY2tMb2dpblN0YXRlKCkpIHsKICAgICAgICAgICAgICAgIE5hdmlnYXRpb25VdGlsLnRvTG9naW4oKEFjdGl2aXR5KSBtQ29udGV4dCwgMTAwMSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgV1hFbnRyeUFjdGl2aXR5LmlzSHRtbDVKc1NoYXJlID0gdHJ1ZTsKICAgICAgICAgICAgYWN0aW9uTnVtYmVyID0gX2FjdGlvbk51bWJlcjsKICAgICAgICAgICAgbVByZXNlbnRlci50b0h0bWw1U2hhcmVKcyh0aXRsZSwgY29udGVudCwgX3VybCwgaW1ndXJsLCBzaGFyZXR5cGUpOwoKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIGh0bWw1IHZpZGWypbfFyrEs1N3No8bky/uypbfFo6y199PDtMu3vbeoCiAgICAgICAgICovCiAgICAgICAgQEphdmFzY3JpcHRJbnRlcmZhY2UKICAgICAgICBwdWJsaWMgdm9pZCB2aWRlb29ucGxheWluZygpIHsKICAgICAgICAgICAgU3RhcnRBbmRTdG9wRXZlbnQgc3RhcnRBbmRTdG9wRXZlbnQgPSBuZXcgU3RhcnRBbmRTdG9wRXZlbnQoKTsKICAgICAgICAgICAgc3RhcnRBbmRTdG9wRXZlbnQuc2V0U3RhcnRBbmRTdG9wUGxheShmYWxzZSk7CiAgICAgICAgICAgIFJ4QnVzLmdldEluc3RhbmNlKCkuc2VuZChzdGFydEFuZFN0b3BFdmVudCk7CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiDJ6NbDyse38b/J0tTLotDCCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gX2lzUmVmcmVzaCChsDGhscqxse3KvrTyv6rLotDCuabE3KOszqqhsDChscqxse3KvrnYsdXLotDCuabE3AogICAgICAgICAqLwogICAgICAgIEBKYXZhc2NyaXB0SW50ZXJmYWNlCiAgICAgICAgcHVibGljIHZvaWQgc2V0SXNSZWZyZXNoKFN0cmluZyBfaXNSZWZyZXNoKSB7CiAgICAgICAgICAgIGlmICgiMSIuZXF1YWxzKF9pc1JlZnJlc2gpKSB7CiAgICAgICAgICAgICAgICBpc1JlZnJlc2ggPSB0cnVlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaXNSZWZyZXNoID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHN3aXBlTGF5b3V0ICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHN3aXBlTGF5b3V0LnNldE15UmVmcmVzaChpc1JlZnJlc2gpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiDJ6NbDaHRtbDW31s/ttcTE2sjdCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gdGl0bGUgICAgt9bP7bXEserM4gogICAgICAgICAqIEBwYXJhbSBjb250ZW50ICC31s/txNrI3QogICAgICAgICAqIEBwYXJhbSBpbWdVcmwgICC31s/tzbzGrLXY1rcKICAgICAgICAgKiBAcGFyYW0gc2hhcmVVcmwgt9bP7XVyCiAgICAgICAgICovCiAgICAgICAgQEphdmFzY3JpcHRJbnRlcmZhY2UKICAgICAgICBwdWJsaWMgdm9pZCBzZXRIdG1sNVNoYXJlQ29udGVudChTdHJpbmcgdGl0bGUsIFN0cmluZyBjb250ZW50LCBTdHJpbmcgaW1nVXJsLCBTdHJpbmcgc2hhcmVVcmwpIHsKICAgICAgICAgICAgaWYgKFRleHRVdGlscy5pc0VtcHR5KHRpdGxlKSB8fCAidW5kZWZpbmVkIi5lcXVhbHModGl0bGUpKSB7CiAgICAgICAgICAgICAgICBodG1sNUl0ZW0gPSBudWxsOwovLyAgICAgICAgICAgICAgICBtSGFuZGxlci5zZW5kRW1wdHlNZXNzYWdlKDApOwogICAgICAgICAgICAgICAgaXNTaGFyZVZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQovLyAgICAgICAgICAgIG1IYW5kbGVyLnNlbmRFbXB0eU1lc3NhZ2UoMSk7CiAgICAgICAgICAgIGlzU2hhcmVWaXNpYmxlID0gdHJ1ZTsKCiAgICAgICAgICAgIGlmIChodG1sNUl0ZW0gPT0gbnVsbCkgewogICAgICAgICAgICAgICAgaHRtbDVJdGVtID0gbmV3IEh0bWw1U2hhcmVJdGVtKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGh0bWw1SXRlbS5zZXRUaXRsZSh0aXRsZSk7CiAgICAgICAgICAgIGh0bWw1SXRlbS5zZXRDb250ZW50KGNvbnRlbnQpOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaHRtbDVJdGVtLnNldEltZ1VybChVUkxEZWNvZGVyLmRlY29kZShpbWdVcmwsICJVVEYtOCIpKTsKICAgICAgICAgICAgICAgIGh0bWw1SXRlbS5zZXRTaGFyZVVybChVUkxEZWNvZGVyLmRlY29kZShzaGFyZVVybCwgIlVURi04IikpOwogICAgICAgICAgICB9IGNhdGNoIChVbnN1cHBvcnRlZEVuY29kaW5nRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgfQoKICAgICAgICBASmF2YXNjcmlwdEludGVyZmFjZQogICAgICAgIHB1YmxpYyB2b2lkIGdldEh0bWw1U2hhcmVDb250ZW50KCkgewogICAgICAgICAgICBNYXA8U3RyaW5nLCBPYmplY3Q+IG1hcCA9IG5ldyBIYXNoTWFwPFN0cmluZywgT2JqZWN0PigpOwogICAgICAgICAgICBpZiAoaHRtbDVJdGVtICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIG1hcC5wdXQoInRpdGxlIiwgaHRtbDVJdGVtLmdldFRpdGxlKCkpOwogICAgICAgICAgICAgICAgbWFwLnB1dCgiY29udGVudCIsIGh0bWw1SXRlbS5nZXRDb250ZW50KCkpOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBtYXAucHV0KCJpbWdVcmwiLCBVUkxFbmNvZGVyLmVuY29kZShodG1sNUl0ZW0uZ2V0SW1nVXJsKCksICJVVEYtOCIpKTsKICAgICAgICAgICAgICAgICAgICBtYXAucHV0KCJzaGFyZVVybCIsIFVSTEVuY29kZXIuZW5jb2RlKGh0bWw1SXRlbS5nZXRTaGFyZVVybCgpLCAiVVRGLTgiKSk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChVbnN1cHBvcnRlZEVuY29kaW5nRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZpbmFsIFN0cmluZyBqc29uID0gbmV3IEdzb24oKS50b0pzb24obWFwKTsKCiAgICAgICAgICAgIGlmIChtQ3VycmVudFdlYlZpZXcgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgbUN1cnJlbnRXZWJWaWV3LnBvc3QobmV3IFJ1bm5hYmxlKCkgewogICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIHBhcmFtID0gImphdmFzY3JpcHQ6Y2F0Y2hTaGFyZU1vZGVsRnJvbUFwcCgnIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsganNvbiArICInKSI7CiAgICAgICAgICAgICAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldy5sb2FkVXJsKHBhcmFtKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICB9CgoKICAgIH0KCn0K</text>
      </register>
      <register name="d" type="4">
        <keys>
          <key char="100" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="56" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="64" code="0" mods="0" />
          <key char="119" code="0" mods="0" />
          <key char="121" code="0" mods="0" />
          <key char="121" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="94" code="0" mods="0" />
          <key char="119" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="65535" code="65" mods="130" />
          <key char="119" code="0" mods="0" />
          <key char="119" code="0" mods="0" />
          <key char="119" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="65535" code="65" mods="130" />
          <key char="106" code="0" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="64" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="64" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name="e" type="4">
        <keys>
          <key char="48" code="0" mods="0" />
          <key char="102" code="0" mods="0" />
          <key char="34" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="118" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="34" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="64" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="103" code="0" mods="0" />
          <key char="47" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="65535" code="82" mods="130" />
          <key char="48" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name="i" type="4">
        <keys>
          <key char="65535" code="27" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
        </keys>
      </register>
      <register name="j" type="4">
        <text>jjjbbbllllllljjjjjjjjkj</text>
      </register>
      <register name="-" type="4">
        <text encoding="base64">IA==</text>
      </register>
      <register name="/" type="4">
        <text encoding="base64">XDxDb25maWdcPg==</text>
      </register>
      <register name="o" type="4">
        <text>android:background=&quot;@color/color_eeeeee_white&quot;
                app:failureImage=&quot;@drawable/default_pic&quot;
                app:failureImageScaleType=&quot;centerInside&quot;
                app:placeholderImage=&quot;@drawable/default_pic&quot;
                app:placeholderImageScaleType=&quot;centerInside&quot;</text>
      </register>
      <register name="0" type="2">
        <text encoding="base64">LyoqCiAqIGh0bWw1CiAqLwpAU3VwcHJlc3NMaW50KHsiSGFuZGxlckxlYWsiLCAiU2V0SmF2YVNjcmlwdEVuYWJsZWQifSkKcHVibGljIGNsYXNzIEh0bWw1QWN0aXZpdHkgZXh0ZW5kcyBXWEVudHJ5QWN0aXZpdHk8SHRtbDVDb250cmFjdC5QcmVzZW50ZXI+IGltcGxlbWVudHMgSHRtbDVDb250cmFjdC5WaWV3IHsKCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBMT0dJTl9SRVNVTFRDT0RFID0gMTAyMDA7CgogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgUElOR0FOX1BBWV9FUlJPUiA9ICIwIjsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IFBJTkdBTl9QQVlfU1VDQ0VTUyA9IDE7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBBQkNfUEFZX1NVQ0NFU1MgPSAyOwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgQUJDX1BBWV9FUlJPUiA9IDM7CgogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgQk9DX1BBWV9TVUNDRVNTID0gNDsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IEJPQ19QQVlfRVJST1IgPSA1OwoKICAgIHByaXZhdGUgU3RyaW5nIGZsYWcsIHB1c2hGbGFnID0gIiI7CgogICAgcHJpdmF0ZSBib29sZWFuIGJhY2tGbGFnID0gZmFsc2U7CgogICAgLyoqCiAgICAgKiDKx7fxz9TKvrfWz+1wb3B3aW5kb3cKICAgICAqLwogICAgcHJpdmF0ZSBib29sZWFuIGlzTm9TaG93U2hhcmUgPSBmYWxzZTsKCiAgICAvL3BvcHdpbmRvd8rHt/HP1Mq+t9bP7QogICAgcHJpdmF0ZSBib29sZWFuIGlzU2hhcmVWaXNpYmxlID0gZmFsc2U7CgogICAgLyoqCiAgICAgKiBodG1sNbfWz+21xMq1wP0KICAgICAqLwogICAgcHJpdmF0ZSBIdG1sNVNoYXJlSXRlbSBodG1sNUl0ZW0gPSBudWxsOwoKICAgIC8vyse38crHt9bH+KOoyse31sf4yrGjrM/Uyr65us7vs7XNvLHqo6kKICAgIHByaXZhdGUgYm9vbGVhbiBpc0FyZWEgPSBmYWxzZTsKCiAgICBwcml2YXRlIFN0cmluZyBvcmRlcklkID0gbnVsbDsKCiAgICBAQmluZFZpZXcoUi5pZC50b29sYmFyKQogICAgVG9vbGJhckFjdGlvbmJhciB0b29sQmFyOwoKICAgIEBCaW5kVmlldyhSLmlkLnRvb2xiYXJfY2xvc2UpCiAgICBJbWFnZVZpZXcgY2xvc2VUdjsKCiAgICBAQmluZFZpZXcoUi5pZC50b29sYmFyX2xlZnQpCiAgICBJbWFnZVZpZXcgYmFja0l2OwoKICAgIEBCaW5kVmlldyhSLmlkLnN3aXBlX2NvbnRhaW5lcikKICAgIFNjcm9sbFN3aXBlUmVmcmVzaExheW91dCBzd2lwZUxheW91dDsKCiAgICBAQmluZFZpZXcoUi5pZC5XZWJWaWV3UHJvZ3Jlc3MpCiAgICBQcm9ncmVzc0JhciBtUHJvZ3Jlc3NCYXI7CgogICAgQEJpbmRWaWV3KFIuaWQud2VidmlldykKICAgIFg1V2ViVmlldyBtQ3VycmVudFdlYlZpZXc7CgogICAgcHJpdmF0ZSBib29sZWFuIGlzUmVmcmVzaCA9IGZhbHNlOwoKICAgIC8qKgogICAgICogtPrA7cfrx/O1xGlkCiAgICAgKi8KICAgIHByaXZhdGUgU3RyaW5nIGFnZW50UmVxSWQgPSBudWxsOwogICAgLy8gtPrA7cfrx/O1xLLOyv2jqGpzb26jqQogICAgcHJpdmF0ZSBTdHJpbmcgYWdlbnRQYXJhbWVyczsKICAgIC8vILT6wO3H68fztcS808PcwODQzaOoanNvbqOpCiAgICBwcml2YXRlIFN0cmluZyBhZ2VudEVuY29kZXR5cGU7CiAgICAvLyC0+sDtx+vH87XEdXJstdjWt6OoanNvbqOpCiAgICBwcml2YXRlIFN0cmluZyBhZ2VudFJlcVVybDsKICAgIC8vILT6wO3H68fz0OjSqrzTw9y1xLLOyv3Ou9bDIM6qv9W0+rHtsru808PcCiAgICBwcml2YXRlIFN0cmluZyBhZ2VudFBvc1BhcmFtOwogICAgLy8gtPrA7cfrx/O808PctcS3vcq9IM6qv9W0+rHtxKzIzzNkZXO808PcCiAgICBwcml2YXRlIFN0cmluZyBhZ2VudEVuY3J5cHRUeXBlOwoKICAgIHByaXZhdGUgU3RyaW5nIHR5cGU7CiAgICBwcml2YXRlIFJlc3BvbnNlQmFua1BheVBhcmFtSXRlbSBib2NJdGVtOwoKICAgIHByaXZhdGUgYm9vbGVhbiBpc0NyZWF0ZSA9IGZhbHNlOy8vxdC2z8rHt/HKx7Xa0ru0zrS0vagKICAgIHByaXZhdGUgYm9vbGVhbiBpc0hvbWUgPSBmYWxzZTsvL8XQts/Kx7fxvq25/cHLaG9tZbz8CgogICAgcHVibGljIFZhbHVlQ2FsbGJhY2s8VXJpPiBtRmlsZVBhdGhDYWxsYmFjazsKICAgIHB1YmxpYyBWYWx1ZUNhbGxiYWNrPFVyaVtdPiBtRmlsZVBhdGhDYWxsYmFja3M7CgogICAgLyoqCiAgICAgKiC0q8jraHRtbDVqc7fWz+2y2df3wffLrrrFCiAgICAgKi8KICAgIHByaXZhdGUgU3RyaW5nIGFjdGlvbk51bWJlcjsKCiAgICBJbnRlbnQgaW50ZW50OwoKICAgIEh0bWw1UHJlc2VudGVyIG1QcmVzZW50ZXI7CgogICAgLy+1x8K8uvO1xLvYtfcKICAgIHByaXZhdGUgTG9naW5DYWxsYmFjayBjYWxsYmFjazsKCiAgICAvL8rHt/HT0M60tsHP+8+iIDHKx9PQIDDKx7fxCiAgICBwcml2YXRlIGludCBpc0hhc05vdFJlYWRNc2cgPSAwOwogICAgLy/OtLbBz/vPosr9wb8KICAgIHByaXZhdGUgaW50IG5vdFJlYWRNc2dOdW0gPTA7CgogICAgSGFuZGxlciBtSGFuZGxlciA9IG5ldyBIYW5kbGVyKCkgewogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyB2b2lkIGhhbmRsZU1lc3NhZ2UoTWVzc2FnZSBtc2cpIHsKICAgICAgICAgICAgc3VwZXIuaGFuZGxlTWVzc2FnZShtc2cpOwogICAgICAgICAgICBzd2l0Y2ggKG1zZy53aGF0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgdG9vbEJhci5zZXRSaWdodEltZ1Zpc2liaWxpdHkoZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgIHRvb2xCYXIuc2V0UmlnaHRJbWdWaXNpYmlsaXR5KHRydWUpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIG9uQ3JlYXRlKEJ1bmRsZSBzYXZlZEluc3RhbmNlU3RhdGUpIHsKICAgICAgICBzdXBlci5vbkNyZWF0ZShzYXZlZEluc3RhbmNlU3RhdGUpOwogICAgICAgIC8vvObI3Tx2aWRlbz7K08a1sqW3xSDN+NKz1tC1xMrTxrWjrMnPxsHEu7XEyrG68qOsv8nE3LP2z9bJwcu4tcTH6b/2o6zQ6NKqyOfPwsno1sMKICAgICAgICBnZXRXaW5kb3coKS5zZXRGb3JtYXQoUGl4ZWxGb3JtYXQuVFJBTlNMVUNFTlQpOwoKICAgICAgICBpc0NyZWF0ZSA9IHRydWU7CgogICAgICAgIG1QcmVzZW50ZXIgPSBuZXcgSHRtbDVQcmVzZW50ZXIodGhpcywgdGhpcyk7CgogICAgICAgIHJlZ2lzdGVyQnJvYWRjYXN0KCk7CiAgICAgICAgaW5pdFZpZXcoKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCB2b2lkIHBhcnNlckludGVudCgpIHsKICAgICAgICBzdXBlci5wYXJzZXJJbnRlbnQoKTsKICAgICAgICBpbnRlbnQgPSBnZXRJbnRlbnQoKTsKICAgICAgICBvcmRlcklkID0gaW50ZW50LmdldFN0cmluZ0V4dHJhKCJvcmRlcl9pZCIpOwogICAgICAgIHR5cGUgPSBpbnRlbnQuZ2V0U3RyaW5nRXh0cmEoInR5cGUiKTsKICAgICAgICBmbGFnID0gaW50ZW50LmdldFN0cmluZ0V4dHJhKCJmbGFnIik7CiAgICAgICAgcHVzaEZsYWcgPSBpbnRlbnQuZ2V0U3RyaW5nRXh0cmEoInB1c2hGbGFnIik7CiAgICAgICAgQnVuZGxlIGV4dHJhcyA9IGludGVudC5nZXRFeHRyYXMoKTsKICAgICAgICBodG1sNUl0ZW0gPSAoSHRtbDVTaGFyZUl0ZW0pIGludGVudC5nZXRQYXJjZWxhYmxlRXh0cmEoImh0bWw1SXRlbSIpOwogICAgICAgIGlmIChodG1sNUl0ZW0gIT0gbnVsbCAmJiBodG1sNUl0ZW0uZ2V0SXNSZWZyZXNoKCkgPT0gMSkgewogICAgICAgICAgICBpc1JlZnJlc2ggPSB0cnVlOwogICAgICAgIH0KICAgICAgICBpZiAoaHRtbDVJdGVtICE9IG51bGwgJiYgaHRtbDVJdGVtLmdldElzQXJlYSgpID09IDEpIHsKICAgICAgICAgICAgaXNBcmVhID0gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGlzTm9TaG93U2hhcmUgPSBpbnRlbnQuZ2V0Qm9vbGVhbkV4dHJhKCJpc05vU2hvd1NoYXJlIiwgZmFsc2UpOwoKICAgIH0KCiAgICBAQmluZFZpZXcoUi5pZC50b29sYmFyX3JpZ2h0KQogICAgSW1hZ2VWaWV3IHNldGluZ19pY29uOwoKICAgIHB1YmxpYyB2b2lkIGluaXRWaWV3KCkgewogICAgICAgIGluaXRXZWJWaWV3KCk7CiAgICAgICAgbUN1cnJlbnRXZWJWaWV3LnNldE9uU2Nyb2xsQ2hhbmdlZENhbGxiYWNrKG5ldyBYNVdlYlZpZXcuT25TY3JvbGxDaGFuZ2VkQ2FsbGJhY2soKSB7CiAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uU2Nyb2xsKGludCBsLCBpbnQgdCkgewogICAgICAgICAgICAgICAgaWYoc3dpcGVMYXlvdXQhPW51bGwpewogICAgICAgICAgICAgICAgICAgIGlmICh0ID09IDApIHsvL3dlYlZpZXfU2ralsr8KICAgICAgICAgICAgICAgICAgICAgICAgc3dpcGVMYXlvdXQuc2V0RW5hYmxlZCh0cnVlKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugey8vd2ViVmlld7K7yse2pbK/CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXBlTGF5b3V0LnNldEVuYWJsZWQoZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0pOwovLyAgICAgICAgc3dpcGVMYXlvdXQuc2V0Vmlld0dyb3VwKG1DdXJyZW50V2ViVmlldyk7Ly/J6NbDvODM/bn2tq+1xNfTdmlldwogICAgICAgIHN3aXBlTGF5b3V0LnNldE15UmVmcmVzaChpc1JlZnJlc2gpOwogICAgICAgIHN3aXBlTGF5b3V0LnNldE9uUmVmcmVzaExpc3RlbmVyKG5ldyBTd2lwZVJlZnJlc2hMYXlvdXQuT25SZWZyZXNoTGlzdGVuZXIoKSB7CgogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgb25SZWZyZXNoKCkgewogICAgICAgICAgICAgICAgaWYgKGlzUmVmcmVzaCkgewogICAgICAgICAgICAgICAgICAgIC8v1tjQwsui0MLSs8PmCiAgICAgICAgICAgICAgICAgICAgaWYobUN1cnJlbnRXZWJWaWV3IT1udWxsKXsKICAgICAgICAgICAgICAgICAgICAgICAgbUN1cnJlbnRXZWJWaWV3LmxvYWRVcmwobUN1cnJlbnRXZWJWaWV3LmdldFVybCgpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHN3aXBlTGF5b3V0LnNldFJlZnJlc2hpbmcoZmFsc2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIHRvb2xCYXIuc2V0VXBSaWd0aEljb24oUi5kcmF3YWJsZS5zaG9wX3NldGluZ19pY29uLCBuZXcgT25DbGlja0xpc3RlbmVyKCkgewogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgb25DbGljayhWaWV3IHYpIHsKICAgICAgICAgICAgICAgIC8vz9TKvnBvcHdpbmRvdwogICAgICAgICAgICAgICAgbVByZXNlbnRlci5zaG93UmlnaHRQb3B3aW5kb3coZmluZFZpZXdCeUlkKFIuaWQudG9vbGJhcl9yaWdodCksIGlzSGFzTm90UmVhZE1zZyxub3RSZWFkTXNnTnVtLCBpc1NoYXJlVmlzaWJsZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgaWYgKCFpc05vU2hvd1NoYXJlICYmIGh0bWw1SXRlbSAhPSBudWxsKSB7CiAgICAgICAgICAgIGlzU2hhcmVWaXNpYmxlID0gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGlmIChpc0FyZWEpIHsKICAgICAgICAgICAgdG9vbEJhci5zZXRVcFJpZ2h0SWNvbjIoUi5kcmF3YWJsZS5pY191c2VyX2luZm9fc2hvcHBpbmdfY2FydF9ibGFjaywgbmV3IE9uQ2xpY2tMaXN0ZW5lcigpIHsKICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGljIHZvaWQgb25DbGljayhWaWV3IHYpIHsKICAgICAgICAgICAgICAgICAgICBOYXZpZ2F0aW9uVXRpbC50b1Nob3BwaW5nQ2FydCgoQWN0aXZpdHkpIG1Db250ZXh0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7Ci8vICAgICAgICAgICAgbVByZXNlbnRlci5nZXRTaG9wcGluZ0NhcnROdW0oKTsKICAgICAgICB9CgogICAgICAgIGlmICghVGV4dFV0aWxzLmlzRW1wdHkodHlwZSkgJiYgdHlwZS5lcXVhbHMoImJvY19wYXkiKSkgewogICAgICAgICAgICBib2NJdGVtID0gaW50ZW50LmdldFBhcmNlbGFibGVFeHRyYSgiYm9jUGF5SXRlbSIpOwogICAgICAgICAgICBTdHJpbmcgdXJsID0gYm9jSXRlbS5nZXRCYW5rVXJsKCk7CiAgICAgICAgICAgIGJvY1VybEp1bXAodXJsKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuYXZpZ2F0ZVRvVXJsKGludGVudC5nZXREYXRhU3RyaW5nKCkpOwogICAgICAgIH0KICAgIH0KCiAgICBAT25DbGljayhSLmlkLnRvb2xiYXJfY2xvc2UpCiAgICBwdWJsaWMgdm9pZCBjbG9zZUNsaWNrKCkgewogICAgICAgIGlmICghVGV4dFV0aWxzLmlzRW1wdHkodHlwZSkKICAgICAgICAgICAgICAgICYmICh0eXBlLmVxdWFscygiY2NiX3BheSIpIHx8IHR5cGUuZXF1YWxzKCJhYmNfcGF5IikpKSB7CiAgICAgICAgICAgIEludGVudCBpbnRlbnQgPSBuZXcgSW50ZW50KCk7CiAgICAgICAgICAgIGludGVudC5wdXRFeHRyYSgib3JkZXJfaWQiLCBvcmRlcklkKTsKICAgICAgICAgICAgc2V0UmVzdWx0KFJFU1VMVF9PSywgaW50ZW50KTsKICAgICAgICB9CiAgICAgICAgZmluaXNoKCk7CiAgICB9CgogICAgQE9uQ2xpY2soUi5pZC50b29sYmFyX2xlZnQpCiAgICBwdWJsaWMgdm9pZCBiYWNrQ2xpY2soKSB7CiAgICAgICAgaGFuZGxlckJhY2soKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBpbml0V2ViVmlldygpIHsKCiAgICAgICAgbVByb2dyZXNzQmFyLnNldE1heCgxMDApOwoKICAgICAgICBtQ3VycmVudFdlYlZpZXcuY2xlYXJDYWNoZSh0cnVlKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuZ2V0U2V0dGluZ3MoKS5zZXRKYXZhU2NyaXB0RW5hYmxlZCh0cnVlKTsKICAgICAgICBpZiAoQnVpbGQuVkVSU0lPTi5TREtfSU5UID49IDIxKSB7Ly81LjDS1MnPv6rG9Gh0dHBz1qez1gogICAgICAgICAgICBtQ3VycmVudFdlYlZpZXcuZ2V0U2V0dGluZ3MoKS5zZXRNaXhlZENvbnRlbnRNb2RlKDApOwogICAgICAgIH0KICAgICAgICBtQ3VycmVudFdlYlZpZXcuYWRkSmF2YXNjcmlwdEludGVyZmFjZShuZXcgV2Vidmlld1V0aWwoKSwgIkpTIik7CiAgICAgICAgLy8gVXNlckFnZW50uvPD5tT2vNMvQnlBbmRyb2lkCiAgICAgICAgU3RyaW5nIHVhID0gbUN1cnJlbnRXZWJWaWV3LmdldFNldHRpbmdzKCkuZ2V0VXNlckFnZW50U3RyaW5nKCk7CiAgICAgICAgU3RyaW5nIGFkZFN0ciA9ICIgQXBwVmVyc2lvbi8iICsgVmVyc2lvblV0aWxzLmdldFZlcnNpb25OYW1lKG1Db250ZXh0KSArICIvQnlBbmRyb2lkIjsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuZ2V0U2V0dGluZ3MoKS5zZXRVc2VyQWdlbnRTdHJpbmcodWEgKyBhZGRTdHIpOwogICAgICAgIG1DdXJyZW50V2ViVmlldy5nZXRTZXR0aW5ncygpLnNldExvYWRXaXRoT3ZlcnZpZXdNb2RlKHRydWUpOwogICAgICAgIG1DdXJyZW50V2ViVmlldy5nZXRTZXR0aW5ncygpLnNldFVzZVdpZGVWaWV3UG9ydCh0cnVlKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuZ2V0U2V0dGluZ3MoKS5zZXRBbGxvd0ZpbGVBY2Nlc3ModHJ1ZSk7CiAgICAgICAgbUN1cnJlbnRXZWJWaWV3LmdldFNldHRpbmdzKCkuc2V0TGF5b3V0QWxnb3JpdGhtKFdlYlNldHRpbmdzLkxheW91dEFsZ29yaXRobS5OQVJST1dfQ09MVU1OUyk7CiAgICAgICAgbUN1cnJlbnRXZWJWaWV3LmdldFNldHRpbmdzKCkuc2V0U3VwcG9ydFpvb20odHJ1ZSk7CiAgICAgICAgbUN1cnJlbnRXZWJWaWV3LmdldFNldHRpbmdzKCkuc2V0QnVpbHRJblpvb21Db250cm9scyh0cnVlKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuZ2V0U2V0dGluZ3MoKS5zZXRTdXBwb3J0TXVsdGlwbGVXaW5kb3dzKGZhbHNlKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuZ2V0U2V0dGluZ3MoKS5zZXRBcHBDYWNoZUVuYWJsZWQodHJ1ZSk7CiAgICAgICAgbUN1cnJlbnRXZWJWaWV3LmdldFNldHRpbmdzKCkuc2V0RG9tU3RvcmFnZUVuYWJsZWQodHJ1ZSk7CiAgICAgICAgbUN1cnJlbnRXZWJWaWV3LmdldFNldHRpbmdzKCkuc2V0R2VvbG9jYXRpb25FbmFibGVkKHRydWUpOwogICAgICAgIG1DdXJyZW50V2ViVmlldy5nZXRTZXR0aW5ncygpLnNldEFwcENhY2hlTWF4U2l6ZShMb25nLk1BWF9WQUxVRSk7CiAgICAgICAgbUN1cnJlbnRXZWJWaWV3LmdldFNldHRpbmdzKCkuc2V0QXBwQ2FjaGVQYXRoKHRoaXMuZ2V0RGlyKCJhcHBjYWNoZSIsIDApLmdldFBhdGgoKSk7CiAgICAgICAgbUN1cnJlbnRXZWJWaWV3LmdldFNldHRpbmdzKCkuc2V0RGF0YWJhc2VQYXRoKHRoaXMuZ2V0RGlyKCJkYXRhYmFzZXMiLCAwKS5nZXRQYXRoKCkpOwogICAgICAgIG1DdXJyZW50V2ViVmlldy5nZXRTZXR0aW5ncygpLnNldEdlb2xvY2F0aW9uRGF0YWJhc2VQYXRoKHRoaXMuZ2V0RGlyKCJnZW9sb2NhdGlvbiIsIDApCiAgICAgICAgICAgICAgICAuZ2V0UGF0aCgpKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuZ2V0U2V0dGluZ3MoKS5zZXRQbHVnaW5TdGF0ZShXZWJTZXR0aW5ncy5QbHVnaW5TdGF0ZS5PTl9ERU1BTkQpOwoKICAgICAgICBpbml0aWFsaXplQ3VycmVudFdlYlZpZXcoKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuc2V0RG93bmxvYWRMaXN0ZW5lcihuZXcgTXlXZWJWaWV3RG93bkxvYWRMaXN0ZW5lcigpKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgbmF2aWdhdGVUb1VybChTdHJpbmcgdXJsKSB7CiAgICAgICAgaWYgKCFUZXh0VXRpbHMuaXNFbXB0eSh1cmwpKSB7CiAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldy5sb2FkVXJsKHVybCk7CiAgICAgICAgfQogICAgfQoKCiAgICBwcml2YXRlIHZvaWQgYm9jVXJsSnVtcChTdHJpbmcgdXJsKSB7CiAgICAgICAgaWYgKFRleHRVdGlscy5pc0VtcHR5KHVybCkpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IG1hcFBhcmFtcyA9IG5ldyBIYXNoTWFwPFN0cmluZywgU3RyaW5nPigpOwogICAgICAgIG1hcFBhcmFtcy5wdXQoIm1lcmNoYW50Tm8iLCBib2NJdGVtLmdldE1lcmNoYW50Tm8oKSk7CiAgICAgICAgbWFwUGFyYW1zLnB1dCgib3JkZXJObyIsIGJvY0l0ZW0uZ2V0T3JkZXJObygpKTsKICAgICAgICBtYXBQYXJhbXMucHV0KCJwYXlUeXBlIiwgYm9jSXRlbS5nZXRQYXlUeXBlKCkpOwogICAgICAgIG1hcFBhcmFtcy5wdXQoImN1ckNvZGUiLCBib2NJdGVtLmdldEN1ckNvZGUoKSk7CiAgICAgICAgbWFwUGFyYW1zLnB1dCgib3JkZXJBbW91bnQiLCBTdHJpbmcudmFsdWVPZihib2NJdGVtLmdldE9yZGVyQW1vdW50KCkpKTsKICAgICAgICBtYXBQYXJhbXMucHV0KCJvcmRlclRpbWUiLCBib2NJdGVtLmdldE9yZGVyVGltZSgpKTsKICAgICAgICBtYXBQYXJhbXMucHV0KCJvcmRlck5vdGUiLCBib2NJdGVtLmdldE9yZGVyTm90ZSgpKTsKICAgICAgICBtYXBQYXJhbXMucHV0KCJvcmRlclVybCIsIGJvY0l0ZW0uZ2V0T3JkZXJVcmwoKSk7CiAgICAgICAgbWFwUGFyYW1zLnB1dCgib3JkZXJUaW1lb3V0RGF0ZSIsIGJvY0l0ZW0uZ2V0T3JkZXJUaW1lb3V0RGF0ZSgpKTsKICAgICAgICBtYXBQYXJhbXMucHV0KCJzaWduRGF0YSIsIGJvY0l0ZW0uZ2V0U2lnbkRhdGEoKSk7CgogICAgICAgIENvbGxlY3Rpb248TWFwLkVudHJ5PFN0cmluZywgU3RyaW5nPj4gcG9zdERhdGEgPSBtYXBQYXJhbXMuZW50cnlTZXQoKTsKICAgICAgICBjcmVhdGVCb2NGb3J1bShtQ3VycmVudFdlYlZpZXcsIHVybCwgcG9zdERhdGEpOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBjcmVhdGVCb2NGb3J1bShXZWJWaWV3IHdlYlZpZXcsIFN0cmluZyB1cmwsIENvbGxlY3Rpb248TWFwLkVudHJ5PFN0cmluZywgU3RyaW5nPj4gcG9zdERhdGEpIHsKICAgICAgICBTdHJpbmdCdWlsZGVyIHNiID0gbmV3IFN0cmluZ0J1aWxkZXIoKTsKICAgICAgICBzYi5hcHBlbmQoIjxodG1sPjxoZWFkPjwvaGVhZD4iKTsKICAgICAgICBzYi5hcHBlbmQoIjxib2R5IG9ubG9hZD0nZm9ybTEuc3VibWl0KCknPiIpOwogICAgICAgIHNiLmFwcGVuZChTdHJpbmcuZm9ybWF0KCI8Zm9ybSBpZD0nZm9ybTEnIGFjdGlvbj0nJXMnIG1ldGhvZD0nJXMnPiIsIHVybCwgInBvc3QiKSk7CiAgICAgICAgZm9yIChNYXAuRW50cnk8U3RyaW5nLCBTdHJpbmc+IGl0ZW0gOiBwb3N0RGF0YSkgewogICAgICAgICAgICBzYi5hcHBlbmQoU3RyaW5nLmZvcm1hdCgiPGlucHV0IG5hbWU9JyVzJyB0eXBlPSdoaWRkZW4nIHZhbHVlPSclcycgLz4iLCBpdGVtLmdldEtleSgpLCBpdGVtLmdldFZhbHVlKCkpKTsKICAgICAgICB9CiAgICAgICAgc2IuYXBwZW5kKCI8L2Zvcm0+PC9ib2R5PjwvaHRtbD4iKTsKICAgICAgICB3ZWJWaWV3LmxvYWREYXRhKHNiLnRvU3RyaW5nKCksICJ0ZXh0L2h0bWwiLCAiVVRGLTgiKTsKICAgIH0KCiAgICBwcml2YXRlIGNsYXNzIE15V2ViVmlld0Rvd25Mb2FkTGlzdGVuZXIgaW1wbGVtZW50cyBEb3dubG9hZExpc3RlbmVyIHsKICAgICAgICAvLyDM7bzTvODM/crCvP68tL/JCiAgICAgICAgcHVibGljIHZvaWQgb25Eb3dubG9hZFN0YXJ0KFN0cmluZyB1cmwsIFN0cmluZyB1c2VyQWdlbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBjb250ZW50RGlzcG9zaXRpb24sIFN0cmluZyBtaW1ldHlwZSwgbG9uZyBjb250ZW50TGVuZ3RoKSB7CiAgICAgICAgICAgIFVyaSB1cmkgPSBVcmkucGFyc2UodXJsKTsKICAgICAgICAgICAgSW50ZW50IGludGVudCA9IG5ldyBJbnRlbnQoSW50ZW50LkFDVElPTl9WSUVXLCB1cmkpOwogICAgICAgICAgICBzdGFydEFjdGl2aXR5KGludGVudCk7CiAgICAgICAgfQogICAgfQoKICAgIHByaXZhdGUgdm9pZCBoYW5kbGVyQmFjaygpIHsKICAgICAgICBpZiAobUN1cnJlbnRXZWJWaWV3LmNhbkdvQmFjaygpKSB7CiAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldy5nb0JhY2soKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoIVRleHRVdGlscy5pc0VtcHR5KHR5cGUpCiAgICAgICAgICAgICAgICAgICAgJiYgKHR5cGUuZXF1YWxzKCJjY2JfcGF5IikgfHwgdHlwZS5lcXVhbHMoImFiY19wYXkiKSB8fCB0eXBlLmVxdWFscygiYm9jX3BheSIpKSkgewogICAgICAgICAgICAgICAgSW50ZW50IGludGVudCA9IG5ldyBJbnRlbnQoKTsKICAgICAgICAgICAgICAgIGludGVudC5wdXRFeHRyYSgib3JkZXJfaWQiLCBvcmRlcklkKTsKICAgICAgICAgICAgICAgIHNldFJlc3VsdChSRVNVTFRfT0ssIGludGVudCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZmluaXNoKCk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogu/HIoc3Gy82x6sq2o6zKx7fxysfXtMyswLi08r+q0rPD5gogICAgICovCiAgICBwcml2YXRlIGJvb2xlYW4gaXNQdXNoTXNnT3BlblBhZ2UoKSB7CiAgICAgICAgaWYgKFRleHRVdGlscy5pc0VtcHR5KHB1c2hGbGFnKSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIHZvaWQgb25EZXN0cm95KCkgewogICAgICAgIG1QcmVzZW50ZXIudW5TdWJzY3JpYmUoKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuY2xlYXJDYWNoZSh0cnVlKTsKICAgICAgICB1bnJlZ2lzdGVyUmVjZWl2ZXIoZG9VaWRSZWNlaXZlcik7CgogICAgICAgIC8vIL3ivvbJwc3Lo7pqYXZhLmxhbmcuSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOlJlY2VpdmVyIG5vdCByZWdpc3RlcmVkOgogICAgICAgIC8vIGFuZHJvaWQud2lkZ2V0Llpvb21CdXR0b25zQ29udHJvbGxlciQxQDY5M2UyYmUKICAgICAgICBtQ3VycmVudFdlYlZpZXcuZ2V0U2V0dGluZ3MoKS5zZXRCdWlsdEluWm9vbUNvbnRyb2xzKHRydWUpOwogICAgICAgIG1DdXJyZW50V2ViVmlldy5zZXRWaXNpYmlsaXR5KFZpZXcuR09ORSk7CiAgICAgICAgbUN1cnJlbnRXZWJWaWV3LnJlbW92ZUFsbFZpZXdzKCk7CiAgICAgICAgbUN1cnJlbnRXZWJWaWV3LmRlc3Ryb3koKTsKICAgICAgICBzdXBlci5vbkRlc3Ryb3koKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCB2b2lkIHNldENvbnRlbnRWaWV3KCkgewogICAgICAgIHNldENvbnRlbnRWaWV3KFIubGF5b3V0LmFjdGl2aXR5X2h0bWw1KTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCB2b2lkIG9uTmV3SW50ZW50KEludGVudCBpbnRlbnQpIHsKICAgICAgICBpZiAoaW50ZW50LmdldERhdGEoKSAhPSBudWxsKSB7CiAgICAgICAgICAgIG5hdmlnYXRlVG9VcmwoaW50ZW50LmdldERhdGFTdHJpbmcoKSk7CiAgICAgICAgfQogICAgICAgIHN1cGVyLm9uTmV3SW50ZW50KGludGVudCk7CiAgICB9CgogICAgTXlXZWJWaWV3Q2xpZW50Lk92ZXJyaWRlVXJsTG9hZExpc3RlbmVyIGxvYWRMaXN0ZW5lciA9IG5ldyBNeVdlYlZpZXdDbGllbnQuT3ZlcnJpZGVVcmxMb2FkTGlzdGVuZXIoKSB7CgogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyB2b2lkIE92ZXJyaWRlVXJsTG9hZChib29sZWFuIGZsYWcpIHsKICAgICAgICAgICAgaWYgKGZsYWcpIHsKICAgICAgICAgICAgICAgIGNsb3NlVHYuc2V0VmlzaWJpbGl0eShWaWV3LlZJU0lCTEUpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY2xvc2VUdi5zZXRWaXNpYmlsaXR5KFZpZXcuR09ORSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyB2b2lkIHNldFRpdGxlKFN0cmluZyB0aXRsZSkgewogICAgICAgIH0KICAgIH07CgogICAgLyoqCiAgICAgKiDHv9bGudix1cjtvPzFzAogICAgICovCiAgICBwcml2YXRlIHZvaWQgY2hhZ2VJbnB1dFN0YXRlKENvbnRleHQgY29udGV4dCkgewogICAgICAgIElucHV0TWV0aG9kTWFuYWdlciBpbW0gPSAoSW5wdXRNZXRob2RNYW5hZ2VyKSBjb250ZXh0CiAgICAgICAgICAgICAgICAuZ2V0U3lzdGVtU2VydmljZShDb250ZXh0LklOUFVUX01FVEhPRF9TRVJWSUNFKTsKICAgICAgICBpbW0udG9nZ2xlU29mdElucHV0KDAsIElucHV0TWV0aG9kTWFuYWdlci5ISURFX05PVF9BTFdBWVMpOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBpbml0aWFsaXplQ3VycmVudFdlYlZpZXcoKSB7CgogICAgICAgIE15V2ViVmlld0NsaWVudCB3ZWJWaWV3Q2xpZW50ID0gbmV3IE15V2ViVmlld0NsaWVudChtQ29udGV4dCwKICAgICAgICAgICAgICAgIGxvYWRMaXN0ZW5lcik7CiAgICAgICAgbUN1cnJlbnRXZWJWaWV3LnNldFdlYlZpZXdDbGllbnQod2ViVmlld0NsaWVudCk7CgogICAgICAgIG1DdXJyZW50V2ViVmlldy5zZXRXZWJDaHJvbWVDbGllbnQobmV3IGNvbS50ZW5jZW50LnNtdHQuc2RrLldlYkNocm9tZUNsaWVudCgpIHsKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIMnPtKvNvMasCiAgICAgICAgICAgICAqCiAgICAgICAgICAgICAqIEBwYXJhbSBmaWxlUGF0aENhbGxiYWNrCiAgICAgICAgICAgICAqLwogICAgICAgICAgICAvLyAzLjAtLbDmsb4KICAgICAgICAgICAgQFN1cHByZXNzV2FybmluZ3MoInVudXNlZCIpCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9wZW5GaWxlQ2hvb3NlcihWYWx1ZUNhbGxiYWNrPFVyaT4gZmlsZVBhdGhDYWxsYmFjaykgewogICAgICAgICAgICAgICAgbUZpbGVQYXRoQ2FsbGJhY2sgPSBmaWxlUGF0aENhbGxiYWNrOwogICAgICAgICAgICAgICAgY2hhZ2VJbnB1dFN0YXRlKEh0bWw1QWN0aXZpdHkudGhpcyk7CiAgICAgICAgICAgICAgICBzaG93U2VsZWN0UGhvbmUoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gwKnVueSvwMDG98nPtKvOxLz+CiAgICAgICAgICAgIC8vIDMuMCsrsOaxvgogICAgICAgICAgICBAU3VwcHJlc3NXYXJuaW5ncygidW51c2VkIikKICAgICAgICAgICAgcHVibGljIHZvaWQgb3BlbkZpbGVDaG9vc2VyKAogICAgICAgICAgICAgICAgICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJyYXd0eXBlcyIpIFZhbHVlQ2FsbGJhY2sgZmlsZVBhdGhDYWxsYmFjaywKICAgICAgICAgICAgICAgICAgICBTdHJpbmcgYWNjZXB0VHlwZSkgewogICAgICAgICAgICAgICAgbUZpbGVQYXRoQ2FsbGJhY2sgPSBmaWxlUGF0aENhbGxiYWNrOwogICAgICAgICAgICAgICAgY2hhZ2VJbnB1dFN0YXRlKEh0bWw1QWN0aXZpdHkudGhpcyk7CiAgICAgICAgICAgICAgICBzaG93U2VsZWN0UGhvbmUoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgQFN1cHByZXNzV2FybmluZ3MoInVudXNlZCIpCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9wZW5GaWxlQ2hvb3NlcihWYWx1ZUNhbGxiYWNrPFVyaT4gZmlsZVBhdGhDYWxsYmFjaywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBhY2NlcHRUeXBlLCBTdHJpbmcgY2FwdHVyZSkgewogICAgICAgICAgICAgICAgbUZpbGVQYXRoQ2FsbGJhY2sgPSBmaWxlUGF0aENhbGxiYWNrOwogICAgICAgICAgICAgICAgY2hhZ2VJbnB1dFN0YXRlKEh0bWw1QWN0aXZpdHkudGhpcyk7CiAgICAgICAgICAgICAgICBzaG93U2VsZWN0UGhvbmUoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gKzUuMAogICAgICAgICAgICBwdWJsaWMgYm9vbGVhbiBvblNob3dGaWxlQ2hvb3NlcihXZWJWaWV3IHdlYlZpZXcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlQ2FsbGJhY2s8VXJpW10+IGZpbGVQYXRoQ2FsbGJhY2ssCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZpbGVDaG9vc2VyUGFyYW1zIGZpbGVDaG9vc2VyUGFyYW1zKSB7CiAgICAgICAgICAgICAgICBtRmlsZVBhdGhDYWxsYmFja3MgPSBmaWxlUGF0aENhbGxiYWNrOwogICAgICAgICAgICAgICAgY2hhZ2VJbnB1dFN0YXRlKEh0bWw1QWN0aXZpdHkudGhpcyk7CiAgICAgICAgICAgICAgICBzaG93U2VsZWN0UGhvbmUoKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgb25Qcm9ncmVzc0NoYW5nZWQoV2ViVmlldyB2aWV3LCBpbnQgbmV3UHJvZ3Jlc3MpIHsKICAgICAgICAgICAgICAgIGludCBwcm9ncmVzcyA9IG1DdXJyZW50V2ViVmlldy5nZXRQcm9ncmVzcygpOwogICAgICAgICAgICAgICAgbVByb2dyZXNzQmFyLnNldFByb2dyZXNzKHByb2dyZXNzKTsKICAgICAgICAgICAgICAgIC8v0v6y2L34tsjM9QogICAgICAgICAgICAgICAgbVByb2dyZXNzQmFyLnNldFZpc2liaWxpdHkocHJvZ3Jlc3MgPj0gOTUgPyBWaWV3LkdPTkUgOiBWaWV3LlZJU0lCTEUpOwogICAgICAgICAgICAgICAgaWYgKG5ld1Byb2dyZXNzID49IDEwKSB7CiAgICAgICAgICAgICAgICAgICAgc3dpcGVMYXlvdXQuc2V0UmVmcmVzaGluZyhmYWxzZSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmICghc3dpcGVMYXlvdXQuaXNSZWZyZXNoaW5nKCkpCiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXBlTGF5b3V0LnNldFJlZnJlc2hpbmcodHJ1ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMgdm9pZCBvblJlY2VpdmVkSWNvbihXZWJWaWV3IHZpZXcsIEJpdG1hcCBpY29uKSB7CiAgICAgICAgICAgICAgICBzdXBlci5vblJlY2VpdmVkSWNvbih2aWV3LCBpY29uKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyBib29sZWFuIG9uQ3JlYXRlV2luZG93KFdlYlZpZXcgdmlldywgZmluYWwgYm9vbGVhbiBkaWFsb2csCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsIGJvb2xlYW4gdXNlckdlc3R1cmUsIGZpbmFsIE1lc3NhZ2UgcmVzdWx0TXNnKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMgdm9pZCBvblJlY2VpdmVkVGl0bGUoV2ViVmlldyB2aWV3LCBTdHJpbmcgdGl0bGUpIHsKICAgICAgICAgICAgICAgIHN1cGVyLm9uUmVjZWl2ZWRUaXRsZSh2aWV3LCB0aXRsZSk7CiAgICAgICAgICAgICAgICB0b29sQmFyLnNldFRpdGxlKHRpdGxlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyBib29sZWFuIG9uSnNBbGVydChXZWJWaWV3IHZpZXcsIFN0cmluZyB1cmwsIFN0cmluZyBtZXNzYWdlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWwgSnNSZXN1bHQgcmVzdWx0KSB7CiAgICAgICAgICAgICAgICBuZXcgQWxlcnREaWFsb2cuQnVpbGRlcihIdG1sNUFjdGl2aXR5LnRoaXMpCiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShtQ29udGV4dC5nZXRTdHJpbmcoUi5zdHJpbmcucHJvbXB0KSkKICAgICAgICAgICAgICAgICAgICAgICAgLnNldE1lc3NhZ2UobWVzc2FnZSkKICAgICAgICAgICAgICAgICAgICAgICAgLnNldFBvc2l0aXZlQnV0dG9uKGFuZHJvaWQuUi5zdHJpbmcub2ssCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEFsZXJ0RGlhbG9nLk9uQ2xpY2tMaXN0ZW5lcigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgb25DbGljayhEaWFsb2dJbnRlcmZhY2UgZGlhbG9nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCB3aGljaCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmNvbmZpcm0oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnNldENhbmNlbGFibGUoZmFsc2UpLmNyZWF0ZSgpLnNob3coKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyBib29sZWFuIG9uSnNDb25maXJtKFdlYlZpZXcgdmlldywgU3RyaW5nIHVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIG1lc3NhZ2UsIGZpbmFsIEpzUmVzdWx0IHJlc3VsdCkgewogICAgICAgICAgICAgICAgbmV3IEFsZXJ0RGlhbG9nLkJ1aWxkZXIoSHRtbDVBY3Rpdml0eS50aGlzKQogICAgICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUobUNvbnRleHQuZ2V0U3RyaW5nKFIuc3RyaW5nLnByb21wdCkpCiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRNZXNzYWdlKG1lc3NhZ2UpCiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQb3NpdGl2ZUJ1dHRvbihhbmRyb2lkLlIuc3RyaW5nLm9rLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBEaWFsb2dJbnRlcmZhY2UuT25DbGlja0xpc3RlbmVyKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvbkNsaWNrKERpYWxvZ0ludGVyZmFjZSBkaWFsb2csCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IHdoaWNoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuY29uZmlybSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgLnNldE5lZ2F0aXZlQnV0dG9uKGFuZHJvaWQuUi5zdHJpbmcuY2FuY2VsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBEaWFsb2dJbnRlcmZhY2UuT25DbGlja0xpc3RlbmVyKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvbkNsaWNrKERpYWxvZ0ludGVyZmFjZSBkaWFsb2csCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IHdoaWNoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuY2FuY2VsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5jcmVhdGUoKS5zaG93KCk7CgogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMgYm9vbGVhbiBvbkpzUHJvbXB0KFdlYlZpZXcgdmlldywgU3RyaW5nIHVybCwgU3RyaW5nIG1lc3NhZ2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGRlZmF1bHRWYWx1ZSwgZmluYWwgSnNQcm9tcHRSZXN1bHQgcmVzdWx0KSB7CgogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFZpZXcgbXlWaWRlb1ZpZXc7CiAgICAgICAgICAgIFZpZXcgbXlOb3JtYWxWaWV3OwogICAgICAgICAgICBJWDVXZWJDaHJvbWVDbGllbnQuQ3VzdG9tVmlld0NhbGxiYWNrIGNhbGxiYWNrOwoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIMirxsGypbfFxeTWwwogICAgICAgICAgICAgKi8KICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uU2hvd0N1c3RvbVZpZXcoVmlldyB2aWV3LCBJWDVXZWJDaHJvbWVDbGllbnQuQ3VzdG9tVmlld0NhbGxiYWNrIGNhbGxiYWNrKSB7CiAgICAgICAgICAgICAgICBzdXBlci5vblNob3dDdXN0b21WaWV3KHZpZXcsIGNhbGxiYWNrKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfQoKICAgIC8vILX308PPtc2zz+C7+iDWuLaoyuSz9s7EvP4KICAgIHByaXZhdGUgRmlsZSBwaWNGaWxlOwogICAgLy8gtffTw8+1zbPP4Lv6INa4tqjK5LP2zsS8/rXEIFVyaQogICAgcHJpdmF0ZSBVcmkgcGljRmlsZVVyaTsKICAgIC8vIMXEyePNvMasILe1u9jC6wogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgQ0FNRVJBID0gMTAwMDsKICAgIC8vINGh1PHNvMasILe1u9jC6wogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgU0VMRUNUX1BIT1RPID0gMzAwMDsKICAgIC8vIM28xqwgwODQzQogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgVFlQRV9QSE9UTyA9ICJpbWFnZS8qIjsKCiAgICBjb20uZ2RtbS5saWIuZGlhbG9nLk9uQ2xpY2tMaXN0ZW5lciBsaXN0ZW5lciA9IG5ldyBjb20uZ2RtbS5saWIuZGlhbG9nLk9uQ2xpY2tMaXN0ZW5lcigpIHsKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9pZCBvbkNsaWNrKERpYWxvZ1BsdXMgZGlhbG9nLCBWaWV3IHZpZXcpIHsKICAgICAgICAgICAgc3dpdGNoICh2aWV3LmdldElkKCkpIHsKICAgICAgICAgICAgICAgIGNhc2UgUi5pZC5kaWFsb2dfdGFrZV9waWN0dXJlOgogICAgICAgICAgICAgICAgICAgIGRpYWxvZy5kaXNtaXNzKCk7CiAgICAgICAgICAgICAgICAgICAgQWNwLmdldEluc3RhbmNlKG1Db250ZXh0KS5yZXF1ZXN0KG5ldyBBY3BPcHRpb25zLkJ1aWxkZXIoKS5zZXRQZXJtaXNzaW9ucyhNYW5pZmVzdC5wZXJtaXNzaW9uLkNBTUVSQSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hbmlmZXN0LnBlcm1pc3Npb24uVklCUkFURSkuYnVpbGQoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBBY3BMaXN0ZW5lcigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvbkdyYW50ZWQoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdF9mbGFnID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlblN5c3RlbUNhbWVyYSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgb25EZW5pZWQoTGlzdDxTdHJpbmc+IHBlcm1pc3Npb25zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRvYXN0VXRpbC5zaG93U2hvcnRUb2FzdChwZXJtaXNzaW9ucy50b1N0cmluZygpICsgIsioz96+3L74Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIFIuaWQuZGlhbG9nX2dhbGxlcnk6CiAgICAgICAgICAgICAgICAgICAgZGlhbG9nLmRpc21pc3MoKTsKICAgICAgICAgICAgICAgICAgICBzZWxlY3RfZmxhZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgbVByZXNlbnRlci5zZWxlY3RQaWN0dXJlKCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIFIuaWQuc2hvcF90ZWxsX2NhbmNlbF90djoKICAgICAgICAgICAgICAgICAgICBkaWFsb2cuZGlzbWlzcygpOwogICAgICAgICAgICAgICAgICAgIHNlbGVjdF9mbGFnID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgY29tLmdkbW0ubGliLmRpYWxvZy5PbkRpc21pc3NMaXN0ZW5lciBkaXNtaXNzTGlzdGVuZXIgPSBuZXcgY29tLmdkbW0ubGliLmRpYWxvZy5PbkRpc21pc3NMaXN0ZW5lcigpIHsKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9pZCBvbkRpc21pc3MoRGlhbG9nUGx1cyBkaWFsb2cpIHsKICAgICAgICAgICAgaXNTZWxlY3RlZCA9IGZhbHNlOwogICAgICAgICAgICBoYW5kbGVQb3BXaW5kb3coKTsKICAgICAgICB9CiAgICB9OwoKICAgIHByaXZhdGUgdm9pZCBzaG93U2VsZWN0UGhvbmUoKSB7CiAgICAgICAgbVByZXNlbnRlci5zaG93U2VsZWN0UGhvdG8obGlzdGVuZXIsIGRpc21pc3NMaXN0ZW5lcik7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIG9wZW5TeXN0ZW1DYW1lcmEoKSB7CiAgICAgICAgSW50ZW50IHRha2VQaWN0dXJlSW50ZW50ID0gbmV3IEludGVudChNZWRpYVN0b3JlLkFDVElPTl9JTUFHRV9DQVBUVVJFKTsKICAgICAgICBpZiAodGFrZVBpY3R1cmVJbnRlbnQucmVzb2x2ZUFjdGl2aXR5KG1Db250ZXh0LmdldFBhY2thZ2VNYW5hZ2VyKCkpICE9IG51bGwpIHsKICAgICAgICAgICAgcGljRmlsZSA9IG51bGw7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBwaWNGaWxlID0gbVByZXNlbnRlci5jcmVhdGVJbWFnZUZpbGUoKTsKICAgICAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gZXgpIHsKICAgICAgICAgICAgICAgIGV4LnByaW50U3RhY2tUcmFjZSgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAocGljRmlsZSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBwaWNGaWxlVXJpID0gRmlsZVByb3ZpZGVyLmdldFVyaUZvckZpbGUobUNvbnRleHQsIENvbnN0YW50cy5BVVRIT1JJVElFUywgcGljRmlsZSk7CiAgICAgICAgICAgICAgICB0YWtlUGljdHVyZUludGVudC5wdXRFeHRyYShNZWRpYVN0b3JlLkVYVFJBX09VVFBVVCwgcGljRmlsZVVyaSk7CiAgICAgICAgICAgICAgICBzdGFydEFjdGl2aXR5Rm9yUmVzdWx0KHRha2VQaWN0dXJlSW50ZW50LCBDb25zdGFudHMuUkVRVUVTVF9UQUtFX1BIT1RPKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIGlzU2VsZWN0ZWQ6yse38dPQzbzGrHVyaSBzZWxlY3RfZmxhZzrKx7fxteO798HLta+/8rXE0aHU8c28xqywtMWlCiAgICAgKi8KICAgIGJvb2xlYW4gaXNTZWxlY3RlZCA9IGZhbHNlLCBzZWxlY3RfZmxhZyA9IGZhbHNlOwoKICAgIHByaXZhdGUgdm9pZCBoYW5kbGVQb3BXaW5kb3coKSB7CgogICAgICAgIGlmIChpc1NlbGVjdGVkKSB7CiAgICAgICAgICAgIGlmIChtRmlsZVBhdGhDYWxsYmFjayAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBtRmlsZVBhdGhDYWxsYmFjay5vblJlY2VpdmVWYWx1ZSh1cmkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChtRmlsZVBhdGhDYWxsYmFja3MgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgbUZpbGVQYXRoQ2FsbGJhY2tzLm9uUmVjZWl2ZVZhbHVlKG5ldyBVcmlbXXt1cml9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpc1NlbGVjdGVkID0gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKHNlbGVjdF9mbGFnKSB7CiAgICAgICAgICAgICAgICBzZWxlY3RfZmxhZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChtRmlsZVBhdGhDYWxsYmFjayAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBtRmlsZVBhdGhDYWxsYmFjay5vblJlY2VpdmVWYWx1ZShudWxsKTsKICAgICAgICAgICAgICAgIG1GaWxlUGF0aENhbGxiYWNrID0gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobUZpbGVQYXRoQ2FsbGJhY2tzICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIG1GaWxlUGF0aENhbGxiYWNrcy5vblJlY2VpdmVWYWx1ZShudWxsKTsKICAgICAgICAgICAgICAgIG1GaWxlUGF0aENhbGxiYWNrcyA9IG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgVXJpIHVyaTsKCiAgICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCB2b2lkIG9uQWN0aXZpdHlSZXN1bHQoaW50IHJlcXVlc3RDb2RlLCBpbnQgcmVzdWx0Q29kZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW50ZW50IGludGVudCkgewogICAgICAgIGlmIChyZXF1ZXN0Q29kZSA9PSBMT0dJTl9SRVNVTFRDT0RFKSB7CiAgICAgICAgICAgIGlmIChyZXN1bHRDb2RlID09IEFjdGl2aXR5LlJFU1VMVF9PSyAmJiBjYWxsYmFjayAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjay5vbkxvZ2luKCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2FsbGJhY2sgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgY2FsbGJhY2sub25DYW5jZWwoKTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChyZXN1bHRDb2RlID09IEFjdGl2aXR5LlJFU1VMVF9PSykgewogICAgICAgICAgICAgICAgaWYgKHJlcXVlc3RDb2RlID09IENvbnN0YW50cy5SRVFVRVNUX1RBS0VfUEhPVE8pIHsKICAgICAgICAgICAgICAgICAgICB1cmkgPSBwaWNGaWxlVXJpOwogICAgICAgICAgICAgICAgICAgIGlzU2VsZWN0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXF1ZXN0Q29kZSA9PSBTRUxFQ1RfUEhPVE8pIHsKICAgICAgICAgICAgICAgICAgICAvLyC78cihz7XNs8/gsuHNvMastcR1cmkKICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBpbnRlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdXJpID0gaW50ZW50LmdldERhdGEoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaXNTZWxlY3RlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdENvZGUgPT0gUkVTVUxUX0NBTkNFTEVEKSB7CiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBtRmlsZVBhdGhDYWxsYmFjaykgewogICAgICAgICAgICAgICAgICAgIG1GaWxlUGF0aENhbGxiYWNrLm9uUmVjZWl2ZVZhbHVlKG51bGwpOwogICAgICAgICAgICAgICAgICAgIG1GaWxlUGF0aENhbGxiYWNrID0gbnVsbDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBtRmlsZVBhdGhDYWxsYmFja3MpIHsKICAgICAgICAgICAgICAgICAgICBtRmlsZVBhdGhDYWxsYmFja3Mub25SZWNlaXZlVmFsdWUobnVsbCk7CiAgICAgICAgICAgICAgICAgICAgbUZpbGVQYXRoQ2FsbGJhY2tzID0gbnVsbDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaGFuZGxlUG9wV2luZG93KCk7CiAgICAgICAgfQoKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBib29sZWFuIG9uS2V5TG9uZ1ByZXNzKGludCBrZXlDb2RlLCBLZXlFdmVudCBldmVudCkgewoKICAgICAgICBzd2l0Y2ggKGtleUNvZGUpIHsKICAgICAgICAgICAgY2FzZSBLZXlFdmVudC5LRVlDT0RFX0JBQ0s6CiAgICAgICAgICAgICAgICB0aGlzLm1vdmVUYXNrVG9CYWNrKHRydWUpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIub25LZXlMb25nUHJlc3Moa2V5Q29kZSwgZXZlbnQpOwogICAgICAgIH0KICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBib29sZWFuIG9uS2V5VXAoaW50IGtleUNvZGUsIEtleUV2ZW50IGV2ZW50KSB7CgogICAgICAgIHN3aXRjaCAoa2V5Q29kZSkgewogICAgICAgICAgICBjYXNlIEtleUV2ZW50LktFWUNPREVfQkFDSzoKICAgICAgICAgICAgICAgIGhhbmRsZXJCYWNrKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKCiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIub25LZXlVcChrZXlDb2RlLCBldmVudCk7CiAgICAgICAgfQogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIHZvaWQgb25QYXVzZSgpIHsKICAgICAgICBpZihtQ3VycmVudFdlYlZpZXchPW51bGwpewogICAgICAgICAgICBtQ3VycmVudFdlYlZpZXcucG9zdChuZXcgUnVubmFibGUoKSB7CiAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsKICAgICAgICAgICAgICAgICAgICBtQ3VycmVudFdlYlZpZXcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5sb2FkVXJsKCJqYXZhc2NyaXB0OmRpZEFwcGVhcignMCcpIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBzdXBlci5vblBhdXNlKCk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQgdm9pZCBvblJlc3VtZSgpIHsKICAgICAgICBpZiAoaXNDcmVhdGUgJiYgbUN1cnJlbnRXZWJWaWV3ICE9IG51bGwpIHsKICAgICAgICAgICAgbUN1cnJlbnRXZWJWaWV3LnBvc3QobmV3IFJ1bm5hYmxlKCkgewogICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7CiAgICAgICAgICAgICAgICAgICAgbUN1cnJlbnRXZWJWaWV3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubG9hZFVybCgiamF2YXNjcmlwdDpkaWRBcHBlYXIoJzEnKSIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgc3VwZXIub25SZXN1bWUoKTsKICAgICAgICBtUHJlc2VudGVyLmdldEhhc01lc3NhZ2UoKTsKICAgICAgICBpZiAoaXNBcmVhKSB7CiAgICAgICAgICAgIG1QcmVzZW50ZXIuZ2V0U2hvcHBpbmdDYXJ0TnVtKCk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogzqrBy8XQts9qc7X308PKsbzkvOS49KOsvOS49Myrtsyyu8jDstnX96Oot8DWubX308PBvbTOs/bP1rTyv6rBvbTO0rPD5qOpCiAgICAgKi8KICAgIHByaXZhdGUgbG9uZyBzdGFydFRpbWUgPSAwOwogICAgcHJpdmF0ZSBsb25nIHN0b3BUaW1lOwoKICAgIHB1YmxpYyBjbGFzcyBXZWJ2aWV3VXRpbCB7CiAgICAgICAgLyoqCiAgICAgICAgICogbGlua3R5cGUgwbS908Dg0M2jrDHE2sG0IDDN4sG0IGxpbmt1cmwgyOe5+8rHzeLBtNPDtMu0pnVybMG0vdMgbGlua21vZHVsZQogICAgICAgICAqIMjnufvKx8TawbSjrMG0vdPM+NeqtcTEo7/pseC6xTE618rRtiAyOsq1u90gMzq+q9GhIDQ6yefH+CA1OrHjw/EgNjq547KlIDc6xcTC9CByZXNvdXJjZWlkCiAgICAgICAgICogyOe5+8rHxNrBtKOswbS908z416q1xMSjv+m1xNfK1LRpZCAosePD8brNueOypcO709DXytS0aWQpIGxpbmt0byDI57n7ysfE2sG0sqLH0tPQ18rUtGlko6zV4sDvvva2qMG0vdPA4NDNo6wxo7rXytS0wdCx7dKzCiAgICAgICAgICogMjrXytS0z+rH6dKzICjWu9PQyrW73brNvqvRodPQ18rUtMHQse3SsykKICAgICAgICAgKi8KICAgICAgICBASmF2YXNjcmlwdEludGVyZmFjZQogICAgICAgIHB1YmxpYyB2b2lkIGxpbmtUb0FuZHJvaWQoU3RyaW5nIGxpbmt0eXBlLCBTdHJpbmcgbGlua3VybCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBsaW5rbW9kdWxlLCBTdHJpbmcgcmVzb3VyY2VpZCwgU3RyaW5nIGxpbmt0bykgewogICAgICAgICAgICBBZEluZm8gYWRJdGVtID0gbmV3IEFkSW5mbygpOwogICAgICAgICAgICBhZEl0ZW0uc2V0TGlua1R5cGUobGlua3R5cGUpOwogICAgICAgICAgICBhZEl0ZW0uc2V0TGlua1VybChsaW5rdXJsKTsKICAgICAgICAgICAgaWYgKCFUZXh0VXRpbHMuaXNFbXB0eShsaW5rbW9kdWxlKSAmJiAhInVuZGVmaW5lZCIuZXF1YWxzKGxpbmttb2R1bGUpKSB7CiAgICAgICAgICAgICAgICBhZEl0ZW0uc2V0TGlua01vZGlkKEludGVnZXIucGFyc2VJbnQobGlua21vZHVsZSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGFkSXRlbS5zZXRSZXNvdXJjZUlkKHJlc291cmNlaWQpOwogICAgICAgICAgICBhZEl0ZW0uc2V0TGlua1RvKGxpbmt0byk7CiAgICAgICAgICAgIE5hdmlnYXRpb25VdGlsLnRvQ29tbW9uQWQobUNvbnRleHQsIGFkSXRlbSk7CiAgICAgICAgfQoKICAgICAgICBASmF2YXNjcmlwdEludGVyZmFjZQogICAgICAgIHB1YmxpYyB2b2lkIGxpbmtUb0J1eUFuZHJvaWQoU3RyaW5nIGxpbmt0eXBlLCBTdHJpbmcgbGlua3VybCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBsaW5rbW9kdWxlLCBTdHJpbmcgcmVzb3VyY2VpZCwgU3RyaW5nIGxpbmt0bywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBpdGVtY291bnQpIHsKICAgICAgICAgICAgQWRJbmZvIGFkSXRlbSA9IG5ldyBBZEluZm8oKTsKICAgICAgICAgICAgYWRJdGVtLnNldExpbmtUeXBlKGxpbmt0eXBlKTsKICAgICAgICAgICAgYWRJdGVtLnNldExpbmtVcmwobGlua3VybCk7CiAgICAgICAgICAgIGlmICghVGV4dFV0aWxzLmlzRW1wdHkobGlua21vZHVsZSkgJiYgISJ1bmRlZmluZWQiLmVxdWFscyhsaW5rbW9kdWxlKSkgewogICAgICAgICAgICAgICAgYWRJdGVtLnNldExpbmtNb2RpZChJbnRlZ2VyLnBhcnNlSW50KGxpbmttb2R1bGUpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBhZEl0ZW0uc2V0UmVzb3VyY2VJZChyZXNvdXJjZWlkKTsKICAgICAgICAgICAgYWRJdGVtLnNldExpbmtUbyhsaW5rdG8pOwogICAgICAgICAgICBhZEl0ZW0uc2V0SXRlbWNvdW50KGl0ZW1jb3VudCk7CiAgICAgICAgICAgIE5hdmlnYXRpb25VdGlsLnRvQ29tbW9uQWQobUNvbnRleHQsIGFkSXRlbSk7CiAgICAgICAgfQoKICAgICAgICBASmF2YXNjcmlwdEludGVyZmFjZQogICAgICAgIHB1YmxpYyB2b2lkIG5lZWRVaWRmcm9tQW5kcm9pZCgpIHsKICAgICAgICAgICAgaWYgKExvZ2luTWFuYWdlci5jaGVja0xvZ2luU3RhdGUoKSYmbUN1cnJlbnRXZWJWaWV3IT1udWxsKSB7CiAgICAgICAgICAgICAgICBtQ3VycmVudFdlYlZpZXcucG9zdChuZXcgUnVubmFibGUoKSB7CiAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgewogICAgICAgICAgICAgICAgICAgICAgICBtQ3VycmVudFdlYlZpZXcubG9hZFVybCgiamF2YXNjcmlwdDpnZXRVaWQoJyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIExvZ2luTWFuYWdlci5nZXRVaWQoKSArICInKSIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGJhY2tGbGFnID0gdHJ1ZTsKICAgICAgICAgICAgICAgIE5hdmlnYXRpb25VdGlsLnRvTG9naW4oKEFjdGl2aXR5KSBtQ29udGV4dCwgMTQ0NDQpOwogICAgICAgICAgICB9CgogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogxr2wstL40NC72LX3CiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gcmVzQ29kZQogICAgICAgICAqLwogICAgICAgIEBKYXZhc2NyaXB0SW50ZXJmYWNlCiAgICAgICAgcHVibGljIHZvaWQgdG9QaW5nQW5QYXlSZXNwb25zZShTdHJpbmcgcmVzQ29kZSkgewogICAgICAgICAgICBpZiAocmVzQ29kZS5lcXVhbHMoIjAiKSkgewogICAgICAgICAgICAgICAgLy8gyqew3AogICAgICAgICAgICAgICAgZmluaXNoKCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzQ29kZS5lcXVhbHMoIjEiKSkgewogICAgICAgICAgICAgICAgLy8gs8m5pgogICAgICAgICAgICAgICAgc2V0UmVzdWx0KFBJTkdBTl9QQVlfU1VDQ0VTUyk7CiAgICAgICAgICAgICAgICBmaW5pc2goKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogxanStdL40NC72LX3CiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gcmVzQ29kZQogICAgICAgICAqLwogICAgICAgIEBKYXZhc2NyaXB0SW50ZXJmYWNlCiAgICAgICAgcHVibGljIHZvaWQgdG9BQkNQYXlSZXNwb25zZShTdHJpbmcgcmVzQ29kZSkgewogICAgICAgICAgICBJbnRlbnQgaW50ZW50ID0gbmV3IEludGVudCgpOwogICAgICAgICAgICBpZiAocmVzQ29kZS5lcXVhbHMoIjAiKSkgewogICAgICAgICAgICAgICAgaW50ZW50LnB1dEV4dHJhKCJvcmRlcl9pZCIsIG9yZGVySWQpOwogICAgICAgICAgICAgICAgc2V0UmVzdWx0KEFCQ19QQVlfRVJST1IsIGludGVudCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzQ29kZS5lcXVhbHMoIjEiKSkgewogICAgICAgICAgICAgICAgLy8gs8m5pgogICAgICAgICAgICAgICAgaW50ZW50LnB1dEV4dHJhKCJvcmRlcl9pZCIsIG9yZGVySWQpOwogICAgICAgICAgICAgICAgc2V0UmVzdWx0KEFCQ19QQVlfU1VDQ0VTUywgaW50ZW50KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmaW5pc2goKTsKICAgICAgICB9CgogICAgICAgIEBKYXZhc2NyaXB0SW50ZXJmYWNlCiAgICAgICAgcHVibGljIHZvaWQgdG9CT0NQYXlSZXNwb25zZShTdHJpbmcgcmVzQ29kZSkgewogICAgICAgICAgICBMb2dnZXIuZCgicmVzQ29kZSA6IiArIHJlc0NvZGUgKyAiLG9yZGVySWQgPSIgKyBvcmRlcklkKTsKICAgICAgICAgICAgSW50ZW50IGludGVudCA9IG5ldyBJbnRlbnQoKTsKICAgICAgICAgICAgaWYgKHJlc0NvZGUuZXF1YWxzKCIwIikpIHsKICAgICAgICAgICAgICAgIGludGVudC5wdXRFeHRyYSgib3JkZXJfaWQiLCBvcmRlcklkKTsKICAgICAgICAgICAgICAgIHNldFJlc3VsdChCT0NfUEFZX0VSUk9SLCBpbnRlbnQpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHJlc0NvZGUuZXF1YWxzKCIxIikpIHsKICAgICAgICAgICAgICAgIC8vILPJuaYKICAgICAgICAgICAgICAgIGludGVudC5wdXRFeHRyYSgib3JkZXJfaWQiLCBvcmRlcklkKTsKICAgICAgICAgICAgICAgIHNldFJlc3VsdChCT0NfUEFZX1NVQ0NFU1MsIGludGVudCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZmluaXNoKCk7CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBIVE1MNdKzw+a0+sDtx+vH87XEanMKICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSByZXFJZCAgICAgICDH68fztcSx6sq2SUQKICAgICAgICAgKiBAcGFyYW0gcmVxVXJsICAgICAgx+vH87XEVVJMCiAgICAgICAgICogQHBhcmFtIGlzTmVlZExvZ2luILHtyr7Kx7fx0qrH82FwcCC2y7XHwrzTw7unuvPU2da00NC0+sDtx+vH86OsMbHtyr7Q6NKqtcfCvKOsMLHtyr6yu9Do0qq1x8K8CiAgICAgICAgICogQHBhcmFtIHBhcmFtZXJzICAgIHOx7cq+x+vH87XEss7K/bXEanNvbnN0cmluZ9DOyr0KICAgICAgICAgKiBAcGFyYW0gZW5jb2RldHlwZSAgZW5jb2RldHlwZbHtyr6yzsr9tK61xNfWt/vXqruvt73KvaOs1rXT0MG91tYgYmFzZTY0LHVybGVuY29kZaO7tKu/1da1xKzIz2Jhc2U2NL3iwusKICAgICAgICAgKiBAcGFyYW0gcG9zUGFyYW0gICAg0OjSqrzTw9y1xLLOyv3Ou9bDIM6qv9W0+rHtsru808PcCiAgICAgICAgICogQHBhcmFtIGVuY3J5cHRUeXBlILzTw9y1xLe9yr0gzqq/1bT6se3ErMjPM2Rlc7zTw9wKICAgICAgICAgKi8KICAgICAgICBASmF2YXNjcmlwdEludGVyZmFjZQogICAgICAgIHB1YmxpYyB2b2lkIHRvSHRtbDVBZ2VudFJlcXVlc3RKcyhTdHJpbmcgcmVxSWQsIFN0cmluZyByZXFVcmwsIFN0cmluZyBpc05lZWRMb2dpbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIHBhcmFtZXJzLCBTdHJpbmcgZW5jb2RldHlwZSwgU3RyaW5nIHBvc1BhcmFtLCBTdHJpbmcgZW5jcnlwdFR5cGUpIHsKICAgICAgICAgICAgLy8gzai5/XJlcVVybMiltffTw73Tv9oKICAgICAgICAgICAgYWdlbnRSZXFJZCA9IHJlcUlkOwogICAgICAgICAgICBhZ2VudFBhcmFtZXJzID0gcGFyYW1lcnM7CiAgICAgICAgICAgIGFnZW50RW5jb2RldHlwZSA9IGVuY29kZXR5cGU7CiAgICAgICAgICAgIGFnZW50UmVxVXJsID0gcmVxVXJsOwogICAgICAgICAgICBhZ2VudFBvc1BhcmFtID0gcG9zUGFyYW07CiAgICAgICAgICAgIGFnZW50RW5jcnlwdFR5cGUgPSBlbmNyeXB0VHlwZTsKICAgICAgICAgICAgaWYgKGNhbGxiYWNrID09IG51bGwpIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gbmV3IExvZ2luQ2FsbGJhY2soKSB7CiAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgb25Mb2dpbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIF9wYXJhbWVycyA9IGdldFBhcmFtcyhhZ2VudFBhcmFtZXJzLCBhZ2VudEVuY29kZXR5cGUpOwogICAgICAgICAgICAgICAgICAgICAgICBtUHJlc2VudGVyLnNlbmRBZ2VudFJlcXVlc3QoYWdlbnRSZXFVcmwsIF9wYXJhbWVycywgYWdlbnRQb3NQYXJhbSwgYWdlbnRFbmNyeXB0VHlwZSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvbkNhbmNlbCgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1DdXJyZW50V2ViVmlldyAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtQ3VycmVudFdlYlZpZXcubG9hZFVybCgiamF2YXNjcmlwdDphZ2VudHJlc3BvbnNlZnJvbWFwcCgnIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGFnZW50UmVxSWQgKyAiJywnbm90bG9naW4nKSIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCIxIi5lcXVhbHMoaXNOZWVkTG9naW4pICYmICFMb2dpbk1hbmFnZXIuY2hlY2tMb2dpblN0YXRlKCkpIHsKICAgICAgICAgICAgICAgIE5hdmlnYXRpb25VdGlsLnRvTG9naW4oKEFjdGl2aXR5KSBtQ29udGV4dCwgTE9HSU5fUkVTVUxUQ09ERSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjay5vbkxvZ2luKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIEBKYXZhc2NyaXB0SW50ZXJmYWNlCiAgICAgICAgcHVibGljIHZvaWQgdG9IdG1sNUFnZW50UmVxdWVzdEpzKFN0cmluZyByZXFJZCwgZmluYWwgU3RyaW5nIHJlcVVybCwgU3RyaW5nIGlzTmVlZExvZ2luLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbCBTdHJpbmcgcGFyYW1lcnMsIGZpbmFsIFN0cmluZyBlbmNvZGV0eXBlKSB7CiAgICAgICAgICAgIHRvSHRtbDVBZ2VudFJlcXVlc3RKcyhyZXFJZCwgcmVxVXJsLCBpc05lZWRMb2dpbiwgcGFyYW1lcnMsIGVuY29kZXR5cGUsIG51bGwsIG51bGwpOwogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogSFRNTDXSs8Pmt9bP7Wpzt723qAogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHRpdGxlICAgICC31s/tserM4gogICAgICAgICAqIEBwYXJhbSBjb250ZW50ICAgt9bP7cTayN0KICAgICAgICAgKiBAcGFyYW0gX3VybCAgICAgILfWz+3BtL3TCiAgICAgICAgICogQHBhcmFtIGltZ3VybCAgICC31s/tzbzGrHVybAogICAgICAgICAqIEBwYXJhbSBzaGFyZXR5cGUgt9bP7cDg0M0gxfPT0cimL7rD09EKICAgICAgICAgKi8KICAgICAgICBASmF2YXNjcmlwdEludGVyZmFjZQogICAgICAgIHB1YmxpYyB2b2lkIHRvSHRtbDVTaGFyZUpzKFN0cmluZyBfYWN0aW9uTnVtYmVyLCBTdHJpbmcgdGl0bGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGNvbnRlbnQsIFN0cmluZyBfdXJsLCBTdHJpbmcgaW1ndXJsLCBTdHJpbmcgc2hhcmV0eXBlKSB7CiAgICAgICAgICAgIGlmICghTG9naW5NYW5hZ2VyLmNoZWNrTG9naW5TdGF0ZSgpKSB7CiAgICAgICAgICAgICAgICBOYXZpZ2F0aW9uVXRpbC50b0xvZ2luKChBY3Rpdml0eSkgbUNvbnRleHQsIDEwMDEpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIFdYRW50cnlBY3Rpdml0eS5pc0h0bWw1SnNTaGFyZSA9IHRydWU7CiAgICAgICAgICAgIGFjdGlvbk51bWJlciA9IF9hY3Rpb25OdW1iZXI7CiAgICAgICAgICAgIG1QcmVzZW50ZXIudG9IdG1sNVNoYXJlSnModGl0bGUsIGNvbnRlbnQsIF91cmwsIGltZ3VybCwgc2hhcmV0eXBlKTsKCiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBodG1sNSB2aWRlsqW3xcqxLNTdzaPG5Mv7sqW3xaOstffTw7TLt723qAogICAgICAgICAqLwogICAgICAgIEBKYXZhc2NyaXB0SW50ZXJmYWNlCiAgICAgICAgcHVibGljIHZvaWQgdmlkZW9vbnBsYXlpbmcoKSB7CiAgICAgICAgICAgIFN0YXJ0QW5kU3RvcEV2ZW50IHN0YXJ0QW5kU3RvcEV2ZW50ID0gbmV3IFN0YXJ0QW5kU3RvcEV2ZW50KCk7CiAgICAgICAgICAgIHN0YXJ0QW5kU3RvcEV2ZW50LnNldFN0YXJ0QW5kU3RvcFBsYXkoZmFsc2UpOwogICAgICAgICAgICBSeEJ1cy5nZXRJbnN0YW5jZSgpLnNlbmQoc3RhcnRBbmRTdG9wRXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogyejWw8rHt/G/ydLUy6LQwgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIF9pc1JlZnJlc2ggobAxobHKsbHtyr608r+qy6LQwrmmxNyjrM6qobAwobHKsbHtyr652LHVy6LQwrmmxNwKICAgICAgICAgKi8KICAgICAgICBASmF2YXNjcmlwdEludGVyZmFjZQogICAgICAgIHB1YmxpYyB2b2lkIHNldElzUmVmcmVzaChTdHJpbmcgX2lzUmVmcmVzaCkgewogICAgICAgICAgICBpZiAoIjEiLmVxdWFscyhfaXNSZWZyZXNoKSkgewogICAgICAgICAgICAgICAgaXNSZWZyZXNoID0gdHJ1ZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlzUmVmcmVzaCA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChzd2lwZUxheW91dCAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBzd2lwZUxheW91dC5zZXRNeVJlZnJlc2goaXNSZWZyZXNoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogyejWw2h0bWw1t9bP7bXExNrI3QogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHRpdGxlICAgILfWz+21xLHqzOIKICAgICAgICAgKiBAcGFyYW0gY29udGVudCAgt9bP7cTayN0KICAgICAgICAgKiBAcGFyYW0gaW1nVXJsICAgt9bP7c28xqy12Na3CiAgICAgICAgICogQHBhcmFtIHNoYXJlVXJsILfWz+11cgogICAgICAgICAqLwogICAgICAgIEBKYXZhc2NyaXB0SW50ZXJmYWNlCiAgICAgICAgcHVibGljIHZvaWQgc2V0SHRtbDVTaGFyZUNvbnRlbnQoU3RyaW5nIHRpdGxlLCBTdHJpbmcgY29udGVudCwgU3RyaW5nIGltZ1VybCwgU3RyaW5nIHNoYXJlVXJsKSB7CiAgICAgICAgICAgIGlmIChUZXh0VXRpbHMuaXNFbXB0eSh0aXRsZSkgfHwgInVuZGVmaW5lZCIuZXF1YWxzKHRpdGxlKSkgewogICAgICAgICAgICAgICAgaHRtbDVJdGVtID0gbnVsbDsKLy8gICAgICAgICAgICAgICAgbUhhbmRsZXIuc2VuZEVtcHR5TWVzc2FnZSgwKTsKICAgICAgICAgICAgICAgIGlzU2hhcmVWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KLy8gICAgICAgICAgICBtSGFuZGxlci5zZW5kRW1wdHlNZXNzYWdlKDEpOwogICAgICAgICAgICBpc1NoYXJlVmlzaWJsZSA9IHRydWU7CgogICAgICAgICAgICBpZiAoaHRtbDVJdGVtID09IG51bGwpIHsKICAgICAgICAgICAgICAgIGh0bWw1SXRlbSA9IG5ldyBIdG1sNVNoYXJlSXRlbSgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBodG1sNUl0ZW0uc2V0VGl0bGUodGl0bGUpOwogICAgICAgICAgICBodG1sNUl0ZW0uc2V0Q29udGVudChjb250ZW50KTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGh0bWw1SXRlbS5zZXRJbWdVcmwoVVJMRGVjb2Rlci5kZWNvZGUoaW1nVXJsLCAiVVRGLTgiKSk7CiAgICAgICAgICAgICAgICBodG1sNUl0ZW0uc2V0U2hhcmVVcmwoVVJMRGVjb2Rlci5kZWNvZGUoc2hhcmVVcmwsICJVVEYtOCIpKTsKICAgICAgICAgICAgfSBjYXRjaCAoVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpOwogICAgICAgICAgICB9CgogICAgICAgIH0KCiAgICAgICAgQEphdmFzY3JpcHRJbnRlcmZhY2UKICAgICAgICBwdWJsaWMgdm9pZCBnZXRIdG1sNVNoYXJlQ29udGVudCgpIHsKICAgICAgICAgICAgTWFwPFN0cmluZywgT2JqZWN0PiBtYXAgPSBuZXcgSGFzaE1hcDxTdHJpbmcsIE9iamVjdD4oKTsKICAgICAgICAgICAgaWYgKGh0bWw1SXRlbSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBtYXAucHV0KCJ0aXRsZSIsIGh0bWw1SXRlbS5nZXRUaXRsZSgpKTsKICAgICAgICAgICAgICAgIG1hcC5wdXQoImNvbnRlbnQiLCBodG1sNUl0ZW0uZ2V0Q29udGVudCgpKTsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbWFwLnB1dCgiaW1nVXJsIiwgVVJMRW5jb2Rlci5lbmNvZGUoaHRtbDVJdGVtLmdldEltZ1VybCgpLCAiVVRGLTgiKSk7CiAgICAgICAgICAgICAgICAgICAgbWFwLnB1dCgic2hhcmVVcmwiLCBVUkxFbmNvZGVyLmVuY29kZShodG1sNUl0ZW0uZ2V0U2hhcmVVcmwoKSwgIlVURi04IikpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmaW5hbCBTdHJpbmcganNvbiA9IG5ldyBHc29uKCkudG9Kc29uKG1hcCk7CgogICAgICAgICAgICBpZihtQ3VycmVudFdlYlZpZXchPW51bGwpewogICAgICAgICAgICAgICAgbUN1cnJlbnRXZWJWaWV3LnBvc3QobmV3IFJ1bm5hYmxlKCkgewogICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIHBhcmFtID0gImphdmFzY3JpcHQ6Y2F0Y2hTaGFyZU1vZGVsRnJvbUFwcCgnIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsganNvbiArICInKSI7CiAgICAgICAgICAgICAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldy5sb2FkVXJsKHBhcmFtKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICB9CgoKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgcmVnaXN0ZXJCcm9hZGNhc3QoKSB7CiAgICAgICAgSW50ZW50RmlsdGVyIGludGVudEZpbHRlciA9IG5ldyBJbnRlbnRGaWx0ZXIoKTsKICAgICAgICBpbnRlbnRGaWx0ZXIuYWRkQWN0aW9uKENvbnN0YW50cy5BY3Rpb24uTE9HSU5fQUNUSU9OKTsKICAgICAgICByZWdpc3RlclJlY2VpdmVyKGRvVWlkUmVjZWl2ZXIsIGludGVudEZpbHRlcik7CiAgICB9CgogICAgQnJvYWRjYXN0UmVjZWl2ZXIgZG9VaWRSZWNlaXZlciA9IG5ldyBCcm9hZGNhc3RSZWNlaXZlcigpIHsKCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIHZvaWQgb25SZWNlaXZlKENvbnRleHQgY29udGV4dCwgSW50ZW50IGludGVudCkgewogICAgICAgICAgICBTdHJpbmcgYWN0aW9uID0gaW50ZW50LmdldEFjdGlvbigpOwogICAgICAgICAgICBpZiAoYWN0aW9uLmVxdWFscyhDb25zdGFudHMuQWN0aW9uLkxPR0lOX0FDVElPTikmJm1DdXJyZW50V2ViVmlldyE9bnVsbCkgewogICAgICAgICAgICAgICAgbUN1cnJlbnRXZWJWaWV3LnBvc3QobmV3IFJ1bm5hYmxlKCkgewogICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbUN1cnJlbnRXZWJWaWV3LmxvYWRVcmwoImphdmFzY3JpcHQ6Z2V0VWlkKCciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBMb2dpbk1hbmFnZXIuZ2V0VWlkKCkgKyAiJykiKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICB9OwoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgc2hhcmVXeEZyaWVuZCgpIHsKICAgICAgICBpZiAoaHRtbDVJdGVtID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBTdHJpbmcgdXJsID0gaHRtbDVJdGVtLmdldFNoYXJlVXJsKCk7CiAgICAgICAgaWYgKHVybC5jb250YWlucygiPyIpKSB7CiAgICAgICAgICAgIHVybCA9IHVybC5jb25jYXQoIiYiKS5jb25jYXQoQ29uc3RhbnRzLkFQUF9TQ0hFTUUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHVybCA9IHVybC5jb25jYXQoIj8iKS5jb25jYXQoQ29uc3RhbnRzLkFQUF9TQ0hFTUUpOwogICAgICAgIH0KICAgICAgICBTaGFyZVV0aWwuZ2V0SW5zdGFuY2UoKS5zaGFyZVRvV2VDaGF0U2Vzc2lvbih1cmwsIGh0bWw1SXRlbS5nZXRUaXRsZSgpLCBodG1sNUl0ZW0uZ2V0Q29udGVudCgpLCBodG1sNUl0ZW0uZ2V0SW1nVXJsKCkpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgc2hhcmVXeEZyaWVuZENpcmNsZSgpIHsKICAgICAgICBpZiAoaHRtbDVJdGVtID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBTdHJpbmcgdXJsID0gaHRtbDVJdGVtLmdldFNoYXJlVXJsKCk7CiAgICAgICAgaWYgKHVybC5jb250YWlucygiPyIpKSB7CiAgICAgICAgICAgIHVybCA9IHVybC5jb25jYXQoIiYiKS5jb25jYXQoQ29uc3RhbnRzLkFQUF9TQ0hFTUUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHVybCA9IHVybC5jb25jYXQoIj8iKS5jb25jYXQoQ29uc3RhbnRzLkFQUF9TQ0hFTUUpOwogICAgICAgIH0KICAgICAgICBTaGFyZVV0aWwuZ2V0SW5zdGFuY2UoKS5zaGFyZVRvV2VDaGF0VGltZWxpbmUodXJsLCBodG1sNUl0ZW0uZ2V0VGl0bGUoKSwgaHRtbDVJdGVtLmdldENvbnRlbnQoKSwgaHRtbDVJdGVtLmdldEltZ1VybCgpKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIGhpZGVMb2FkaW5nKCkgewogICAgICAgIHN1cGVyLmhpZGVMb2FkaW5nKCk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBhZ2VudFJlcXVlc3RTdWNjZXNzKFN0cmluZyBqc29uU3RyKSB7CiAgICAgICAgaWYobUN1cnJlbnRXZWJWaWV3IT1udWxsKXsKICAgICAgICAgICAgbUN1cnJlbnRXZWJWaWV3CiAgICAgICAgICAgICAgICAgICAgLmxvYWRVcmwoImphdmFzY3JpcHQ6YWdlbnRyZXNwb25zZWZyb21hcHAoJyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgYWdlbnRSZXFJZCArICInLCciICsganNvblN0ciArICInKSIpOwogICAgICAgIH0KICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIGFnZW50UmVxdWVzdEZhaWwoKSB7CiAgICAgICAgaWYobUN1cnJlbnRXZWJWaWV3IT1udWxsKXsKICAgICAgICAgICAgbUN1cnJlbnRXZWJWaWV3LmxvYWRVcmwoImphdmFzY3JpcHQ6YWdlbnRyZXNwb25zZWZyb21hcHAoJyIKICAgICAgICAgICAgICAgICAgICArIGFnZW50UmVxSWQgKyAiJywncmVxdWVzdGZhaWwnKSIpOwogICAgICAgIH0KICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIHNob3dTaG9wcGluZ0NhcnROdW0oaW50IG51bSkgewogICAgICAgIHRvb2xCYXIuc2V0Q2FydE51bShudW0pOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgaXNTaG93TWVzc2FnZVBvaW50KGludCBpc0hhc01zZyxpbnQgX25vdFJlYWRNc2dOdW0pIHsKICAgICAgICBpc0hhc05vdFJlYWRNc2cgPSBpc0hhc01zZzsKICAgICAgICBub3RSZWFkTXNnTnVtID0gX25vdFJlYWRNc2dOdW07CiAgICAgICAgdG9vbEJhci5zaG93TWVzc2FnZVBvaW50KGlzSGFzTXNnLF9ub3RSZWFkTXNnTnVtKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIHNoYXJlU3VjY2VzcygpIHsKICAgICAgICBpZihtQ3VycmVudFdlYlZpZXchPW51bGwpewogICAgICAgICAgICBtQ3VycmVudFdlYlZpZXcucG9zdChuZXcgUnVubmFibGUoKSB7CiAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsKICAgICAgICAgICAgICAgICAgICBtQ3VycmVudFdlYlZpZXcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5sb2FkVXJsKCJqYXZhc2NyaXB0OnNoYXJlQWN0aW9uUmVzcG9uc2VGcm9tQXBwKCciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgYWN0aW9uTnVtYmVyICsgIicsJ3N1Y2Nlc3MnKSIpOwogICAgICAgICAgICAgICAgICAgIFdYRW50cnlBY3Rpdml0eS5pc0h0bWw1SnNTaGFyZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBzaGFyZUZhaWx1cmUoKSB7CiAgICAgICAgaWYobUN1cnJlbnRXZWJWaWV3IT1udWxsKXsKICAgICAgICAgICAgbUN1cnJlbnRXZWJWaWV3LnBvc3QobmV3IFJ1bm5hYmxlKCkgewogICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7CiAgICAgICAgICAgICAgICAgICAgbUN1cnJlbnRXZWJWaWV3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubG9hZFVybCgiamF2YXNjcmlwdDpzaGFyZUFjdGlvblJlc3BvbnNlRnJvbUFwcCgnIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGFjdGlvbk51bWJlciArICInLCdmYWlsdXJlJykiKTsKICAgICAgICAgICAgICAgICAgICBXWEVudHJ5QWN0aXZpdHkuaXNIdG1sNUpzU2hhcmUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgc2hhcmVDYW5jZWwoKSB7CiAgICAgICAgaWYobUN1cnJlbnRXZWJWaWV3IT1udWxsKXsKICAgICAgICAgICAgbUN1cnJlbnRXZWJWaWV3LnBvc3QobmV3IFJ1bm5hYmxlKCkgewogICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7CiAgICAgICAgICAgICAgICAgICAgbUN1cnJlbnRXZWJWaWV3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubG9hZFVybCgiamF2YXNjcmlwdDpzaGFyZUFjdGlvblJlc3BvbnNlRnJvbUFwcCgnIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGFjdGlvbk51bWJlciArICInLCdjYW5jZWxlZCcpIik7CiAgICAgICAgICAgICAgICAgICAgV1hFbnRyeUFjdGl2aXR5LmlzSHRtbDVKc1NoYXJlID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldFBhcmFtcyhTdHJpbmcgcGFyYW1lcnMsIFN0cmluZyBlbmNvZGV0eXBlKSB7CiAgICAgICAgaWYgKFRleHRVdGlscy5pc0VtcHR5KHBhcmFtZXJzKSkgewogICAgICAgICAgICByZXR1cm4gIiI7CiAgICAgICAgfQogICAgICAgIHBhcmFtZXJzID0gcGFyYW1lcnMucmVwbGFjZSgiKyIsICIlMkIiKTsvL7DRss7K/dfWt/u0rtbQtcShsCuhsdeqs8klMkIst8DWuVVSTERlY29kZXK78kJhc2U2NLDRIisi16qzyb/VuPEKICAgICAgICBwYXJhbWVycyA9IHBhcmFtZXJzLnJlcGxhY2UoIiAiLCAiJTIwIik7CiAgICAgICAgU3RyaW5nIF9wYXJhbWVycyA9ICIiOwogICAgICAgIGlmICgidXJsZW5jb2RlIi5lcXVhbHMoZW5jb2RldHlwZSkpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIF9wYXJhbWVycyA9IFVSTERlY29kZXIuZGVjb2RlKHBhcmFtZXJzLCAidXRmLTgiKTsKICAgICAgICAgICAgfSBjYXRjaCAoVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYnl0ZVtdIGRlY29kZUJ5dGUgPSBCYXNlNjQuZGVjb2RlKHBhcmFtZXJzLmdldEJ5dGVzKCksCiAgICAgICAgICAgICAgICAgICAgQmFzZTY0LkRFRkFVTFQpOwogICAgICAgICAgICBfcGFyYW1lcnMgPSBuZXcgU3RyaW5nKGRlY29kZUJ5dGUpOwogICAgICAgIH0KICAgICAgICBfcGFyYW1lcnMgPSBfcGFyYW1lcnMucmVwbGFjZSgiKyIsICIlMkIiKTsvL7DRss7K/dfWt/u0rtbQtcShsCuhsdeqs8klMkIst8DWuVVSTERlY29kZXK78kJhc2U2NLDRIisi16qzyb/VuPEKICAgICAgICBfcGFyYW1lcnMgPSBfcGFyYW1lcnMucmVwbGFjZSgiICIsICIlMjAiKTsKCiAgICAgICAgcmV0dXJuIF9wYXJhbWVyczsKICAgIH0KCn0K</text>
      </register>
      <register name="p" type="4">
        <text>android:background=&quot;@color/color_eeeeee_white&quot;
        fresco:failureImage=&quot;@drawable/default_pic&quot;
        fresco:failureImageScaleType=&quot;centerInside&quot;
        fresco:placeholderImage=&quot;@drawable/default_pic&quot;
        fresco:placeholderImageScaleType=&quot;centerInside&quot;</text>
      </register>
      <register name="1" type="2">
        <text encoding="base64">LyoqCiAqIGh0bWw1CiAqLwpAU3VwcHJlc3NMaW50KHsiSGFuZGxlckxlYWsiLCAiU2V0SmF2YVNjcmlwdEVuYWJsZWQifSkKcHVibGljIGNsYXNzIEh0bWw1QWN0aXZpdHkgZXh0ZW5kcyBXWEVudHJ5QWN0aXZpdHk8SHRtbDVDb250cmFjdC5QcmVzZW50ZXI+IGltcGxlbWVudHMgSHRtbDVDb250cmFjdC5WaWV3IHsKCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBMT0dJTl9SRVNVTFRDT0RFID0gMTAyMDA7CgogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgUElOR0FOX1BBWV9FUlJPUiA9ICIwIjsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IFBJTkdBTl9QQVlfU1VDQ0VTUyA9IDE7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBBQkNfUEFZX1NVQ0NFU1MgPSAyOwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgQUJDX1BBWV9FUlJPUiA9IDM7CgogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgQk9DX1BBWV9TVUNDRVNTID0gNDsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IEJPQ19QQVlfRVJST1IgPSA1OwogICAgLy8gxcTJ4828xqwgt7W72MLrCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBDQU1FUkEgPSAxMDAwOwogICAgLy8g0aHU8c28xqwgt7W72MLrCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBTRUxFQ1RfUEhPVE8gPSAzMDAwOwogICAgLy8gzbzGrCDA4NDNCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBUWVBFX1BIT1RPID0gImltYWdlLyoiOwogICAgcHVibGljIFZhbHVlQ2FsbGJhY2s8VXJpPiBtRmlsZVBhdGhDYWxsYmFjazsKICAgIHB1YmxpYyBWYWx1ZUNhbGxiYWNrPFVyaVtdPiBtRmlsZVBhdGhDYWxsYmFja3M7CiAgICBAQmluZFZpZXcoUi5pZC50b29sYmFyKQogICAgVG9vbGJhckFjdGlvbmJhciB0b29sQmFyOwogICAgQEJpbmRWaWV3KFIuaWQudG9vbGJhcl9jbG9zZSkKICAgIEltYWdlVmlldyBjbG9zZVR2OwogICAgQEJpbmRWaWV3KFIuaWQudG9vbGJhcl9sZWZ0KQogICAgSW1hZ2VWaWV3IGJhY2tJdjsKICAgIEBCaW5kVmlldyhSLmlkLnN3aXBlX2NvbnRhaW5lcikKICAgIFNjcm9sbFN3aXBlUmVmcmVzaExheW91dCBzd2lwZUxheW91dDsKICAgIEBCaW5kVmlldyhSLmlkLldlYlZpZXdQcm9ncmVzcykKICAgIFByb2dyZXNzQmFyIG1Qcm9ncmVzc0JhcjsKICAgIEBCaW5kVmlldyhSLmlkLndlYnZpZXcpCiAgICBYNVdlYlZpZXcgbUN1cnJlbnRXZWJWaWV3OwogICAgSW50ZW50IGludGVudDsKICAgIEh0bWw1UHJlc2VudGVyIG1QcmVzZW50ZXI7CiAgICBIYW5kbGVyIG1IYW5kbGVyID0gbmV3IEhhbmRsZXIoKSB7CiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIHZvaWQgaGFuZGxlTWVzc2FnZShNZXNzYWdlIG1zZykgewogICAgICAgICAgICBzdXBlci5oYW5kbGVNZXNzYWdlKG1zZyk7CiAgICAgICAgICAgIHN3aXRjaCAobXNnLndoYXQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICB0b29sQmFyLnNldFJpZ2h0SW1nVmlzaWJpbGl0eShmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgdG9vbEJhci5zZXRSaWdodEltZ1Zpc2liaWxpdHkodHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgQEJpbmRWaWV3KFIuaWQudG9vbGJhcl9yaWdodCkKICAgIEltYWdlVmlldyBzZXRpbmdfaWNvbjsKICAgIE15V2ViVmlld0NsaWVudC5PdmVycmlkZVVybExvYWRMaXN0ZW5lciBsb2FkTGlzdGVuZXIgPSBuZXcgTXlXZWJWaWV3Q2xpZW50Lk92ZXJyaWRlVXJsTG9hZExpc3RlbmVyKCkgewoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9pZCBPdmVycmlkZVVybExvYWQoYm9vbGVhbiBmbGFnKSB7CiAgICAgICAgICAgIGlmIChmbGFnKSB7CiAgICAgICAgICAgICAgICBjbG9zZVR2LnNldFZpc2liaWxpdHkoVmlldy5WSVNJQkxFKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNsb3NlVHYuc2V0VmlzaWJpbGl0eShWaWV3LkdPTkUpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9pZCBzZXRUaXRsZShTdHJpbmcgdGl0bGUpIHsKICAgICAgICB9CiAgICB9OwogICAgLyoqCiAgICAgKiBpc1NlbGVjdGVkOsrHt/HT0M28xqx1cmkgc2VsZWN0X2ZsYWc6yse38bXju/fBy7Wvv/K1xNGh1PHNvMassLTFpQogICAgICovCiAgICBib29sZWFuIGlzU2VsZWN0ZWQgPSBmYWxzZSwgc2VsZWN0X2ZsYWcgPSBmYWxzZTsKICAgIFVyaSB1cmk7CiAgICBjb20uZ2RtbS5saWIuZGlhbG9nLk9uRGlzbWlzc0xpc3RlbmVyIGRpc21pc3NMaXN0ZW5lciA9IG5ldyBjb20uZ2RtbS5saWIuZGlhbG9nLk9uRGlzbWlzc0xpc3RlbmVyKCkgewogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyB2b2lkIG9uRGlzbWlzcyhEaWFsb2dQbHVzIGRpYWxvZykgewogICAgICAgICAgICBpc1NlbGVjdGVkID0gZmFsc2U7CiAgICAgICAgICAgIGhhbmRsZVBvcFdpbmRvdygpOwogICAgICAgIH0KICAgIH07CiAgICBCcm9hZGNhc3RSZWNlaXZlciBkb1VpZFJlY2VpdmVyID0gbmV3IEJyb2FkY2FzdFJlY2VpdmVyKCkgewoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9pZCBvblJlY2VpdmUoQ29udGV4dCBjb250ZXh0LCBJbnRlbnQgaW50ZW50KSB7CiAgICAgICAgICAgIFN0cmluZyBhY3Rpb24gPSBpbnRlbnQuZ2V0QWN0aW9uKCk7CiAgICAgICAgICAgIGlmIChhY3Rpb24uZXF1YWxzKENvbnN0YW50cy5BY3Rpb24uTE9HSU5fQUNUSU9OKSAmJiBtQ3VycmVudFdlYlZpZXcgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgbUN1cnJlbnRXZWJWaWV3LnBvc3QobmV3IFJ1bm5hYmxlKCkgewogICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbUN1cnJlbnRXZWJWaWV3LmxvYWRVcmwoImphdmFzY3JpcHQ6Z2V0VWlkKCciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBMb2dpbk1hbmFnZXIuZ2V0VWlkKCkgKyAiJykiKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICB9OwogICAgcHJpdmF0ZSBTdHJpbmcgZmxhZywgcHVzaEZsYWcgPSAiIjsKICAgIHByaXZhdGUgYm9vbGVhbiBiYWNrRmxhZyA9IGZhbHNlOwogICAgLyoqCiAgICAgKiDKx7fxz9TKvrfWz+1wb3B3aW5kb3cKICAgICAqLwogICAgcHJpdmF0ZSBib29sZWFuIGlzTm9TaG93U2hhcmUgPSBmYWxzZTsKICAgIC8vcG9wd2luZG93yse38c/Uyr631s/tCiAgICBwcml2YXRlIGJvb2xlYW4gaXNTaGFyZVZpc2libGUgPSBmYWxzZTsKICAgIC8qKgogICAgICogaHRtbDW31s/ttcTKtcD9CiAgICAgKi8KICAgIHByaXZhdGUgSHRtbDVTaGFyZUl0ZW0gaHRtbDVJdGVtID0gbnVsbDsKICAgIC8vyse38crHt9bH+KOoyse31sf4yrGjrM/Uyr65us7vs7XNvLHqo6kKICAgIHByaXZhdGUgYm9vbGVhbiBpc0FyZWEgPSBmYWxzZTsKICAgIHByaXZhdGUgU3RyaW5nIG9yZGVySWQgPSBudWxsOwogICAgcHJpdmF0ZSBib29sZWFuIGlzUmVmcmVzaCA9IGZhbHNlOwogICAgLyoqCiAgICAgKiC0+sDtx+vH87XEaWQKICAgICAqLwogICAgcHJpdmF0ZSBTdHJpbmcgYWdlbnRSZXFJZCA9IG51bGw7CiAgICAvLyC0+sDtx+vH87XEss7K/aOoanNvbqOpCiAgICBwcml2YXRlIFN0cmluZyBhZ2VudFBhcmFtZXJzOwogICAgLy8gtPrA7cfrx/O1xLzTw9zA4NDNo6hqc29uo6kKICAgIHByaXZhdGUgU3RyaW5nIGFnZW50RW5jb2RldHlwZTsKICAgIC8vILT6wO3H68fztcR1cmy12Na3o6hqc29uo6kKICAgIHByaXZhdGUgU3RyaW5nIGFnZW50UmVxVXJsOwogICAgLy8gtPrA7cfrx/PQ6NKqvNPD3LXEss7K/c671sMgzqq/1bT6se2yu7zTw9wKICAgIHByaXZhdGUgU3RyaW5nIGFnZW50UG9zUGFyYW07CiAgICAvLyC0+sDtx+vH87zTw9y1xLe9yr0gzqq/1bT6se3ErMjPM2Rlc7zTw9wKICAgIHByaXZhdGUgU3RyaW5nIGFnZW50RW5jcnlwdFR5cGU7CiAgICBwcml2YXRlIFN0cmluZyB0eXBlOwogICAgcHJpdmF0ZSBSZXNwb25zZUJhbmtQYXlQYXJhbUl0ZW0gYm9jSXRlbTsKICAgIHByaXZhdGUgYm9vbGVhbiBpc0NyZWF0ZSA9IGZhbHNlOy8vxdC2z8rHt/HKx7Xa0ru0zrS0vagKICAgIHByaXZhdGUgYm9vbGVhbiBpc0hvbWUgPSBmYWxzZTsvL8XQts/Kx7fxvq25/cHLaG9tZbz8CiAgICAvKioKICAgICAqILSryOtodG1sNWpzt9bP7bLZ1/fB98uuusUKICAgICAqLwogICAgcHJpdmF0ZSBTdHJpbmcgYWN0aW9uTnVtYmVyOwogICAgLy+1x8K8uvO1xLvYtfcKICAgIHByaXZhdGUgTG9naW5DYWxsYmFjayBjYWxsYmFjazsKICAgIC8vyse38dPQzrS2wc/7z6IgMcrH09AgMMrHt/EKICAgIHByaXZhdGUgaW50IGlzSGFzTm90UmVhZE1zZyA9IDA7CiAgICAvL860tsHP+8+iyv3BvwogICAgcHJpdmF0ZSBpbnQgbm90UmVhZE1zZ051bSA9IDA7CiAgICAvLyC199PDz7XNs8/gu/og1ri2qMrks/bOxLz+CiAgICBwcml2YXRlIEZpbGUgcGljRmlsZTsKICAgIC8vILX308PPtc2zz+C7+iDWuLaoyuSz9s7EvP61xCBVcmkKICAgIHByaXZhdGUgVXJpIHBpY0ZpbGVVcmk7CiAgICBjb20uZ2RtbS5saWIuZGlhbG9nLk9uQ2xpY2tMaXN0ZW5lciBsaXN0ZW5lciA9IG5ldyBjb20uZ2RtbS5saWIuZGlhbG9nLk9uQ2xpY2tMaXN0ZW5lcigpIHsKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9pZCBvbkNsaWNrKERpYWxvZ1BsdXMgZGlhbG9nLCBWaWV3IHZpZXcpIHsKICAgICAgICAgICAgc3dpdGNoICh2aWV3LmdldElkKCkpIHsKICAgICAgICAgICAgICAgIGNhc2UgUi5pZC5kaWFsb2dfdGFrZV9waWN0dXJlOgogICAgICAgICAgICAgICAgICAgIGRpYWxvZy5kaXNtaXNzKCk7CiAgICAgICAgICAgICAgICAgICAgQWNwLmdldEluc3RhbmNlKG1Db250ZXh0KS5yZXF1ZXN0KG5ldyBBY3BPcHRpb25zLkJ1aWxkZXIoKS5zZXRQZXJtaXNzaW9ucyhNYW5pZmVzdC5wZXJtaXNzaW9uLkNBTUVSQSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hbmlmZXN0LnBlcm1pc3Npb24uVklCUkFURSkuYnVpbGQoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBBY3BMaXN0ZW5lcigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvbkdyYW50ZWQoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdF9mbGFnID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlblN5c3RlbUNhbWVyYSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgb25EZW5pZWQoTGlzdDxTdHJpbmc+IHBlcm1pc3Npb25zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRvYXN0VXRpbC5zaG93U2hvcnRUb2FzdChwZXJtaXNzaW9ucy50b1N0cmluZygpICsgIsioz96+3L74Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIFIuaWQuZGlhbG9nX2dhbGxlcnk6CiAgICAgICAgICAgICAgICAgICAgZGlhbG9nLmRpc21pc3MoKTsKICAgICAgICAgICAgICAgICAgICBzZWxlY3RfZmxhZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgbVByZXNlbnRlci5zZWxlY3RQaWN0dXJlKCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIFIuaWQuc2hvcF90ZWxsX2NhbmNlbF90djoKICAgICAgICAgICAgICAgICAgICBkaWFsb2cuZGlzbWlzcygpOwogICAgICAgICAgICAgICAgICAgIHNlbGVjdF9mbGFnID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgLyoqCiAgICAgKiDOqsHLxdC2z2pztffTw8qxvOS85Lj0o6y85Lj0zKu2zLK7yMOy2df3o6i3wNa5tffTw8G9tM6z9s/WtPK/qsG9tM7Ss8Pmo6kKICAgICAqLwogICAgcHJpdmF0ZSBsb25nIHN0YXJ0VGltZSA9IDA7CiAgICBwcml2YXRlIGxvbmcgc3RvcFRpbWU7CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBvbkNyZWF0ZShCdW5kbGUgc2F2ZWRJbnN0YW5jZVN0YXRlKSB7CiAgICAgICAgc3VwZXIub25DcmVhdGUoc2F2ZWRJbnN0YW5jZVN0YXRlKTsKICAgICAgICAvL7zmyN08dmlkZW8+ytPGtbKlt8UgzfjSs9bQtcTK08a1o6zJz8bBxLu1xMqxuvKjrL/JxNyz9s/WycHLuLXEx+m/9qOs0OjSqsjnz8LJ6NbDCiAgICAgICAgZ2V0V2luZG93KCkuc2V0Rm9ybWF0KFBpeGVsRm9ybWF0LlRSQU5TTFVDRU5UKTsKCiAgICAgICAgaXNDcmVhdGUgPSB0cnVlOwoKICAgICAgICBtUHJlc2VudGVyID0gbmV3IEh0bWw1UHJlc2VudGVyKHRoaXMsIHRoaXMpOwoKICAgICAgICByZWdpc3RlckJyb2FkY2FzdCgpOwogICAgICAgIGluaXRWaWV3KCk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQgdm9pZCBwYXJzZXJJbnRlbnQoKSB7CiAgICAgICAgc3VwZXIucGFyc2VySW50ZW50KCk7CiAgICAgICAgaW50ZW50ID0gZ2V0SW50ZW50KCk7CiAgICAgICAgb3JkZXJJZCA9IGludGVudC5nZXRTdHJpbmdFeHRyYSgib3JkZXJfaWQiKTsKICAgICAgICB0eXBlID0gaW50ZW50LmdldFN0cmluZ0V4dHJhKCJ0eXBlIik7CiAgICAgICAgZmxhZyA9IGludGVudC5nZXRTdHJpbmdFeHRyYSgiZmxhZyIpOwogICAgICAgIHB1c2hGbGFnID0gaW50ZW50LmdldFN0cmluZ0V4dHJhKCJwdXNoRmxhZyIpOwogICAgICAgIEJ1bmRsZSBleHRyYXMgPSBpbnRlbnQuZ2V0RXh0cmFzKCk7CiAgICAgICAgaHRtbDVJdGVtID0gKEh0bWw1U2hhcmVJdGVtKSBpbnRlbnQuZ2V0UGFyY2VsYWJsZUV4dHJhKCJodG1sNUl0ZW0iKTsKICAgICAgICBpZiAoaHRtbDVJdGVtICE9IG51bGwgJiYgaHRtbDVJdGVtLmdldElzUmVmcmVzaCgpID09IDEpIHsKICAgICAgICAgICAgaXNSZWZyZXNoID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgaWYgKGh0bWw1SXRlbSAhPSBudWxsICYmIGh0bWw1SXRlbS5nZXRJc0FyZWEoKSA9PSAxKSB7CiAgICAgICAgICAgIGlzQXJlYSA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICBpc05vU2hvd1NoYXJlID0gaW50ZW50LmdldEJvb2xlYW5FeHRyYSgiaXNOb1Nob3dTaGFyZSIsIGZhbHNlKTsKCiAgICB9CgogICAgcHVibGljIHZvaWQgaW5pdFZpZXcoKSB7CiAgICAgICAgaW5pdFdlYlZpZXcoKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuc2V0T25TY3JvbGxDaGFuZ2VkQ2FsbGJhY2sobmV3IFg1V2ViVmlldy5PblNjcm9sbENoYW5nZWRDYWxsYmFjaygpIHsKICAgICAgICAgICAgcHVibGljIHZvaWQgb25TY3JvbGwoaW50IGwsIGludCB0KSB7CiAgICAgICAgICAgICAgICBpZiAoc3dpcGVMYXlvdXQgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIGlmICh0ID09IDApIHsvL3dlYlZpZXfU2ralsr8KICAgICAgICAgICAgICAgICAgICAgICAgc3dpcGVMYXlvdXQuc2V0RW5hYmxlZCh0cnVlKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugey8vd2ViVmlld7K7yse2pbK/CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXBlTGF5b3V0LnNldEVuYWJsZWQoZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0pOwovLyAgICAgICAgc3dpcGVMYXlvdXQuc2V0Vmlld0dyb3VwKG1DdXJyZW50V2ViVmlldyk7Ly/J6NbDvODM/bn2tq+1xNfTdmlldwogICAgICAgIHN3aXBlTGF5b3V0LnNldE15UmVmcmVzaChpc1JlZnJlc2gpOwogICAgICAgIHN3aXBlTGF5b3V0LnNldE9uUmVmcmVzaExpc3RlbmVyKG5ldyBTd2lwZVJlZnJlc2hMYXlvdXQuT25SZWZyZXNoTGlzdGVuZXIoKSB7CgogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgb25SZWZyZXNoKCkgewogICAgICAgICAgICAgICAgaWYgKGlzUmVmcmVzaCkgewogICAgICAgICAgICAgICAgICAgIC8v1tjQwsui0MLSs8PmCiAgICAgICAgICAgICAgICAgICAgaWYgKG1DdXJyZW50V2ViVmlldyAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldy5sb2FkVXJsKG1DdXJyZW50V2ViVmlldy5nZXRVcmwoKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzd2lwZUxheW91dC5zZXRSZWZyZXNoaW5nKGZhbHNlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICB0b29sQmFyLnNldFVwUmlndGhJY29uKFIuZHJhd2FibGUuc2hvcF9zZXRpbmdfaWNvbiwgbmV3IE9uQ2xpY2tMaXN0ZW5lcigpIHsKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uQ2xpY2soVmlldyB2KSB7CiAgICAgICAgICAgICAgICAvL8/Uyr5wb3B3aW5kb3cKICAgICAgICAgICAgICAgIG1QcmVzZW50ZXIuc2hvd1JpZ2h0UG9wd2luZG93KGZpbmRWaWV3QnlJZChSLmlkLnRvb2xiYXJfcmlnaHQpLCBpc0hhc05vdFJlYWRNc2csIG5vdFJlYWRNc2dOdW0sIGlzU2hhcmVWaXNpYmxlKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBpZiAoIWlzTm9TaG93U2hhcmUgJiYgaHRtbDVJdGVtICE9IG51bGwpIHsKICAgICAgICAgICAgaXNTaGFyZVZpc2libGUgPSB0cnVlOwogICAgICAgIH0KCiAgICAgICAgaWYgKGlzQXJlYSkgewogICAgICAgICAgICB0b29sQmFyLnNldFVwUmlnaHRJY29uMihSLmRyYXdhYmxlLmljX3VzZXJfaW5mb19zaG9wcGluZ19jYXJ0X2JsYWNrLCBuZXcgT25DbGlja0xpc3RlbmVyKCkgewogICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvbkNsaWNrKFZpZXcgdikgewogICAgICAgICAgICAgICAgICAgIE5hdmlnYXRpb25VdGlsLnRvU2hvcHBpbmdDYXJ0KChBY3Rpdml0eSkgbUNvbnRleHQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKLy8gICAgICAgICAgICBtUHJlc2VudGVyLmdldFNob3BwaW5nQ2FydE51bSgpOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFUZXh0VXRpbHMuaXNFbXB0eSh0eXBlKSAmJiB0eXBlLmVxdWFscygiYm9jX3BheSIpKSB7CiAgICAgICAgICAgIGJvY0l0ZW0gPSBpbnRlbnQuZ2V0UGFyY2VsYWJsZUV4dHJhKCJib2NQYXlJdGVtIik7CiAgICAgICAgICAgIFN0cmluZyB1cmwgPSBib2NJdGVtLmdldEJhbmtVcmwoKTsKICAgICAgICAgICAgYm9jVXJsSnVtcCh1cmwpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5hdmlnYXRlVG9VcmwoaW50ZW50LmdldERhdGFTdHJpbmcoKSk7CiAgICAgICAgfQogICAgfQoKICAgIEBPbkNsaWNrKFIuaWQudG9vbGJhcl9jbG9zZSkKICAgIHB1YmxpYyB2b2lkIGNsb3NlQ2xpY2soKSB7CiAgICAgICAgaWYgKCFUZXh0VXRpbHMuaXNFbXB0eSh0eXBlKQogICAgICAgICAgICAgICAgJiYgKHR5cGUuZXF1YWxzKCJjY2JfcGF5IikgfHwgdHlwZS5lcXVhbHMoImFiY19wYXkiKSkpIHsKICAgICAgICAgICAgSW50ZW50IGludGVudCA9IG5ldyBJbnRlbnQoKTsKICAgICAgICAgICAgaW50ZW50LnB1dEV4dHJhKCJvcmRlcl9pZCIsIG9yZGVySWQpOwogICAgICAgICAgICBzZXRSZXN1bHQoUkVTVUxUX09LLCBpbnRlbnQpOwogICAgICAgIH0KICAgICAgICBmaW5pc2goKTsKICAgIH0KCiAgICBAT25DbGljayhSLmlkLnRvb2xiYXJfbGVmdCkKICAgIHB1YmxpYyB2b2lkIGJhY2tDbGljaygpIHsKICAgICAgICBoYW5kbGVyQmFjaygpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGluaXRXZWJWaWV3KCkgewoKICAgICAgICBtUHJvZ3Jlc3NCYXIuc2V0TWF4KDEwMCk7CgogICAgICAgIG1DdXJyZW50V2ViVmlldy5jbGVhckNhY2hlKHRydWUpOwogICAgICAgIG1DdXJyZW50V2ViVmlldy5nZXRTZXR0aW5ncygpLnNldEphdmFTY3JpcHRFbmFibGVkKHRydWUpOwogICAgICAgIGlmIChCdWlsZC5WRVJTSU9OLlNES19JTlQgPj0gMjEpIHsvLzUuMNLUyc+/qsb0aHR0cHPWp7PWCiAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldy5nZXRTZXR0aW5ncygpLnNldE1peGVkQ29udGVudE1vZGUoMCk7CiAgICAgICAgfQogICAgICAgIG1DdXJyZW50V2ViVmlldy5hZGRKYXZhc2NyaXB0SW50ZXJmYWNlKG5ldyBXZWJ2aWV3VXRpbCgpLCAiSlMiKTsKICAgICAgICAvLyBVc2VyQWdlbnS688Pm1Pa80y9CeUFuZHJvaWQKICAgICAgICBTdHJpbmcgdWEgPSBtQ3VycmVudFdlYlZpZXcuZ2V0U2V0dGluZ3MoKS5nZXRVc2VyQWdlbnRTdHJpbmcoKTsKICAgICAgICBTdHJpbmcgYWRkU3RyID0gIiBBcHBWZXJzaW9uLyIgKyBWZXJzaW9uVXRpbHMuZ2V0VmVyc2lvbk5hbWUobUNvbnRleHQpICsgIi9CeUFuZHJvaWQiOwogICAgICAgIG1DdXJyZW50V2ViVmlldy5nZXRTZXR0aW5ncygpLnNldFVzZXJBZ2VudFN0cmluZyh1YSArIGFkZFN0cik7CiAgICAgICAgbUN1cnJlbnRXZWJWaWV3LmdldFNldHRpbmdzKCkuc2V0TG9hZFdpdGhPdmVydmlld01vZGUodHJ1ZSk7CiAgICAgICAgbUN1cnJlbnRXZWJWaWV3LmdldFNldHRpbmdzKCkuc2V0VXNlV2lkZVZpZXdQb3J0KHRydWUpOwogICAgICAgIG1DdXJyZW50V2ViVmlldy5nZXRTZXR0aW5ncygpLnNldEFsbG93RmlsZUFjY2Vzcyh0cnVlKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuZ2V0U2V0dGluZ3MoKS5zZXRMYXlvdXRBbGdvcml0aG0oV2ViU2V0dGluZ3MuTGF5b3V0QWxnb3JpdGhtLk5BUlJPV19DT0xVTU5TKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuZ2V0U2V0dGluZ3MoKS5zZXRTdXBwb3J0Wm9vbSh0cnVlKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuZ2V0U2V0dGluZ3MoKS5zZXRCdWlsdEluWm9vbUNvbnRyb2xzKHRydWUpOwogICAgICAgIG1DdXJyZW50V2ViVmlldy5nZXRTZXR0aW5ncygpLnNldFN1cHBvcnRNdWx0aXBsZVdpbmRvd3MoZmFsc2UpOwogICAgICAgIG1DdXJyZW50V2ViVmlldy5nZXRTZXR0aW5ncygpLnNldEFwcENhY2hlRW5hYmxlZCh0cnVlKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuZ2V0U2V0dGluZ3MoKS5zZXREb21TdG9yYWdlRW5hYmxlZCh0cnVlKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuZ2V0U2V0dGluZ3MoKS5zZXRHZW9sb2NhdGlvbkVuYWJsZWQodHJ1ZSk7CiAgICAgICAgbUN1cnJlbnRXZWJWaWV3LmdldFNldHRpbmdzKCkuc2V0QXBwQ2FjaGVNYXhTaXplKExvbmcuTUFYX1ZBTFVFKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuZ2V0U2V0dGluZ3MoKS5zZXRBcHBDYWNoZVBhdGgodGhpcy5nZXREaXIoImFwcGNhY2hlIiwgMCkuZ2V0UGF0aCgpKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuZ2V0U2V0dGluZ3MoKS5zZXREYXRhYmFzZVBhdGgodGhpcy5nZXREaXIoImRhdGFiYXNlcyIsIDApLmdldFBhdGgoKSk7CiAgICAgICAgbUN1cnJlbnRXZWJWaWV3LmdldFNldHRpbmdzKCkuc2V0R2VvbG9jYXRpb25EYXRhYmFzZVBhdGgodGhpcy5nZXREaXIoImdlb2xvY2F0aW9uIiwgMCkKICAgICAgICAgICAgICAgIC5nZXRQYXRoKCkpOwogICAgICAgIG1DdXJyZW50V2ViVmlldy5nZXRTZXR0aW5ncygpLnNldFBsdWdpblN0YXRlKFdlYlNldHRpbmdzLlBsdWdpblN0YXRlLk9OX0RFTUFORCk7CgogICAgICAgIGluaXRpYWxpemVDdXJyZW50V2ViVmlldygpOwogICAgICAgIG1DdXJyZW50V2ViVmlldy5zZXREb3dubG9hZExpc3RlbmVyKG5ldyBNeVdlYlZpZXdEb3duTG9hZExpc3RlbmVyKCkpOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBuYXZpZ2F0ZVRvVXJsKFN0cmluZyB1cmwpIHsKICAgICAgICBpZiAoIVRleHRVdGlscy5pc0VtcHR5KHVybCkpIHsKICAgICAgICAgICAgbUN1cnJlbnRXZWJWaWV3LmxvYWRVcmwodXJsKTsKICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIGJvY1VybEp1bXAoU3RyaW5nIHVybCkgewogICAgICAgIGlmIChUZXh0VXRpbHMuaXNFbXB0eSh1cmwpKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgTWFwPFN0cmluZywgU3RyaW5nPiBtYXBQYXJhbXMgPSBuZXcgSGFzaE1hcDxTdHJpbmcsIFN0cmluZz4oKTsKICAgICAgICBtYXBQYXJhbXMucHV0KCJtZXJjaGFudE5vIiwgYm9jSXRlbS5nZXRNZXJjaGFudE5vKCkpOwogICAgICAgIG1hcFBhcmFtcy5wdXQoIm9yZGVyTm8iLCBib2NJdGVtLmdldE9yZGVyTm8oKSk7CiAgICAgICAgbWFwUGFyYW1zLnB1dCgicGF5VHlwZSIsIGJvY0l0ZW0uZ2V0UGF5VHlwZSgpKTsKICAgICAgICBtYXBQYXJhbXMucHV0KCJjdXJDb2RlIiwgYm9jSXRlbS5nZXRDdXJDb2RlKCkpOwogICAgICAgIG1hcFBhcmFtcy5wdXQoIm9yZGVyQW1vdW50IiwgU3RyaW5nLnZhbHVlT2YoYm9jSXRlbS5nZXRPcmRlckFtb3VudCgpKSk7CiAgICAgICAgbWFwUGFyYW1zLnB1dCgib3JkZXJUaW1lIiwgYm9jSXRlbS5nZXRPcmRlclRpbWUoKSk7CiAgICAgICAgbWFwUGFyYW1zLnB1dCgib3JkZXJOb3RlIiwgYm9jSXRlbS5nZXRPcmRlck5vdGUoKSk7CiAgICAgICAgbWFwUGFyYW1zLnB1dCgib3JkZXJVcmwiLCBib2NJdGVtLmdldE9yZGVyVXJsKCkpOwogICAgICAgIG1hcFBhcmFtcy5wdXQoIm9yZGVyVGltZW91dERhdGUiLCBib2NJdGVtLmdldE9yZGVyVGltZW91dERhdGUoKSk7CiAgICAgICAgbWFwUGFyYW1zLnB1dCgic2lnbkRhdGEiLCBib2NJdGVtLmdldFNpZ25EYXRhKCkpOwoKICAgICAgICBDb2xsZWN0aW9uPE1hcC5FbnRyeTxTdHJpbmcsIFN0cmluZz4+IHBvc3REYXRhID0gbWFwUGFyYW1zLmVudHJ5U2V0KCk7CiAgICAgICAgY3JlYXRlQm9jRm9ydW0obUN1cnJlbnRXZWJWaWV3LCB1cmwsIHBvc3REYXRhKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgY3JlYXRlQm9jRm9ydW0oV2ViVmlldyB3ZWJWaWV3LCBTdHJpbmcgdXJsLCBDb2xsZWN0aW9uPE1hcC5FbnRyeTxTdHJpbmcsIFN0cmluZz4+IHBvc3REYXRhKSB7CiAgICAgICAgU3RyaW5nQnVpbGRlciBzYiA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7CiAgICAgICAgc2IuYXBwZW5kKCI8aHRtbD48aGVhZD48L2hlYWQ+Iik7CiAgICAgICAgc2IuYXBwZW5kKCI8Ym9keSBvbmxvYWQ9J2Zvcm0xLnN1Ym1pdCgpJz4iKTsKICAgICAgICBzYi5hcHBlbmQoU3RyaW5nLmZvcm1hdCgiPGZvcm0gaWQ9J2Zvcm0xJyBhY3Rpb249JyVzJyBtZXRob2Q9JyVzJz4iLCB1cmwsICJwb3N0IikpOwogICAgICAgIGZvciAoTWFwLkVudHJ5PFN0cmluZywgU3RyaW5nPiBpdGVtIDogcG9zdERhdGEpIHsKICAgICAgICAgICAgc2IuYXBwZW5kKFN0cmluZy5mb3JtYXQoIjxpbnB1dCBuYW1lPSclcycgdHlwZT0naGlkZGVuJyB2YWx1ZT0nJXMnIC8+IiwgaXRlbS5nZXRLZXkoKSwgaXRlbS5nZXRWYWx1ZSgpKSk7CiAgICAgICAgfQogICAgICAgIHNiLmFwcGVuZCgiPC9mb3JtPjwvYm9keT48L2h0bWw+Iik7CiAgICAgICAgd2ViVmlldy5sb2FkRGF0YShzYi50b1N0cmluZygpLCAidGV4dC9odG1sIiwgIlVURi04Iik7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIGhhbmRsZXJCYWNrKCkgewogICAgICAgIGlmIChtQ3VycmVudFdlYlZpZXcuY2FuR29CYWNrKCkpIHsKICAgICAgICAgICAgbUN1cnJlbnRXZWJWaWV3LmdvQmFjaygpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmICghVGV4dFV0aWxzLmlzRW1wdHkodHlwZSkKICAgICAgICAgICAgICAgICAgICAmJiAodHlwZS5lcXVhbHMoImNjYl9wYXkiKSB8fCB0eXBlLmVxdWFscygiYWJjX3BheSIpIHx8IHR5cGUuZXF1YWxzKCJib2NfcGF5IikpKSB7CiAgICAgICAgICAgICAgICBJbnRlbnQgaW50ZW50ID0gbmV3IEludGVudCgpOwogICAgICAgICAgICAgICAgaW50ZW50LnB1dEV4dHJhKCJvcmRlcl9pZCIsIG9yZGVySWQpOwogICAgICAgICAgICAgICAgc2V0UmVzdWx0KFJFU1VMVF9PSywgaW50ZW50KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmaW5pc2goKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiC78cihzcbLzbHqyrajrMrHt/HKx9e0zKzAuLTyv6rSs8PmCiAgICAgKi8KICAgIHByaXZhdGUgYm9vbGVhbiBpc1B1c2hNc2dPcGVuUGFnZSgpIHsKICAgICAgICBpZiAoVGV4dFV0aWxzLmlzRW1wdHkocHVzaEZsYWcpKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQgdm9pZCBvbkRlc3Ryb3koKSB7CiAgICAgICAgbVByZXNlbnRlci51blN1YnNjcmliZSgpOwogICAgICAgIG1DdXJyZW50V2ViVmlldy5jbGVhckNhY2hlKHRydWUpOwogICAgICAgIHVucmVnaXN0ZXJSZWNlaXZlcihkb1VpZFJlY2VpdmVyKTsKCiAgICAgICAgLy8gveK+9snBzcujumphdmEubGFuZy5JbGxlZ2FsQXJndW1lbnRFeGNlcHRpb246UmVjZWl2ZXIgbm90IHJlZ2lzdGVyZWQ6CiAgICAgICAgLy8gYW5kcm9pZC53aWRnZXQuWm9vbUJ1dHRvbnNDb250cm9sbGVyJDFANjkzZTJiZQogICAgICAgIG1DdXJyZW50V2ViVmlldy5nZXRTZXR0aW5ncygpLnNldEJ1aWx0SW5ab29tQ29udHJvbHModHJ1ZSk7CiAgICAgICAgbUN1cnJlbnRXZWJWaWV3LnNldFZpc2liaWxpdHkoVmlldy5HT05FKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcucmVtb3ZlQWxsVmlld3MoKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuZGVzdHJveSgpOwogICAgICAgIHN1cGVyLm9uRGVzdHJveSgpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIHZvaWQgc2V0Q29udGVudFZpZXcoKSB7CiAgICAgICAgc2V0Q29udGVudFZpZXcoUi5sYXlvdXQuYWN0aXZpdHlfaHRtbDUpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIHZvaWQgb25OZXdJbnRlbnQoSW50ZW50IGludGVudCkgewogICAgICAgIGlmIChpbnRlbnQuZ2V0RGF0YSgpICE9IG51bGwpIHsKICAgICAgICAgICAgbmF2aWdhdGVUb1VybChpbnRlbnQuZ2V0RGF0YVN0cmluZygpKTsKICAgICAgICB9CiAgICAgICAgc3VwZXIub25OZXdJbnRlbnQoaW50ZW50KTsKICAgIH0KCiAgICAvKioKICAgICAqIMe/1sa52LHVyO28/MXMCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBjaGFnZUlucHV0U3RhdGUoQ29udGV4dCBjb250ZXh0KSB7CiAgICAgICAgSW5wdXRNZXRob2RNYW5hZ2VyIGltbSA9IChJbnB1dE1ldGhvZE1hbmFnZXIpIGNvbnRleHQKICAgICAgICAgICAgICAgIC5nZXRTeXN0ZW1TZXJ2aWNlKENvbnRleHQuSU5QVVRfTUVUSE9EX1NFUlZJQ0UpOwogICAgICAgIGltbS50b2dnbGVTb2Z0SW5wdXQoMCwgSW5wdXRNZXRob2RNYW5hZ2VyLkhJREVfTk9UX0FMV0FZUyk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIGluaXRpYWxpemVDdXJyZW50V2ViVmlldygpIHsKCiAgICAgICAgTXlXZWJWaWV3Q2xpZW50IHdlYlZpZXdDbGllbnQgPSBuZXcgTXlXZWJWaWV3Q2xpZW50KG1Db250ZXh0LAogICAgICAgICAgICAgICAgbG9hZExpc3RlbmVyKTsKICAgICAgICBtQ3VycmVudFdlYlZpZXcuc2V0V2ViVmlld0NsaWVudCh3ZWJWaWV3Q2xpZW50KTsKCiAgICAgICAgbUN1cnJlbnRXZWJWaWV3LnNldFdlYkNocm9tZUNsaWVudChuZXcgY29tLnRlbmNlbnQuc210dC5zZGsuV2ViQ2hyb21lQ2xpZW50KCkgewogICAgICAgICAgICBWaWV3IG15VmlkZW9WaWV3OwogICAgICAgICAgICBWaWV3IG15Tm9ybWFsVmlldzsKICAgICAgICAgICAgSVg1V2ViQ2hyb21lQ2xpZW50LkN1c3RvbVZpZXdDYWxsYmFjayBjYWxsYmFjazsKCiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiDJz7SrzbzGrAogICAgICAgICAgICAgKgogICAgICAgICAgICAgKiBAcGFyYW0gZmlsZVBhdGhDYWxsYmFjawogICAgICAgICAgICAgKi8KICAgICAgICAgICAgLy8gMy4wLS2w5rG+CiAgICAgICAgICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bnVzZWQiKQogICAgICAgICAgICBwdWJsaWMgdm9pZCBvcGVuRmlsZUNob29zZXIoVmFsdWVDYWxsYmFjazxVcmk+IGZpbGVQYXRoQ2FsbGJhY2spIHsKICAgICAgICAgICAgICAgIG1GaWxlUGF0aENhbGxiYWNrID0gZmlsZVBhdGhDYWxsYmFjazsKICAgICAgICAgICAgICAgIGNoYWdlSW5wdXRTdGF0ZShIdG1sNUFjdGl2aXR5LnRoaXMpOwogICAgICAgICAgICAgICAgc2hvd1NlbGVjdFBob25lKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIMCp1bnkr8DAxvfJz7SrzsS8/gogICAgICAgICAgICAvLyAzLjArK7Dmsb4KICAgICAgICAgICAgQFN1cHByZXNzV2FybmluZ3MoInVudXNlZCIpCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9wZW5GaWxlQ2hvb3NlcigKICAgICAgICAgICAgICAgICAgICBAU3VwcHJlc3NXYXJuaW5ncygicmF3dHlwZXMiKSBWYWx1ZUNhbGxiYWNrIGZpbGVQYXRoQ2FsbGJhY2ssCiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGFjY2VwdFR5cGUpIHsKICAgICAgICAgICAgICAgIG1GaWxlUGF0aENhbGxiYWNrID0gZmlsZVBhdGhDYWxsYmFjazsKICAgICAgICAgICAgICAgIGNoYWdlSW5wdXRTdGF0ZShIdG1sNUFjdGl2aXR5LnRoaXMpOwogICAgICAgICAgICAgICAgc2hvd1NlbGVjdFBob25lKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bnVzZWQiKQogICAgICAgICAgICBwdWJsaWMgdm9pZCBvcGVuRmlsZUNob29zZXIoVmFsdWVDYWxsYmFjazxVcmk+IGZpbGVQYXRoQ2FsbGJhY2ssCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgYWNjZXB0VHlwZSwgU3RyaW5nIGNhcHR1cmUpIHsKICAgICAgICAgICAgICAgIG1GaWxlUGF0aENhbGxiYWNrID0gZmlsZVBhdGhDYWxsYmFjazsKICAgICAgICAgICAgICAgIGNoYWdlSW5wdXRTdGF0ZShIdG1sNUFjdGl2aXR5LnRoaXMpOwogICAgICAgICAgICAgICAgc2hvd1NlbGVjdFBob25lKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vICs1LjAKICAgICAgICAgICAgcHVibGljIGJvb2xlYW4gb25TaG93RmlsZUNob29zZXIoV2ViVmlldyB3ZWJWaWV3LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWYWx1ZUNhbGxiYWNrPFVyaVtdPiBmaWxlUGF0aENhbGxiYWNrLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGaWxlQ2hvb3NlclBhcmFtcyBmaWxlQ2hvb3NlclBhcmFtcykgewogICAgICAgICAgICAgICAgbUZpbGVQYXRoQ2FsbGJhY2tzID0gZmlsZVBhdGhDYWxsYmFjazsKICAgICAgICAgICAgICAgIGNoYWdlSW5wdXRTdGF0ZShIdG1sNUFjdGl2aXR5LnRoaXMpOwogICAgICAgICAgICAgICAgc2hvd1NlbGVjdFBob25lKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uUHJvZ3Jlc3NDaGFuZ2VkKFdlYlZpZXcgdmlldywgaW50IG5ld1Byb2dyZXNzKSB7CiAgICAgICAgICAgICAgICBpbnQgcHJvZ3Jlc3MgPSBtQ3VycmVudFdlYlZpZXcuZ2V0UHJvZ3Jlc3MoKTsKICAgICAgICAgICAgICAgIG1Qcm9ncmVzc0Jhci5zZXRQcm9ncmVzcyhwcm9ncmVzcyk7CiAgICAgICAgICAgICAgICAvL9L+sti9+LbIzPUKICAgICAgICAgICAgICAgIG1Qcm9ncmVzc0Jhci5zZXRWaXNpYmlsaXR5KHByb2dyZXNzID49IDk1ID8gVmlldy5HT05FIDogVmlldy5WSVNJQkxFKTsKICAgICAgICAgICAgICAgIGlmIChuZXdQcm9ncmVzcyA+PSAxMCkgewogICAgICAgICAgICAgICAgICAgIHN3aXBlTGF5b3V0LnNldFJlZnJlc2hpbmcoZmFsc2UpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXN3aXBlTGF5b3V0LmlzUmVmcmVzaGluZygpKQogICAgICAgICAgICAgICAgICAgICAgICBzd2lwZUxheW91dC5zZXRSZWZyZXNoaW5nKHRydWUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgb25SZWNlaXZlZEljb24oV2ViVmlldyB2aWV3LCBCaXRtYXAgaWNvbikgewogICAgICAgICAgICAgICAgc3VwZXIub25SZWNlaXZlZEljb24odmlldywgaWNvbik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMgYm9vbGVhbiBvbkNyZWF0ZVdpbmRvdyhXZWJWaWV3IHZpZXcsIGZpbmFsIGJvb2xlYW4gZGlhbG9nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbCBib29sZWFuIHVzZXJHZXN0dXJlLCBmaW5hbCBNZXNzYWdlIHJlc3VsdE1zZykgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgb25SZWNlaXZlZFRpdGxlKFdlYlZpZXcgdmlldywgU3RyaW5nIHRpdGxlKSB7CiAgICAgICAgICAgICAgICBzdXBlci5vblJlY2VpdmVkVGl0bGUodmlldywgdGl0bGUpOwogICAgICAgICAgICAgICAgdG9vbEJhci5zZXRUaXRsZSh0aXRsZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMgYm9vbGVhbiBvbkpzQWxlcnQoV2ViVmlldyB2aWV3LCBTdHJpbmcgdXJsLCBTdHJpbmcgbWVzc2FnZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsIEpzUmVzdWx0IHJlc3VsdCkgewogICAgICAgICAgICAgICAgbmV3IEFsZXJ0RGlhbG9nLkJ1aWxkZXIoSHRtbDVBY3Rpdml0eS50aGlzKQogICAgICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUobUNvbnRleHQuZ2V0U3RyaW5nKFIuc3RyaW5nLnByb21wdCkpCiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRNZXNzYWdlKG1lc3NhZ2UpCiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQb3NpdGl2ZUJ1dHRvbihhbmRyb2lkLlIuc3RyaW5nLm9rLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBBbGVydERpYWxvZy5PbkNsaWNrTGlzdGVuZXIoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uQ2xpY2soRGlhbG9nSW50ZXJmYWNlIGRpYWxvZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgd2hpY2gpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5jb25maXJtKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5zZXRDYW5jZWxhYmxlKGZhbHNlKS5jcmVhdGUoKS5zaG93KCk7CgogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMgYm9vbGVhbiBvbkpzQ29uZmlybShXZWJWaWV3IHZpZXcsIFN0cmluZyB1cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBtZXNzYWdlLCBmaW5hbCBKc1Jlc3VsdCByZXN1bHQpIHsKICAgICAgICAgICAgICAgIG5ldyBBbGVydERpYWxvZy5CdWlsZGVyKEh0bWw1QWN0aXZpdHkudGhpcykKICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKG1Db250ZXh0LmdldFN0cmluZyhSLnN0cmluZy5wcm9tcHQpKQogICAgICAgICAgICAgICAgICAgICAgICAuc2V0TWVzc2FnZShtZXNzYWdlKQogICAgICAgICAgICAgICAgICAgICAgICAuc2V0UG9zaXRpdmVCdXR0b24oYW5kcm9pZC5SLnN0cmluZy5vaywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgRGlhbG9nSW50ZXJmYWNlLk9uQ2xpY2tMaXN0ZW5lcigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgb25DbGljayhEaWFsb2dJbnRlcmZhY2UgZGlhbG9nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCB3aGljaCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmNvbmZpcm0oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXROZWdhdGl2ZUJ1dHRvbihhbmRyb2lkLlIuc3RyaW5nLmNhbmNlbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgRGlhbG9nSW50ZXJmYWNlLk9uQ2xpY2tMaXN0ZW5lcigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgb25DbGljayhEaWFsb2dJbnRlcmZhY2UgZGlhbG9nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCB3aGljaCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmNhbmNlbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuY3JlYXRlKCkuc2hvdygpOwoKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIGJvb2xlYW4gb25Kc1Byb21wdChXZWJWaWV3IHZpZXcsIFN0cmluZyB1cmwsIFN0cmluZyBtZXNzYWdlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBkZWZhdWx0VmFsdWUsIGZpbmFsIEpzUHJvbXB0UmVzdWx0IHJlc3VsdCkgewoKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogyKvGwbKlt8XF5NbDCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgb25TaG93Q3VzdG9tVmlldyhWaWV3IHZpZXcsIElYNVdlYkNocm9tZUNsaWVudC5DdXN0b21WaWV3Q2FsbGJhY2sgY2FsbGJhY2spIHsKICAgICAgICAgICAgICAgIHN1cGVyLm9uU2hvd0N1c3RvbVZpZXcodmlldywgY2FsbGJhY2spOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHNob3dTZWxlY3RQaG9uZSgpIHsKICAgICAgICBtUHJlc2VudGVyLnNob3dTZWxlY3RQaG90byhsaXN0ZW5lciwgZGlzbWlzc0xpc3RlbmVyKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgb3BlblN5c3RlbUNhbWVyYSgpIHsKICAgICAgICBJbnRlbnQgdGFrZVBpY3R1cmVJbnRlbnQgPSBuZXcgSW50ZW50KE1lZGlhU3RvcmUuQUNUSU9OX0lNQUdFX0NBUFRVUkUpOwogICAgICAgIGlmICh0YWtlUGljdHVyZUludGVudC5yZXNvbHZlQWN0aXZpdHkobUNvbnRleHQuZ2V0UGFja2FnZU1hbmFnZXIoKSkgIT0gbnVsbCkgewogICAgICAgICAgICBwaWNGaWxlID0gbnVsbDsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHBpY0ZpbGUgPSBtUHJlc2VudGVyLmNyZWF0ZUltYWdlRmlsZSgpOwogICAgICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBleCkgewogICAgICAgICAgICAgICAgZXgucHJpbnRTdGFja1RyYWNlKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChwaWNGaWxlICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHBpY0ZpbGVVcmkgPSBGaWxlUHJvdmlkZXIuZ2V0VXJpRm9yRmlsZShtQ29udGV4dCwgQ29uc3RhbnRzLkFVVEhPUklUSUVTLCBwaWNGaWxlKTsKICAgICAgICAgICAgICAgIHRha2VQaWN0dXJlSW50ZW50LnB1dEV4dHJhKE1lZGlhU3RvcmUuRVhUUkFfT1VUUFVULCBwaWNGaWxlVXJpKTsKICAgICAgICAgICAgICAgIHN0YXJ0QWN0aXZpdHlGb3JSZXN1bHQodGFrZVBpY3R1cmVJbnRlbnQsIENvbnN0YW50cy5SRVFVRVNUX1RBS0VfUEhPVE8pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIHByaXZhdGUgdm9pZCBoYW5kbGVQb3BXaW5kb3coKSB7CgogICAgICAgIGlmIChpc1NlbGVjdGVkKSB7CiAgICAgICAgICAgIGlmIChtRmlsZVBhdGhDYWxsYmFjayAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBtRmlsZVBhdGhDYWxsYmFjay5vblJlY2VpdmVWYWx1ZSh1cmkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChtRmlsZVBhdGhDYWxsYmFja3MgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgbUZpbGVQYXRoQ2FsbGJhY2tzLm9uUmVjZWl2ZVZhbHVlKG5ldyBVcmlbXXt1cml9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpc1NlbGVjdGVkID0gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKHNlbGVjdF9mbGFnKSB7CiAgICAgICAgICAgICAgICBzZWxlY3RfZmxhZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChtRmlsZVBhdGhDYWxsYmFjayAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBtRmlsZVBhdGhDYWxsYmFjay5vblJlY2VpdmVWYWx1ZShudWxsKTsKICAgICAgICAgICAgICAgIG1GaWxlUGF0aENhbGxiYWNrID0gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobUZpbGVQYXRoQ2FsbGJhY2tzICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIG1GaWxlUGF0aENhbGxiYWNrcy5vblJlY2VpdmVWYWx1ZShudWxsKTsKICAgICAgICAgICAgICAgIG1GaWxlUGF0aENhbGxiYWNrcyA9IG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQgdm9pZCBvbkFjdGl2aXR5UmVzdWx0KGludCByZXF1ZXN0Q29kZSwgaW50IHJlc3VsdENvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEludGVudCBpbnRlbnQpIHsKICAgICAgICBpZiAocmVxdWVzdENvZGUgPT0gTE9HSU5fUkVTVUxUQ09ERSkgewogICAgICAgICAgICBpZiAocmVzdWx0Q29kZSA9PSBBY3Rpdml0eS5SRVNVTFRfT0sgJiYgY2FsbGJhY2sgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgY2FsbGJhY2sub25Mb2dpbigpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGNhbGxiYWNrICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrLm9uQ2FuY2VsKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAocmVzdWx0Q29kZSA9PSBBY3Rpdml0eS5SRVNVTFRfT0spIHsKICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0Q29kZSA9PSBDb25zdGFudHMuUkVRVUVTVF9UQUtFX1BIT1RPKSB7CiAgICAgICAgICAgICAgICAgICAgdXJpID0gcGljRmlsZVVyaTsKICAgICAgICAgICAgICAgICAgICBpc1NlbGVjdGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVxdWVzdENvZGUgPT0gU0VMRUNUX1BIT1RPKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gu/HIoc+1zbPP4LLhzbzGrLXEdXJpCiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gaW50ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVyaSA9IGludGVudC5nZXREYXRhKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlzU2VsZWN0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHRDb2RlID09IFJFU1VMVF9DQU5DRUxFRCkgewogICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gbUZpbGVQYXRoQ2FsbGJhY2spIHsKICAgICAgICAgICAgICAgICAgICBtRmlsZVBhdGhDYWxsYmFjay5vblJlY2VpdmVWYWx1ZShudWxsKTsKICAgICAgICAgICAgICAgICAgICBtRmlsZVBhdGhDYWxsYmFjayA9IG51bGw7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gbUZpbGVQYXRoQ2FsbGJhY2tzKSB7CiAgICAgICAgICAgICAgICAgICAgbUZpbGVQYXRoQ2FsbGJhY2tzLm9uUmVjZWl2ZVZhbHVlKG51bGwpOwogICAgICAgICAgICAgICAgICAgIG1GaWxlUGF0aENhbGxiYWNrcyA9IG51bGw7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9CiAgICAgICAgICAgIGhhbmRsZVBvcFdpbmRvdygpOwogICAgICAgIH0KCiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgYm9vbGVhbiBvbktleUxvbmdQcmVzcyhpbnQga2V5Q29kZSwgS2V5RXZlbnQgZXZlbnQpIHsKCiAgICAgICAgc3dpdGNoIChrZXlDb2RlKSB7CiAgICAgICAgICAgIGNhc2UgS2V5RXZlbnQuS0VZQ09ERV9CQUNLOgogICAgICAgICAgICAgICAgdGhpcy5tb3ZlVGFza1RvQmFjayh0cnVlKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLm9uS2V5TG9uZ1ByZXNzKGtleUNvZGUsIGV2ZW50KTsKICAgICAgICB9CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgYm9vbGVhbiBvbktleVVwKGludCBrZXlDb2RlLCBLZXlFdmVudCBldmVudCkgewoKICAgICAgICBzd2l0Y2ggKGtleUNvZGUpIHsKICAgICAgICAgICAgY2FzZSBLZXlFdmVudC5LRVlDT0RFX0JBQ0s6CiAgICAgICAgICAgICAgICBoYW5kbGVyQmFjaygpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLm9uS2V5VXAoa2V5Q29kZSwgZXZlbnQpOwogICAgICAgIH0KICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCB2b2lkIG9uUGF1c2UoKSB7CiAgICAgICAgaWYgKG1DdXJyZW50V2ViVmlldyAhPSBudWxsKSB7CiAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldy5wb3N0KG5ldyBSdW5uYWJsZSgpIHsKICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgewogICAgICAgICAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmxvYWRVcmwoImphdmFzY3JpcHQ6ZGlkQXBwZWFyKCcwJykiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHN1cGVyLm9uUGF1c2UoKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCB2b2lkIG9uUmVzdW1lKCkgewogICAgICAgIGlmIChpc0NyZWF0ZSAmJiBtQ3VycmVudFdlYlZpZXcgIT0gbnVsbCkgewogICAgICAgICAgICBtQ3VycmVudFdlYlZpZXcucG9zdChuZXcgUnVubmFibGUoKSB7CiAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsKICAgICAgICAgICAgICAgICAgICBtQ3VycmVudFdlYlZpZXcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5sb2FkVXJsKCJqYXZhc2NyaXB0OmRpZEFwcGVhcignMScpIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBzdXBlci5vblJlc3VtZSgpOwogICAgICAgIG1QcmVzZW50ZXIuZ2V0SGFzTWVzc2FnZSgpOwogICAgICAgIGlmIChpc0FyZWEpIHsKICAgICAgICAgICAgbVByZXNlbnRlci5nZXRTaG9wcGluZ0NhcnROdW0oKTsKICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHJlZ2lzdGVyQnJvYWRjYXN0KCkgewogICAgICAgIEludGVudEZpbHRlciBpbnRlbnRGaWx0ZXIgPSBuZXcgSW50ZW50RmlsdGVyKCk7CiAgICAgICAgaW50ZW50RmlsdGVyLmFkZEFjdGlvbihDb25zdGFudHMuQWN0aW9uLkxPR0lOX0FDVElPTik7CiAgICAgICAgcmVnaXN0ZXJSZWNlaXZlcihkb1VpZFJlY2VpdmVyLCBpbnRlbnRGaWx0ZXIpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgc2hhcmVXeEZyaWVuZCgpIHsKICAgICAgICBpZiAoaHRtbDVJdGVtID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBTdHJpbmcgdXJsID0gaHRtbDVJdGVtLmdldFNoYXJlVXJsKCk7CiAgICAgICAgaWYgKHVybC5jb250YWlucygiPyIpKSB7CiAgICAgICAgICAgIHVybCA9IHVybC5jb25jYXQoIiYiKS5jb25jYXQoQ29uc3RhbnRzLkFQUF9TQ0hFTUUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHVybCA9IHVybC5jb25jYXQoIj8iKS5jb25jYXQoQ29uc3RhbnRzLkFQUF9TQ0hFTUUpOwogICAgICAgIH0KICAgICAgICBTaGFyZVV0aWwuZ2V0SW5zdGFuY2UoKS5zaGFyZVRvV2VDaGF0U2Vzc2lvbih1cmwsIGh0bWw1SXRlbS5nZXRUaXRsZSgpLCBodG1sNUl0ZW0uZ2V0Q29udGVudCgpLCBodG1sNUl0ZW0uZ2V0SW1nVXJsKCkpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgc2hhcmVXeEZyaWVuZENpcmNsZSgpIHsKICAgICAgICBpZiAoaHRtbDVJdGVtID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBTdHJpbmcgdXJsID0gaHRtbDVJdGVtLmdldFNoYXJlVXJsKCk7CiAgICAgICAgaWYgKHVybC5jb250YWlucygiPyIpKSB7CiAgICAgICAgICAgIHVybCA9IHVybC5jb25jYXQoIiYiKS5jb25jYXQoQ29uc3RhbnRzLkFQUF9TQ0hFTUUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHVybCA9IHVybC5jb25jYXQoIj8iKS5jb25jYXQoQ29uc3RhbnRzLkFQUF9TQ0hFTUUpOwogICAgICAgIH0KICAgICAgICBTaGFyZVV0aWwuZ2V0SW5zdGFuY2UoKS5zaGFyZVRvV2VDaGF0VGltZWxpbmUodXJsLCBodG1sNUl0ZW0uZ2V0VGl0bGUoKSwgaHRtbDVJdGVtLmdldENvbnRlbnQoKSwgaHRtbDVJdGVtLmdldEltZ1VybCgpKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIGhpZGVMb2FkaW5nKCkgewogICAgICAgIHN1cGVyLmhpZGVMb2FkaW5nKCk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBhZ2VudFJlcXVlc3RTdWNjZXNzKFN0cmluZyBqc29uU3RyKSB7CiAgICAgICAgaWYgKG1DdXJyZW50V2ViVmlldyAhPSBudWxsKSB7CiAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldwogICAgICAgICAgICAgICAgICAgIC5sb2FkVXJsKCJqYXZhc2NyaXB0OmFnZW50cmVzcG9uc2Vmcm9tYXBwKCciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGFnZW50UmVxSWQgKyAiJywnIiArIGpzb25TdHIgKyAiJykiKTsKICAgICAgICB9CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBhZ2VudFJlcXVlc3RGYWlsKCkgewogICAgICAgIGlmIChtQ3VycmVudFdlYlZpZXcgIT0gbnVsbCkgewogICAgICAgICAgICBtQ3VycmVudFdlYlZpZXcubG9hZFVybCgiamF2YXNjcmlwdDphZ2VudHJlc3BvbnNlZnJvbWFwcCgnIgogICAgICAgICAgICAgICAgICAgICsgYWdlbnRSZXFJZCArICInLCdyZXF1ZXN0ZmFpbCcpIik7CiAgICAgICAgfQogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgc2hvd1Nob3BwaW5nQ2FydE51bShpbnQgbnVtKSB7CiAgICAgICAgdG9vbEJhci5zZXRDYXJ0TnVtKG51bSk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBpc1Nob3dNZXNzYWdlUG9pbnQoaW50IGlzSGFzTXNnLCBpbnQgX25vdFJlYWRNc2dOdW0pIHsKICAgICAgICBpc0hhc05vdFJlYWRNc2cgPSBpc0hhc01zZzsKICAgICAgICBub3RSZWFkTXNnTnVtID0gX25vdFJlYWRNc2dOdW07CiAgICAgICAgdG9vbEJhci5zaG93TWVzc2FnZVBvaW50KGlzSGFzTXNnLCBfbm90UmVhZE1zZ051bSk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBzaGFyZVN1Y2Nlc3MoKSB7CiAgICAgICAgaWYgKG1DdXJyZW50V2ViVmlldyAhPSBudWxsKSB7CiAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldy5wb3N0KG5ldyBSdW5uYWJsZSgpIHsKICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgewogICAgICAgICAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmxvYWRVcmwoImphdmFzY3JpcHQ6c2hhcmVBY3Rpb25SZXNwb25zZUZyb21BcHAoJyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBhY3Rpb25OdW1iZXIgKyAiJywnc3VjY2VzcycpIik7CiAgICAgICAgICAgICAgICAgICAgV1hFbnRyeUFjdGl2aXR5LmlzSHRtbDVKc1NoYXJlID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIHNoYXJlRmFpbHVyZSgpIHsKICAgICAgICBpZiAobUN1cnJlbnRXZWJWaWV3ICE9IG51bGwpIHsKICAgICAgICAgICAgbUN1cnJlbnRXZWJWaWV3LnBvc3QobmV3IFJ1bm5hYmxlKCkgewogICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7CiAgICAgICAgICAgICAgICAgICAgbUN1cnJlbnRXZWJWaWV3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubG9hZFVybCgiamF2YXNjcmlwdDpzaGFyZUFjdGlvblJlc3BvbnNlRnJvbUFwcCgnIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGFjdGlvbk51bWJlciArICInLCdmYWlsdXJlJykiKTsKICAgICAgICAgICAgICAgICAgICBXWEVudHJ5QWN0aXZpdHkuaXNIdG1sNUpzU2hhcmUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgc2hhcmVDYW5jZWwoKSB7CiAgICAgICAgaWYgKG1DdXJyZW50V2ViVmlldyAhPSBudWxsKSB7CiAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldy5wb3N0KG5ldyBSdW5uYWJsZSgpIHsKICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgewogICAgICAgICAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmxvYWRVcmwoImphdmFzY3JpcHQ6c2hhcmVBY3Rpb25SZXNwb25zZUZyb21BcHAoJyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBhY3Rpb25OdW1iZXIgKyAiJywnY2FuY2VsZWQnKSIpOwogICAgICAgICAgICAgICAgICAgIFdYRW50cnlBY3Rpdml0eS5pc0h0bWw1SnNTaGFyZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIFN0cmluZyBnZXRQYXJhbXMoU3RyaW5nIHBhcmFtZXJzLCBTdHJpbmcgZW5jb2RldHlwZSkgewogICAgICAgIGlmIChUZXh0VXRpbHMuaXNFbXB0eShwYXJhbWVycykpIHsKICAgICAgICAgICAgcmV0dXJuICIiOwogICAgICAgIH0KICAgICAgICBwYXJhbWVycyA9IHBhcmFtZXJzLnJlcGxhY2UoIisiLCAiJTJCIik7Ly+w0bLOyv3X1rf7tK7W0LXEobArobHXqrPJJTJCLLfA1rlVUkxEZWNvZGVyu/JCYXNlNjSw0SIrIteqs8m/1bjxCiAgICAgICAgcGFyYW1lcnMgPSBwYXJhbWVycy5yZXBsYWNlKCIgIiwgIiUyMCIpOwogICAgICAgIFN0cmluZyBfcGFyYW1lcnMgPSAiIjsKICAgICAgICBpZiAoInVybGVuY29kZSIuZXF1YWxzKGVuY29kZXR5cGUpKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBfcGFyYW1lcnMgPSBVUkxEZWNvZGVyLmRlY29kZShwYXJhbWVycywgInV0Zi04Iik7CiAgICAgICAgICAgIH0gY2F0Y2ggKFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGJ5dGVbXSBkZWNvZGVCeXRlID0gQmFzZTY0LmRlY29kZShwYXJhbWVycy5nZXRCeXRlcygpLAogICAgICAgICAgICAgICAgICAgIEJhc2U2NC5ERUZBVUxUKTsKICAgICAgICAgICAgX3BhcmFtZXJzID0gbmV3IFN0cmluZyhkZWNvZGVCeXRlKTsKICAgICAgICB9CiAgICAgICAgX3BhcmFtZXJzID0gX3BhcmFtZXJzLnJlcGxhY2UoIisiLCAiJTJCIik7Ly+w0bLOyv3X1rf7tK7W0LXEobArobHXqrPJJTJCLLfA1rlVUkxEZWNvZGVyu/JCYXNlNjSw0SIrIteqs8m/1bjxCiAgICAgICAgX3BhcmFtZXJzID0gX3BhcmFtZXJzLnJlcGxhY2UoIiAiLCAiJTIwIik7CgogICAgICAgIHJldHVybiBfcGFyYW1lcnM7CiAgICB9CgogICAgcHJpdmF0ZSBjbGFzcyBNeVdlYlZpZXdEb3duTG9hZExpc3RlbmVyIGltcGxlbWVudHMgRG93bmxvYWRMaXN0ZW5lciB7CiAgICAgICAgLy8gzO2807zgzP3Kwrz+vLS/yQogICAgICAgIHB1YmxpYyB2b2lkIG9uRG93bmxvYWRTdGFydChTdHJpbmcgdXJsLCBTdHJpbmcgdXNlckFnZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgY29udGVudERpc3Bvc2l0aW9uLCBTdHJpbmcgbWltZXR5cGUsIGxvbmcgY29udGVudExlbmd0aCkgewogICAgICAgICAgICBVcmkgdXJpID0gVXJpLnBhcnNlKHVybCk7CiAgICAgICAgICAgIEludGVudCBpbnRlbnQgPSBuZXcgSW50ZW50KEludGVudC5BQ1RJT05fVklFVywgdXJpKTsKICAgICAgICAgICAgc3RhcnRBY3Rpdml0eShpbnRlbnQpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgY2xhc3MgV2Vidmlld1V0aWwgewogICAgICAgIC8qKgogICAgICAgICAqIGxpbmt0eXBlIMG0vdPA4NDNo6wxxNrBtCAwzeLBtCBsaW5rdXJsIMjnufvKx83iwbTTw7TLtKZ1cmzBtL3TIGxpbmttb2R1bGUKICAgICAgICAgKiDI57n7ysfE2sG0o6zBtL3TzPjXqrXExKO/6bHgusUxOtfK0bYgMjrKtbvdIDM6vqvRoSA0Osnnx/ggNTqx48PxIDY6ueOypSA3OsXEwvQgcmVzb3VyY2VpZAogICAgICAgICAqIMjnufvKx8TawbSjrMG0vdPM+NeqtcTEo7/ptcTXytS0aWQgKLHjw/G6zbnjsqXDu9PQ18rUtGlkKSBsaW5rdG8gyOe5+8rHxNrBtLKix9LT0NfK1LRpZKOs1eLA7772tqjBtL3TwODQzaOsMaO618rUtMHQse3SswogICAgICAgICAqIDI618rUtM/qx+nSsyAo1rvT0Mq1u926zb6r0aHT0NfK1LTB0LHt0rMpCiAgICAgICAgICovCiAgICAgICAgQEphdmFzY3JpcHRJbnRlcmZhY2UKICAgICAgICBwdWJsaWMgdm9pZCBsaW5rVG9BbmRyb2lkKFN0cmluZyBsaW5rdHlwZSwgU3RyaW5nIGxpbmt1cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgbGlua21vZHVsZSwgU3RyaW5nIHJlc291cmNlaWQsIFN0cmluZyBsaW5rdG8pIHsKICAgICAgICAgICAgQWRJbmZvIGFkSXRlbSA9IG5ldyBBZEluZm8oKTsKICAgICAgICAgICAgYWRJdGVtLnNldExpbmtUeXBlKGxpbmt0eXBlKTsKICAgICAgICAgICAgYWRJdGVtLnNldExpbmtVcmwobGlua3VybCk7CiAgICAgICAgICAgIGlmICghVGV4dFV0aWxzLmlzRW1wdHkobGlua21vZHVsZSkgJiYgISJ1bmRlZmluZWQiLmVxdWFscyhsaW5rbW9kdWxlKSkgewogICAgICAgICAgICAgICAgYWRJdGVtLnNldExpbmtNb2RpZChJbnRlZ2VyLnBhcnNlSW50KGxpbmttb2R1bGUpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBhZEl0ZW0uc2V0UmVzb3VyY2VJZChyZXNvdXJjZWlkKTsKICAgICAgICAgICAgYWRJdGVtLnNldExpbmtUbyhsaW5rdG8pOwogICAgICAgICAgICBOYXZpZ2F0aW9uVXRpbC50b0NvbW1vbkFkKG1Db250ZXh0LCBhZEl0ZW0pOwogICAgICAgIH0KCiAgICAgICAgQEphdmFzY3JpcHRJbnRlcmZhY2UKICAgICAgICBwdWJsaWMgdm9pZCBsaW5rVG9CdXlBbmRyb2lkKFN0cmluZyBsaW5rdHlwZSwgU3RyaW5nIGxpbmt1cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgbGlua21vZHVsZSwgU3RyaW5nIHJlc291cmNlaWQsIFN0cmluZyBsaW5rdG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgaXRlbWNvdW50KSB7CiAgICAgICAgICAgIEFkSW5mbyBhZEl0ZW0gPSBuZXcgQWRJbmZvKCk7CiAgICAgICAgICAgIGFkSXRlbS5zZXRMaW5rVHlwZShsaW5rdHlwZSk7CiAgICAgICAgICAgIGFkSXRlbS5zZXRMaW5rVXJsKGxpbmt1cmwpOwogICAgICAgICAgICBpZiAoIVRleHRVdGlscy5pc0VtcHR5KGxpbmttb2R1bGUpICYmICEidW5kZWZpbmVkIi5lcXVhbHMobGlua21vZHVsZSkpIHsKICAgICAgICAgICAgICAgIGFkSXRlbS5zZXRMaW5rTW9kaWQoSW50ZWdlci5wYXJzZUludChsaW5rbW9kdWxlKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYWRJdGVtLnNldFJlc291cmNlSWQocmVzb3VyY2VpZCk7CiAgICAgICAgICAgIGFkSXRlbS5zZXRMaW5rVG8obGlua3RvKTsKICAgICAgICAgICAgYWRJdGVtLnNldEl0ZW1jb3VudChpdGVtY291bnQpOwogICAgICAgICAgICBOYXZpZ2F0aW9uVXRpbC50b0NvbW1vbkFkKG1Db250ZXh0LCBhZEl0ZW0pOwogICAgICAgIH0KCiAgICAgICAgQEphdmFzY3JpcHRJbnRlcmZhY2UKICAgICAgICBwdWJsaWMgdm9pZCBuZWVkVWlkZnJvbUFuZHJvaWQoKSB7CiAgICAgICAgICAgIGlmIChMb2dpbk1hbmFnZXIuY2hlY2tMb2dpblN0YXRlKCkgJiYgbUN1cnJlbnRXZWJWaWV3ICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldy5wb3N0KG5ldyBSdW5uYWJsZSgpIHsKICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldy5sb2FkVXJsKCJqYXZhc2NyaXB0OmdldFVpZCgnIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgTG9naW5NYW5hZ2VyLmdldFVpZCgpICsgIicpIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYmFja0ZsYWcgPSB0cnVlOwogICAgICAgICAgICAgICAgTmF2aWdhdGlvblV0aWwudG9Mb2dpbigoQWN0aXZpdHkpIG1Db250ZXh0LCAxNDQ0NCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiDGvbCy0vjQ0LvYtfcKICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSByZXNDb2RlCiAgICAgICAgICovCiAgICAgICAgQEphdmFzY3JpcHRJbnRlcmZhY2UKICAgICAgICBwdWJsaWMgdm9pZCB0b1BpbmdBblBheVJlc3BvbnNlKFN0cmluZyByZXNDb2RlKSB7CiAgICAgICAgICAgIGlmIChyZXNDb2RlLmVxdWFscygiMCIpKSB7CiAgICAgICAgICAgICAgICAvLyDKp7DcCiAgICAgICAgICAgICAgICBmaW5pc2goKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNDb2RlLmVxdWFscygiMSIpKSB7CiAgICAgICAgICAgICAgICAvLyCzybmmCiAgICAgICAgICAgICAgICBzZXRSZXN1bHQoUElOR0FOX1BBWV9TVUNDRVNTKTsKICAgICAgICAgICAgICAgIGZpbmlzaCgpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiDFqdK10vjQ0LvYtfcKICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSByZXNDb2RlCiAgICAgICAgICovCiAgICAgICAgQEphdmFzY3JpcHRJbnRlcmZhY2UKICAgICAgICBwdWJsaWMgdm9pZCB0b0FCQ1BheVJlc3BvbnNlKFN0cmluZyByZXNDb2RlKSB7CiAgICAgICAgICAgIEludGVudCBpbnRlbnQgPSBuZXcgSW50ZW50KCk7CiAgICAgICAgICAgIGlmIChyZXNDb2RlLmVxdWFscygiMCIpKSB7CiAgICAgICAgICAgICAgICBpbnRlbnQucHV0RXh0cmEoIm9yZGVyX2lkIiwgb3JkZXJJZCk7CiAgICAgICAgICAgICAgICBzZXRSZXN1bHQoQUJDX1BBWV9FUlJPUiwgaW50ZW50KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNDb2RlLmVxdWFscygiMSIpKSB7CiAgICAgICAgICAgICAgICAvLyCzybmmCiAgICAgICAgICAgICAgICBpbnRlbnQucHV0RXh0cmEoIm9yZGVyX2lkIiwgb3JkZXJJZCk7CiAgICAgICAgICAgICAgICBzZXRSZXN1bHQoQUJDX1BBWV9TVUNDRVNTLCBpbnRlbnQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZpbmlzaCgpOwogICAgICAgIH0KCiAgICAgICAgQEphdmFzY3JpcHRJbnRlcmZhY2UKICAgICAgICBwdWJsaWMgdm9pZCB0b0JPQ1BheVJlc3BvbnNlKFN0cmluZyByZXNDb2RlKSB7CiAgICAgICAgICAgIExvZ2dlci5kKCJyZXNDb2RlIDoiICsgcmVzQ29kZSArICIsb3JkZXJJZCA9IiArIG9yZGVySWQpOwogICAgICAgICAgICBJbnRlbnQgaW50ZW50ID0gbmV3IEludGVudCgpOwogICAgICAgICAgICBpZiAocmVzQ29kZS5lcXVhbHMoIjAiKSkgewogICAgICAgICAgICAgICAgaW50ZW50LnB1dEV4dHJhKCJvcmRlcl9pZCIsIG9yZGVySWQpOwogICAgICAgICAgICAgICAgc2V0UmVzdWx0KEJPQ19QQVlfRVJST1IsIGludGVudCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzQ29kZS5lcXVhbHMoIjEiKSkgewogICAgICAgICAgICAgICAgLy8gs8m5pgogICAgICAgICAgICAgICAgaW50ZW50LnB1dEV4dHJhKCJvcmRlcl9pZCIsIG9yZGVySWQpOwogICAgICAgICAgICAgICAgc2V0UmVzdWx0KEJPQ19QQVlfU1VDQ0VTUywgaW50ZW50KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmaW5pc2goKTsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIEhUTUw10rPD5rT6wO3H68fztcRqcwogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHJlcUlkICAgICAgIMfrx/O1xLHqyrZJRAogICAgICAgICAqIEBwYXJhbSByZXFVcmwgICAgICDH68fztcRVUkwKICAgICAgICAgKiBAcGFyYW0gaXNOZWVkTG9naW4gse3KvsrHt/HSqsfzYXBwILbLtcfCvNPDu6e689TZ1rTQ0LT6wO3H68fzo6wxse3KvtDo0qq1x8K8o6wwse3KvrK70OjSqrXHwrwKICAgICAgICAgKiBAcGFyYW0gcGFyYW1lcnMgICAgc7Htyr7H68fztcSyzsr9tcRqc29uc3RyaW5n0M7KvQogICAgICAgICAqIEBwYXJhbSBlbmNvZGV0eXBlICBlbmNvZGV0eXBlse3KvrLOyv20rrXE19a3+9equ6+3vcq9o6zWtdPQwb3W1iBiYXNlNjQsdXJsZW5jb2Rlo7u0q7/V1rXErMjPYmFzZTY0veLC6wogICAgICAgICAqIEBwYXJhbSBwb3NQYXJhbSAgICDQ6NKqvNPD3LXEss7K/c671sMgzqq/1bT6se2yu7zTw9wKICAgICAgICAgKiBAcGFyYW0gZW5jcnlwdFR5cGUgvNPD3LXEt73KvSDOqr/VtPqx7cSsyM8zZGVzvNPD3AogICAgICAgICAqLwogICAgICAgIEBKYXZhc2NyaXB0SW50ZXJmYWNlCiAgICAgICAgcHVibGljIHZvaWQgdG9IdG1sNUFnZW50UmVxdWVzdEpzKFN0cmluZyByZXFJZCwgU3RyaW5nIHJlcVVybCwgU3RyaW5nIGlzTmVlZExvZ2luLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgcGFyYW1lcnMsIFN0cmluZyBlbmNvZGV0eXBlLCBTdHJpbmcgcG9zUGFyYW0sIFN0cmluZyBlbmNyeXB0VHlwZSkgewogICAgICAgICAgICAvLyDNqLn9cmVxVXJsyKW199PDvdO/2gogICAgICAgICAgICBhZ2VudFJlcUlkID0gcmVxSWQ7CiAgICAgICAgICAgIGFnZW50UGFyYW1lcnMgPSBwYXJhbWVyczsKICAgICAgICAgICAgYWdlbnRFbmNvZGV0eXBlID0gZW5jb2RldHlwZTsKICAgICAgICAgICAgYWdlbnRSZXFVcmwgPSByZXFVcmw7CiAgICAgICAgICAgIGFnZW50UG9zUGFyYW0gPSBwb3NQYXJhbTsKICAgICAgICAgICAgYWdlbnRFbmNyeXB0VHlwZSA9IGVuY3J5cHRUeXBlOwogICAgICAgICAgICBpZiAoY2FsbGJhY2sgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBuZXcgTG9naW5DYWxsYmFjaygpIHsKICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvbkxvZ2luKCkgewogICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgX3BhcmFtZXJzID0gZ2V0UGFyYW1zKGFnZW50UGFyYW1lcnMsIGFnZW50RW5jb2RldHlwZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG1QcmVzZW50ZXIuc2VuZEFnZW50UmVxdWVzdChhZ2VudFJlcVVybCwgX3BhcmFtZXJzLCBhZ2VudFBvc1BhcmFtLCBhZ2VudEVuY3J5cHRUeXBlKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uQ2FuY2VsKCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobUN1cnJlbnRXZWJWaWV3ICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldy5sb2FkVXJsKCJqYXZhc2NyaXB0OmFnZW50cmVzcG9uc2Vmcm9tYXBwKCciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgYWdlbnRSZXFJZCArICInLCdub3Rsb2dpbicpIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoIjEiLmVxdWFscyhpc05lZWRMb2dpbikgJiYgIUxvZ2luTWFuYWdlci5jaGVja0xvZ2luU3RhdGUoKSkgewogICAgICAgICAgICAgICAgTmF2aWdhdGlvblV0aWwudG9Mb2dpbigoQWN0aXZpdHkpIG1Db250ZXh0LCBMT0dJTl9SRVNVTFRDT0RFKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrLm9uTG9naW4oKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgQEphdmFzY3JpcHRJbnRlcmZhY2UKICAgICAgICBwdWJsaWMgdm9pZCB0b0h0bWw1QWdlbnRSZXF1ZXN0SnMoU3RyaW5nIHJlcUlkLCBmaW5hbCBTdHJpbmcgcmVxVXJsLCBTdHJpbmcgaXNOZWVkTG9naW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsIFN0cmluZyBwYXJhbWVycywgZmluYWwgU3RyaW5nIGVuY29kZXR5cGUpIHsKICAgICAgICAgICAgdG9IdG1sNUFnZW50UmVxdWVzdEpzKHJlcUlkLCByZXFVcmwsIGlzTmVlZExvZ2luLCBwYXJhbWVycywgZW5jb2RldHlwZSwgbnVsbCwgbnVsbCk7CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBIVE1MNdKzw+a31s/tanO3vbeoCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gdGl0bGUgICAgILfWz+2x6sziCiAgICAgICAgICogQHBhcmFtIGNvbnRlbnQgICC31s/txNrI3QogICAgICAgICAqIEBwYXJhbSBfdXJsICAgICAgt9bP7cG0vdMKICAgICAgICAgKiBAcGFyYW0gaW1ndXJsICAgILfWz+3NvMasdXJsCiAgICAgICAgICogQHBhcmFtIHNoYXJldHlwZSC31s/twODQzSDF89PRyKYvusPT0QogICAgICAgICAqLwogICAgICAgIEBKYXZhc2NyaXB0SW50ZXJmYWNlCiAgICAgICAgcHVibGljIHZvaWQgdG9IdG1sNVNoYXJlSnMoU3RyaW5nIF9hY3Rpb25OdW1iZXIsIFN0cmluZyB0aXRsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgY29udGVudCwgU3RyaW5nIF91cmwsIFN0cmluZyBpbWd1cmwsIFN0cmluZyBzaGFyZXR5cGUpIHsKICAgICAgICAgICAgaWYgKCFMb2dpbk1hbmFnZXIuY2hlY2tMb2dpblN0YXRlKCkpIHsKICAgICAgICAgICAgICAgIE5hdmlnYXRpb25VdGlsLnRvTG9naW4oKEFjdGl2aXR5KSBtQ29udGV4dCwgMTAwMSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgV1hFbnRyeUFjdGl2aXR5LmlzSHRtbDVKc1NoYXJlID0gdHJ1ZTsKICAgICAgICAgICAgYWN0aW9uTnVtYmVyID0gX2FjdGlvbk51bWJlcjsKICAgICAgICAgICAgbVByZXNlbnRlci50b0h0bWw1U2hhcmVKcyh0aXRsZSwgY29udGVudCwgX3VybCwgaW1ndXJsLCBzaGFyZXR5cGUpOwoKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIGh0bWw1IHZpZGWypbfFyrEs1N3No8bky/uypbfFo6y199PDtMu3vbeoCiAgICAgICAgICovCiAgICAgICAgQEphdmFzY3JpcHRJbnRlcmZhY2UKICAgICAgICBwdWJsaWMgdm9pZCB2aWRlb29ucGxheWluZygpIHsKICAgICAgICAgICAgU3RhcnRBbmRTdG9wRXZlbnQgc3RhcnRBbmRTdG9wRXZlbnQgPSBuZXcgU3RhcnRBbmRTdG9wRXZlbnQoKTsKICAgICAgICAgICAgc3RhcnRBbmRTdG9wRXZlbnQuc2V0U3RhcnRBbmRTdG9wUGxheShmYWxzZSk7CiAgICAgICAgICAgIFJ4QnVzLmdldEluc3RhbmNlKCkuc2VuZChzdGFydEFuZFN0b3BFdmVudCk7CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiDJ6NbDyse38b/J0tTLotDCCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gX2lzUmVmcmVzaCChsDGhscqxse3KvrTyv6rLotDCuabE3KOszqqhsDChscqxse3KvrnYsdXLotDCuabE3AogICAgICAgICAqLwogICAgICAgIEBKYXZhc2NyaXB0SW50ZXJmYWNlCiAgICAgICAgcHVibGljIHZvaWQgc2V0SXNSZWZyZXNoKFN0cmluZyBfaXNSZWZyZXNoKSB7CiAgICAgICAgICAgIGlmICgiMSIuZXF1YWxzKF9pc1JlZnJlc2gpKSB7CiAgICAgICAgICAgICAgICBpc1JlZnJlc2ggPSB0cnVlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaXNSZWZyZXNoID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHN3aXBlTGF5b3V0ICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHN3aXBlTGF5b3V0LnNldE15UmVmcmVzaChpc1JlZnJlc2gpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiDJ6NbDaHRtbDW31s/ttcTE2sjdCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gdGl0bGUgICAgt9bP7bXEserM4gogICAgICAgICAqIEBwYXJhbSBjb250ZW50ICC31s/txNrI3QogICAgICAgICAqIEBwYXJhbSBpbWdVcmwgICC31s/tzbzGrLXY1rcKICAgICAgICAgKiBAcGFyYW0gc2hhcmVVcmwgt9bP7XVyCiAgICAgICAgICovCiAgICAgICAgQEphdmFzY3JpcHRJbnRlcmZhY2UKICAgICAgICBwdWJsaWMgdm9pZCBzZXRIdG1sNVNoYXJlQ29udGVudChTdHJpbmcgdGl0bGUsIFN0cmluZyBjb250ZW50LCBTdHJpbmcgaW1nVXJsLCBTdHJpbmcgc2hhcmVVcmwpIHsKICAgICAgICAgICAgaWYgKFRleHRVdGlscy5pc0VtcHR5KHRpdGxlKSB8fCAidW5kZWZpbmVkIi5lcXVhbHModGl0bGUpKSB7CiAgICAgICAgICAgICAgICBodG1sNUl0ZW0gPSBudWxsOwovLyAgICAgICAgICAgICAgICBtSGFuZGxlci5zZW5kRW1wdHlNZXNzYWdlKDApOwogICAgICAgICAgICAgICAgaXNTaGFyZVZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQovLyAgICAgICAgICAgIG1IYW5kbGVyLnNlbmRFbXB0eU1lc3NhZ2UoMSk7CiAgICAgICAgICAgIGlzU2hhcmVWaXNpYmxlID0gdHJ1ZTsKCiAgICAgICAgICAgIGlmIChodG1sNUl0ZW0gPT0gbnVsbCkgewogICAgICAgICAgICAgICAgaHRtbDVJdGVtID0gbmV3IEh0bWw1U2hhcmVJdGVtKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGh0bWw1SXRlbS5zZXRUaXRsZSh0aXRsZSk7CiAgICAgICAgICAgIGh0bWw1SXRlbS5zZXRDb250ZW50KGNvbnRlbnQpOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaHRtbDVJdGVtLnNldEltZ1VybChVUkxEZWNvZGVyLmRlY29kZShpbWdVcmwsICJVVEYtOCIpKTsKICAgICAgICAgICAgICAgIGh0bWw1SXRlbS5zZXRTaGFyZVVybChVUkxEZWNvZGVyLmRlY29kZShzaGFyZVVybCwgIlVURi04IikpOwogICAgICAgICAgICB9IGNhdGNoIChVbnN1cHBvcnRlZEVuY29kaW5nRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgfQoKICAgICAgICBASmF2YXNjcmlwdEludGVyZmFjZQogICAgICAgIHB1YmxpYyB2b2lkIGdldEh0bWw1U2hhcmVDb250ZW50KCkgewogICAgICAgICAgICBNYXA8U3RyaW5nLCBPYmplY3Q+IG1hcCA9IG5ldyBIYXNoTWFwPFN0cmluZywgT2JqZWN0PigpOwogICAgICAgICAgICBpZiAoaHRtbDVJdGVtICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIG1hcC5wdXQoInRpdGxlIiwgaHRtbDVJdGVtLmdldFRpdGxlKCkpOwogICAgICAgICAgICAgICAgbWFwLnB1dCgiY29udGVudCIsIGh0bWw1SXRlbS5nZXRDb250ZW50KCkpOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBtYXAucHV0KCJpbWdVcmwiLCBVUkxFbmNvZGVyLmVuY29kZShodG1sNUl0ZW0uZ2V0SW1nVXJsKCksICJVVEYtOCIpKTsKICAgICAgICAgICAgICAgICAgICBtYXAucHV0KCJzaGFyZVVybCIsIFVSTEVuY29kZXIuZW5jb2RlKGh0bWw1SXRlbS5nZXRTaGFyZVVybCgpLCAiVVRGLTgiKSk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChVbnN1cHBvcnRlZEVuY29kaW5nRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZpbmFsIFN0cmluZyBqc29uID0gbmV3IEdzb24oKS50b0pzb24obWFwKTsKCiAgICAgICAgICAgIGlmIChtQ3VycmVudFdlYlZpZXcgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgbUN1cnJlbnRXZWJWaWV3LnBvc3QobmV3IFJ1bm5hYmxlKCkgewogICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIHBhcmFtID0gImphdmFzY3JpcHQ6Y2F0Y2hTaGFyZU1vZGVsRnJvbUFwcCgnIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsganNvbiArICInKSI7CiAgICAgICAgICAgICAgICAgICAgICAgIG1DdXJyZW50V2ViVmlldy5sb2FkVXJsKHBhcmFtKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICB9CgoKICAgIH0KCn0K</text>
      </register>
      <register name="q" type="4">
        <keys>
          <key char="121" code="0" mods="0" />
          <key char="121" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="65535" code="65" mods="130" />
          <key char="61" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
        </keys>
      </register>
      <register name="2" type="2">
        <text encoding="base64">ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlBVU0hfUEtHTkFNRSAgICAgOiBhcHBsaWNhdGlvbklkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKUFVTSF9BUFBLRVkgICAgICA6ICJlZGI1ZmU5YmFmZThiOTlhN2FmOWQ4MTYiLCAvL0pQdXNoyc/XorLhtcSw/MP7ttTTprXEYXBwa2V5LgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKUFVTSF9DSEFOTkVMICAgICA6ICJ6YWl6aGVuZ3pob3UiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBYSUFPTUlfQVBQS0VZIDogIk1JLTUxMDE3NjU4MjQwOTgiLCAvLyA/P8a9zKjXorLhtcRhcHBrZXkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWElBT01JX0FQUElEIDogIk1JLTI4ODIzMDM3NjE1MTc2NTgwOTgiXQo=</text>
      </register>
      <register name="r" type="4">
        <keys>
          <key char="58" code="0" mods="0" />
          <key char="37" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="47" code="0" mods="0" />
          <key char="34" code="0" mods="0" />
          <key char="92" code="0" mods="0" />
          <key char="40" code="0" mods="0" />
          <key char="92" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="92" code="0" mods="0" />
          <key char="43" code="0" mods="0" />
          <key char="92" code="0" mods="0" />
          <key char="41" code="0" mods="0" />
          <key char="92" code="0" mods="0" />
          <key char="40" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="92" code="0" mods="0" />
          <key char="124" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="92" code="0" mods="0" />
          <key char="124" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="92" code="0" mods="0" />
          <key char="41" code="0" mods="0" />
          <key char="34" code="0" mods="0" />
          <key char="47" code="0" mods="0" />
          <key char="34" code="0" mods="0" />
          <key char="64" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="109" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="92" code="0" mods="0" />
          <key char="47" code="0" mods="0" />
          <key char="92" code="0" mods="0" />
          <key char="50" code="0" mods="0" />
          <key char="95" code="0" mods="0" />
          <key char="92" code="0" mods="0" />
          <key char="49" code="0" mods="0" />
          <key char="34" code="0" mods="0" />
          <key char="47" code="0" mods="0" />
          <key char="103" code="0" mods="0" />
          <key char="65535" code="10" mods="0" />
        </keys>
      </register>
      <register name="3" type="2">
        <text encoding="base64">ICAgICAgICAgICAgICAgICAgICBmZXRjaERhdGEoKTsK</text>
      </register>
      <register name="4" type="2">
        <text encoding="base64">ICAgICAgICAgICAgICAgICAgICBmZXRjaERhdGEoKTsK</text>
      </register>
      <register name="t" type="4">
        <keys>
          <key char="74" code="0" mods="0" />
          <key char="74" code="0" mods="0" />
          <key char="86" code="0" mods="0" />
          <key char="58" code="0" mods="0" />
          <key char="39" code="0" mods="0" />
          <key char="60" code="0" mods="0" />
          <key char="44" code="0" mods="0" />
          <key char="39" code="0" mods="0" />
          <key char="62" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="47" code="0" mods="0" />
          <key char="59" code="0" mods="0" />
          <key char="47" code="0" mods="0" />
          <key char="47" code="0" mods="0" />
          <key char="103" code="0" mods="0" />
          <key char="65535" code="10" mods="0" />
          <key char="118" code="0" mods="0" />
          <key char="36" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="34" code="0" mods="0" />
          <key char="42" code="0" mods="0" />
          <key char="121" code="0" mods="0" />
          <key char="83" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name="5" type="2">
        <text encoding="base64">ICAgICAgICAgICAgICAgICAgICBtUHJlc2VudGVyLmdldERhdGEoKTsK</text>
      </register>
      <register name="6" type="2">
        <text encoding="base64">ICAgICAgICAgICAgICAgICAgICAgICAgLy8xLsz719PNxrz2u/LV38m+s/0gMi608snNCg==</text>
      </register>
      <register name="v" type="4">
        <keys>
          <key char="107" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="86" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="64" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="63" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="65535" code="10" mods="0" />
          <key char="94" code="0" mods="0" />
          <key char="102" code="0" mods="0" />
          <key char="60" code="0" mods="0" />
          <key char="121" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="32" code="0" mods="0" />
          <key char="47" code="0" mods="0" />
          <key char="41" code="0" mods="0" />
          <key char="41" code="0" mods="0" />
          <key char="65535" code="10" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="46" code="0" mods="0" />
          <key char="109" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="40" code="0" mods="0" />
          <key char="82" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="85" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="46" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="102" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="109" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="74" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="40" code="0" mods="0" />
          <key char="41" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="70" code="0" mods="0" />
          <key char="46" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="46" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="109" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="40" code="0" mods="0" />
          <key char="82" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="85" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="46" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="121" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="102" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="109" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="84" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="82" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="121" code="0" mods="0" />
          <key char="87" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="40" code="0" mods="0" />
          <key char="41" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="70" code="0" mods="0" />
          <key char="46" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="46" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="109" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="40" code="0" mods="0" />
          <key char="82" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="85" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="46" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="121" code="0" mods="0" />
          <key char="73" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="76" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="103" code="0" mods="0" />
          <key char="73" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="40" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="65" code="0" mods="0" />
          <key char="59" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="70" code="0" mods="0" />
          <key char="46" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="102" code="0" mods="0" />
          <key char="40" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="86" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
        </keys>
      </register>
      <register name="7" type="2">
        <text encoding="base64">ICAgICAgICAgICAgICAgICAgICAgICAgLy8xLsz719PNxrz2u/LV38m+s/0gMi608snNCg==</text>
      </register>
      <register name="w" type="4">
        <keys>
          <key char="100" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="40" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="85" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="46" code="0" mods="0" />
          <key char="103" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="83" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="103" code="0" mods="0" />
          <key char="40" code="0" mods="0" />
          <key char="41" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="80" code="0" mods="0" />
        </keys>
      </register>
      <register name="8" type="2">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="x" type="2">
        <text encoding="base64">b3JnLmdyYWRsZS5kYWVtb249dHJ1ZQpvcmcuZ3JhZGxlLmp2bWFyZ3M9LVhteDE1MzZtCm9yZy5ncmFkbGUucGFyYWxsZWw9dHJ1ZQpvcmcuZ3JhZGxlLmNvbmZpZ3VyZW9uZGVtYW5kPXRydWUKYW5kcm9pZC5lbmFibGVCdWlsZENhY2hlID0gdHJ1ZQo=</text>
      </register>
      <register name="9" type="2">
        <text encoding="base64">ICAgIDxpdGVtIG5hbWU9ImRwX2hhbGYiIHR5cGU9ImRpbWVuIiBmb3JtYXQ9ImZsb2F0Ij4wLjVkcDwvaXRlbT4K</text>
      </register>
      <register name="y" type="4">
        <keys>
          <key char="73" code="0" mods="0" />
          <key char="86" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="119" code="0" mods="0" />
          <key char="85" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="46" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="119" code="0" mods="0" />
          <key char="102" code="0" mods="0" />
          <key char="40" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="44" code="0" mods="0" />
          <key char="32" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="70" code="0" mods="0" />
          <key char="46" code="0" mods="0" />
          <key char="120" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="68" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="119" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="98" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="119" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name=":" type="4">
        <text>1932</text>
      </register>
    </registers>
    <search>
      <last-search encoding="base64">XDxDb25maWdcPg==</last-search>
      <last-offset />
      <last-pattern encoding="base64">XDxDb25maWdcPg==</last-pattern>
      <last-replace />
      <last-substitute>;</last-substitute>
      <last-dir>1</last-dir>
      <show-last>false</show-last>
    </search>
    <history>
      <history-search>
        <entry encoding="base64">XDx0b2FzdF9kZWxldGVfY29tbWVudF9zdWNjZXNzXD4=</entry>
        <entry>Presenter</entry>
        <entry encoding="base64">XDxtUnhCdXNEaXNwb3NhYmxlXD4=</entry>
        <entry encoding="base64">XDxnZXRGTVBvc3RMaXN0XD4=</entry>
        <entry encoding="base64">XDxtRGF0YVNvdXJjZVN1cHBsaWVyXD4=</entry>
        <entry encoding="base64">XDxyZWdpc3RlckJpdG1hcHNNZXRob2RzXD4=</entry>
        <entry encoding="base64">XDxXSUxMX05PVF9EUkFXXD4=</entry>
        <entry encoding="base64">XDx3aWxsTm90RHJhd1w+</entry>
        <entry>willNotDraw</entry>
        <entry>doTrav</entry>
        <entry encoding="base64">XDxtVHJlZU9ic2VydmVyXD4=</entry>
        <entry encoding="base64">XDxvbkF0dGFjaGVkVG9XaW5kb3dcPg==</entry>
        <entry encoding="base64">XDxkcmF3TWFza2VkXD4=</entry>
        <entry encoding="base64">XDxkaXNwYXRjaERyYXdVc2luZ0JpdG1hcFw+</entry>
        <entry>dispatchDraw</entry>
        <entry>nanping</entry>
        <entry>WebSettings</entry>
        <entry encoding="base64">XDxXZWJTZXR0aW5nc1w+</entry>
        <entry encoding="base64">XDxDb25zdGFudHNcPg==</entry>
        <entry encoding="base64">XDxDb25maWdcPg==</entry>
      </history-search>
      <history-cmd>
        <entry>126</entry>
        <entry>425</entry>
        <entry>252</entry>
        <entry>458</entry>
        <entry>67</entry>
        <entry encoding="base64">JzwsJz5zLzEvMy9n</entry>
        <entry>reg</entry>
        <entry encoding="base64">JzwsJz4nPCwnPnMvOy8vZw==</entry>
        <entry>86</entry>
        <entry>180</entry>
        <entry>228</entry>
        <entry>69</entry>
        <entry>346</entry>
        <entry>205</entry>
        <entry>63</entry>
        <entry>94</entry>
        <entry>109</entry>
        <entry>102</entry>
        <entry>1932</entry>
        <entry>tabnext</entry>
      </history-cmd>
      <history-expr />
      <history-input />
    </history>
    <shortcut-conflicts>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed Q</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed V</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed U</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed CLOSE_BRACKET</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed I</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed O</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed OPEN_BRACKET</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed P</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed X</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed C</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed A</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed B</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed Y</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed 2</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed D</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed W</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed F</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed H</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed M</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed R</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed E</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>pressed F8</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed G</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed S</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed N</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed T</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed F5</text>
      </shortcut-conflict>
    </shortcut-conflicts>
  </component>
</application>